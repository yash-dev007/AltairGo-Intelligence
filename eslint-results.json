[{"filePath":"D:\\AltairLabs\\.venv\\Lib\\site-packages\\urllib3\\contrib\\emscripten\\emscripten_fetch_worker.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\.venv\\Lib\\site-packages\\werkzeug\\debug\\shared\\debugger.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'EVALEX_TRUSTED' is not defined.","line":2,"column":8,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'CONSOLE_MODE' is not defined.","line":6,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'EVALEX' is not defined.","line":6,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'EVALEX' is not defined.","line":11,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'SECRET' is not defined.","line":42,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":42,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'EVALEX_TRUSTED' is not defined.","line":60,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":60,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'EVALEX_TRUSTED' is not defined.","line":83,"column":8,"nodeType":"Identifier","messageId":"undef","endLine":83,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'EVALEX' is not defined.","line":161,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":161,"endColumn":15}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"docReady(() => {\n  if (!EVALEX_TRUSTED) {\n    initPinBox();\n  }\n  // if we are in console mode, show the console.\n  if (CONSOLE_MODE && EVALEX) {\n    createInteractiveConsole();\n  }\n\n  const frames = document.querySelectorAll(\"div.traceback div.frame\");\n  if (EVALEX) {\n    addConsoleIconToFrames(frames);\n  }\n  addEventListenersToElements(document.querySelectorAll(\"div.detail\"), \"click\", () =>\n    document.querySelector(\"div.traceback\").scrollIntoView(false)\n  );\n  addToggleFrameTraceback(frames);\n  addToggleTraceTypesOnClick(document.querySelectorAll(\"h2.traceback\"));\n  addInfoPrompt(document.querySelectorAll(\"span.nojavascript\"));\n  wrapPlainTraceback();\n});\n\nfunction addToggleFrameTraceback(frames) {\n  frames.forEach((frame) => {\n    frame.addEventListener(\"click\", () => {\n      frame.getElementsByTagName(\"pre\")[0].parentElement.classList.toggle(\"expanded\");\n    });\n  })\n}\n\n\nfunction wrapPlainTraceback() {\n  const plainTraceback = document.querySelector(\"div.plain textarea\");\n  const wrapper = document.createElement(\"pre\");\n  const textNode = document.createTextNode(plainTraceback.textContent);\n  wrapper.appendChild(textNode);\n  plainTraceback.replaceWith(wrapper);\n}\n\nfunction makeDebugURL(args) {\n  const params = new URLSearchParams(args)\n  params.set(\"s\", SECRET)\n  return `?__debugger__=yes&${params}`\n}\n\nfunction initPinBox() {\n  document.querySelector(\".pin-prompt form\").addEventListener(\n    \"submit\",\n    function (event) {\n      event.preventDefault();\n      const btn = this.btn;\n      btn.disabled = true;\n\n      fetch(\n        makeDebugURL({cmd: \"pinauth\", pin: this.pin.value})\n      )\n        .then((res) => res.json())\n        .then(({auth, exhausted}) => {\n          if (auth) {\n            EVALEX_TRUSTED = true;\n            fadeOut(document.getElementsByClassName(\"pin-prompt\")[0]);\n          } else {\n            alert(\n              `Error: ${\n                exhausted\n                  ? \"too many attempts.  Restart server to retry.\"\n                  : \"incorrect pin\"\n              }`\n            );\n          }\n        })\n        .catch((err) => {\n          alert(\"Error: Could not verify PIN.  Network error?\");\n          console.error(err);\n        })\n        .finally(() => (btn.disabled = false));\n    },\n    false\n  );\n}\n\nfunction promptForPin() {\n  if (!EVALEX_TRUSTED) {\n    fetch(makeDebugURL({cmd: \"printpin\"}));\n    const pinPrompt = document.getElementsByClassName(\"pin-prompt\")[0];\n    fadeIn(pinPrompt);\n    document.querySelector('.pin-prompt input[name=\"pin\"]').focus();\n  }\n}\n\n/**\n * Helper function for shell initialization\n */\nfunction openShell(consoleNode, target, frameID) {\n  promptForPin();\n  if (consoleNode) {\n    slideToggle(consoleNode);\n    return consoleNode;\n  }\n  let historyPos = 0;\n  const history = [\"\"];\n  const consoleElement = createConsole();\n  const output = createConsoleOutput();\n  const form = createConsoleInputForm();\n  const command = createConsoleInput();\n\n  target.parentNode.appendChild(consoleElement);\n  consoleElement.append(output);\n  consoleElement.append(form);\n  form.append(command);\n  command.focus();\n  slideToggle(consoleElement);\n\n  form.addEventListener(\"submit\", (e) => {\n    handleConsoleSubmit(e, command, frameID).then((consoleOutput) => {\n      output.append(consoleOutput);\n      command.focus();\n      consoleElement.scrollTo(0, consoleElement.scrollHeight);\n      const old = history.pop();\n      history.push(command.value);\n      if (typeof old !== \"undefined\") {\n        history.push(old);\n      }\n      historyPos = history.length - 1;\n      command.value = \"\";\n    });\n  });\n\n  command.addEventListener(\"keydown\", (e) => {\n    if (e.key === \"l\" && e.ctrlKey) {\n      output.innerText = \"--- screen cleared ---\";\n    } else if (e.key === \"ArrowUp\" || e.key === \"ArrowDown\") {\n      // Handle up arrow and down arrow.\n      if (e.key === \"ArrowUp\" && historyPos > 0) {\n        e.preventDefault();\n        historyPos--;\n      } else if (e.key === \"ArrowDown\" && historyPos < history.length - 1) {\n        historyPos++;\n      }\n      command.value = history[historyPos];\n    }\n    return false;\n  });\n\n  return consoleElement;\n}\n\nfunction addEventListenersToElements(elements, event, listener) {\n  elements.forEach((el) => el.addEventListener(event, listener));\n}\n\n/**\n * Add extra info\n */\nfunction addInfoPrompt(elements) {\n  for (let i = 0; i < elements.length; i++) {\n    elements[i].innerHTML =\n      \"<p>To switch between the interactive traceback and the plaintext \" +\n      'one, you can click on the \"Traceback\" headline. From the text ' +\n      \"traceback you can also create a paste of it. \" +\n      (!EVALEX\n        ? \"\"\n        : \"For code execution mouse-over the frame you want to debug and \" +\n          \"click on the console icon on the right side.\" +\n          \"<p>You can execute arbitrary Python code in the stack frames and \" +\n          \"there are some extra helpers available for introspection:\" +\n          \"<ul><li><code>dump()</code> shows all variables in the frame\" +\n          \"<li><code>dump(obj)</code> dumps all that's known about the object</ul>\");\n    elements[i].classList.remove(\"nojavascript\");\n  }\n}\n\nfunction addConsoleIconToFrames(frames) {\n  for (let i = 0; i < frames.length; i++) {\n    let consoleNode = null;\n    const target = frames[i];\n    const frameID = frames[i].id.substring(6);\n\n    for (let j = 0; j < target.getElementsByTagName(\"pre\").length; j++) {\n      const img = createIconForConsole();\n      img.addEventListener(\"click\", (e) => {\n        e.stopPropagation();\n        consoleNode = openShell(consoleNode, target, frameID);\n        return false;\n      });\n      target.getElementsByTagName(\"pre\")[j].append(img);\n    }\n  }\n}\n\nfunction slideToggle(target) {\n  target.classList.toggle(\"active\");\n}\n\n/**\n * toggle traceback types on click.\n */\nfunction addToggleTraceTypesOnClick(elements) {\n  for (let i = 0; i < elements.length; i++) {\n    elements[i].addEventListener(\"click\", () => {\n      document.querySelector(\"div.traceback\").classList.toggle(\"hidden\");\n      document.querySelector(\"div.plain\").classList.toggle(\"hidden\");\n    });\n    elements[i].style.cursor = \"pointer\";\n    document.querySelector(\"div.plain\").classList.toggle(\"hidden\");\n  }\n}\n\nfunction createConsole() {\n  const consoleNode = document.createElement(\"pre\");\n  consoleNode.classList.add(\"console\");\n  consoleNode.classList.add(\"active\");\n  return consoleNode;\n}\n\nfunction createConsoleOutput() {\n  const output = document.createElement(\"div\");\n  output.classList.add(\"output\");\n  output.innerHTML = \"[console ready]\";\n  return output;\n}\n\nfunction createConsoleInputForm() {\n  const form = document.createElement(\"form\");\n  form.innerHTML = \"&gt;&gt;&gt; \";\n  return form;\n}\n\nfunction createConsoleInput() {\n  const command = document.createElement(\"input\");\n  command.type = \"text\";\n  command.setAttribute(\"autocomplete\", \"off\");\n  command.setAttribute(\"spellcheck\", false);\n  command.setAttribute(\"autocapitalize\", \"off\");\n  command.setAttribute(\"autocorrect\", \"off\");\n  return command;\n}\n\nfunction createIconForConsole() {\n  const img = document.createElement(\"img\");\n  img.setAttribute(\"src\", makeDebugURL({cmd: \"resource\", f: \"console.png\"}));\n  img.setAttribute(\"title\", \"Open an interactive python shell in this frame\");\n  return img;\n}\n\nfunction createExpansionButtonForConsole() {\n  const expansionButton = document.createElement(\"a\");\n  expansionButton.setAttribute(\"href\", \"#\");\n  expansionButton.setAttribute(\"class\", \"toggle\");\n  expansionButton.innerHTML = \"&nbsp;&nbsp;\";\n  return expansionButton;\n}\n\nfunction createInteractiveConsole() {\n  const target = document.querySelector(\"div.console div.inner\");\n  while (target.firstChild) {\n    target.removeChild(target.firstChild);\n  }\n  openShell(null, target, 0);\n}\n\nfunction handleConsoleSubmit(e, command, frameID) {\n  // Prevent page from refreshing.\n  e.preventDefault();\n\n  return new Promise((resolve) => {\n    fetch(makeDebugURL({cmd: command.value, frm: frameID}))\n      .then((res) => {\n        return res.text();\n      })\n      .then((data) => {\n        const tmp = document.createElement(\"div\");\n        tmp.innerHTML = data;\n        resolve(tmp);\n\n        // Handle expandable span for long list outputs.\n        // Example to test: list(range(13))\n        let wrapperAdded = false;\n        const wrapperSpan = document.createElement(\"span\");\n        const expansionButton = createExpansionButtonForConsole();\n\n        tmp.querySelectorAll(\"span.extended\").forEach((spanToWrap) => {\n          const parentDiv = spanToWrap.parentNode;\n          if (!wrapperAdded) {\n            parentDiv.insertBefore(wrapperSpan, spanToWrap);\n            wrapperAdded = true;\n          }\n          parentDiv.removeChild(spanToWrap);\n          wrapperSpan.append(spanToWrap);\n          spanToWrap.hidden = true;\n\n          expansionButton.addEventListener(\"click\", (event) => {\n            event.preventDefault();\n            spanToWrap.hidden = !spanToWrap.hidden;\n            expansionButton.classList.toggle(\"open\");\n            return false;\n          });\n        });\n\n        // Add expansion button at end of wrapper.\n        if (wrapperAdded) {\n          wrapperSpan.append(expansionButton);\n        }\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n    return false;\n  });\n}\n\nfunction fadeOut(element) {\n  element.style.opacity = 1;\n\n  (function fade() {\n    element.style.opacity -= 0.1;\n    if (element.style.opacity < 0) {\n      element.style.display = \"none\";\n    } else {\n      requestAnimationFrame(fade);\n    }\n  })();\n}\n\nfunction fadeIn(element, display) {\n  element.style.opacity = 0;\n  element.style.display = display || \"block\";\n\n  (function fade() {\n    let val = parseFloat(element.style.opacity) + 0.1;\n    if (val <= 1) {\n      element.style.opacity = val;\n      requestAnimationFrame(fade);\n    }\n  })();\n}\n\nfunction docReady(fn) {\n  if (document.readyState === \"complete\" || document.readyState === \"interactive\") {\n    setTimeout(fn, 1);\n  } else {\n    document.addEventListener(\"DOMContentLoaded\", fn);\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\App.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\AboutUs\\AboutUs.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\AddDestinationModal\\AddDestinationModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\Blogs\\BlogContent.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\Blogs\\Blogs.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\Booking\\BookingWidget.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\ChatWidget\\ChatWidget.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":55,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":55,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\r\nimport { Sparkles, X, Send, Paperclip, Minimize2, Maximize2, FileText, Globe, LineChart, SquareCheck } from 'lucide-react';\r\nimport { TripAI } from '../../services/TripAI';\r\nimport chatIcon from '../../assets/AltairGo_AI_chat_icon.png';\r\nimport './ChatWidget.css';\r\n\r\nconst ChatWidget = () => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n\r\n\r\n    const [isMinimized, setIsMinimized] = useState(false);\r\n    const [inputValue, setInputValue] = useState('');\r\n    const [messages, setMessages] = useState([]);\r\n    const messagesEndRef = useRef(null);\r\n\r\n    const toggleChat = () => {\r\n        if (!isOpen) setIsMinimized(false);\r\n        setIsOpen(!isOpen);\r\n    };\r\n    const toggleMinimize = (e) => {\r\n        e.stopPropagation();\r\n        setIsMinimized(!isMinimized);\r\n    };\r\n\r\n    const scrollToBottom = () => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    };\r\n\r\n    useEffect(() => {\r\n        scrollToBottom();\r\n    }, [messages, isOpen]);\r\n\r\n    const handleSendMessage = async () => {\r\n        if (!inputValue.trim()) return;\r\n\r\n        const userText = inputValue;\r\n\r\n        // Add user message immediately\r\n        const userMsg = { role: 'user', content: userText };\r\n        setMessages(prev => [...prev, userMsg]);\r\n        setInputValue('');\r\n\r\n        // Show thinking state (optional, or just wait)\r\n        // For now, we'll just wait for the response\r\n\r\n        try {\r\n            // Get AI response\r\n            // Import TripAI if not already imported (Need to add import at top)\r\n            const aiResponseText = await TripAI.chat(userText);\r\n\r\n            setMessages(prev => [...prev, {\r\n                role: 'ai',\r\n                content: aiResponseText\r\n            }]);\r\n        } catch (err) {\r\n            setMessages(prev => [...prev, {\r\n                role: 'ai',\r\n                content: \"Sorry, I couldn't reach the server.\"\r\n            }]);\r\n        }\r\n    };\r\n\r\n    const handleKeyDown = (e) => {\r\n        if (e.key === 'Enter' && !e.shiftKey) {\r\n            e.preventDefault();\r\n            handleSendMessage();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={`chat-widget-container ${isOpen ? 'open' : ''} ${isMinimized ? 'minimized' : ''}`}>\r\n            {/* Toggle Button */}\r\n            {!isOpen && (\r\n                <button className=\"chat-toggle-btn\" onClick={toggleChat}>\r\n                    <img src={chatIcon} alt=\"AI Chat\" className=\"chat-icon-img\" />\r\n                </button>\r\n            )}\r\n\r\n            {/* Chat Window */}\r\n            {isOpen && (\r\n                <div className=\"chat-window\">\r\n                    {/* Header */}\r\n                    <div className=\"chat-header\" onClick={() => setIsMinimized(!isMinimized)}>\r\n                        <div className=\"chat-header-left\">\r\n                            <span className=\"ai-avatar\">\r\n                                <img src={chatIcon} alt=\"AI\" className=\"ai-avatar-img\" />\r\n                            </span>\r\n                            <span className=\"chat-title\">New AI chat</span>\r\n                        </div>\r\n                        <div className=\"chat-header-actions\">\r\n                            <button className=\"icon-btn\" onClick={toggleMinimize}>\r\n                                {isMinimized ? <Maximize2 size={16} /> : <Minimize2 size={16} />}\r\n                            </button>\r\n                            <button className=\"icon-btn\" onClick={toggleChat}>\r\n                                <X size={16} />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Content Area */}\r\n                    {!isMinimized && (\r\n                        <>\r\n                            <div className=\"chat-body\">\r\n                                {messages.length === 0 ? (\r\n                                    <div className=\"empty-state\">\r\n                                        <div className=\"large-avatar\">\r\n                                            <img src={chatIcon} alt=\"AI\" className=\"large-avatar-img\" />\r\n                                        </div>\r\n                                        <h2 className=\"greeting\">What's our quest today?</h2>\r\n\r\n                                        <div className=\"suggestions\">\r\n                                            <button className=\"suggestion-item\">\r\n                                                <span className=\"suggestion-icon\"><FileText size={16} className=\"text-blue-400\" /></span>\r\n                                                <span className=\"suggestion-text\">Personalize your AltairGO AI</span>\r\n                                                <span className=\"badge-new\">New</span>\r\n                                            </button>\r\n                                            <button className=\"suggestion-item\">\r\n                                                <span className=\"suggestion-icon\"><Globe size={16} /></span>\r\n                                                <span className=\"suggestion-text\">Translate this page</span>\r\n                                            </button>\r\n                                            <button className=\"suggestion-item\">\r\n                                                <span className=\"suggestion-icon\"><LineChart size={16} className=\"text-blue-400\" /></span>\r\n                                                <span className=\"suggestion-text\">Create a itinerary</span>\r\n                                                <span className=\"badge-new\">New</span>\r\n                                            </button>\r\n                                            <button className=\"suggestion-item\">\r\n                                                <span className=\"suggestion-icon\"><SquareCheck size={16} className=\"text-blue-400\" /></span>\r\n                                                <span className=\"suggestion-text\">Suggest me best destinations</span>\r\n                                                <span className=\"badge-new\">New</span>\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                ) : (\r\n                                    <div className=\"messages-list\">\r\n                                        {messages.map((msg, idx) => (\r\n                                            <div key={idx} className={`message ${msg.role}`}>\r\n                                                <div className=\"message-content\">\r\n                                                    {msg.content.split(/(!\\[.*?\\]\\(.*?\\))/g).map((part, i) => {\r\n                                                        const match = part.match(/!\\[(.*?)\\]\\((.*?)\\)/);\r\n                                                        if (match) {\r\n                                                            return (\r\n                                                                <img\r\n                                                                    key={i}\r\n                                                                    src={match[2]}\r\n                                                                    alt={match[1]}\r\n                                                                    className=\"chat-embedded-image\"\r\n                                                                    style={{ maxWidth: '100%', borderRadius: '8px', marginTop: '8px' }}\r\n                                                                />\r\n                                                            );\r\n                                                        }\r\n                                                        return <span key={i}>{part}</span>;\r\n                                                    })}\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                                        <div ref={messagesEndRef} />\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Footer / Input */}\r\n                            <div className=\"chat-footer\">\r\n                                <div className=\"chat-input-container\">\r\n                                    <div className=\"chat-input-toolbar\">\r\n                                        <button className=\"toolbar-btn\">@</button>\r\n                                        <button className=\"toolbar-btn text-muted\">Page context</button>\r\n                                    </div>\r\n                                    <textarea\r\n                                        placeholder=\"Ask AI anything...\"\r\n                                        value={inputValue}\r\n                                        onChange={(e) => setInputValue(e.target.value)}\r\n                                        onKeyDown={handleKeyDown}\r\n                                    />\r\n                                    <div className=\"chat-input-actions\">\r\n                                        <div className=\"left-actions\">\r\n                                            <button className=\"action-btn\"><Paperclip size={18} /></button>\r\n                                            <span className=\"text-hint\">Auto</span>\r\n                                        </div>\r\n                                        <button\r\n                                            className={`send-btn ${inputValue.trim() ? 'active' : ''}`}\r\n                                            onClick={handleSendMessage}\r\n                                        >\r\n                                            <Send size={16} />\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ChatWidget;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\DestinationCard\\DestinationCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\Destinations\\DestinationContent.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'backPath' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":25,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"backPath"},"fix":{"range":[1323,1380],"text":""},"desc":"Remove unused variable 'backPath'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { MapPin, Star, CheckCircle, ArrowLeft } from 'lucide-react';\r\n\r\n\r\n// We need to duplicate the styles or import them. \r\n// Since DestinationDetails.module.css isn't strictly inside components/, \r\n// we assume the parent passed the correct context or we import it here.\r\n// But importing module CSS from pages/ might be brittle if file structure changes.\r\n// For now, I'll assume we can import it from the relative path if I place this component in src/components/Destinations\r\n// Actually, let's just use inline styles for the extracted parts or reuse the same classNames if global.\r\n// BUt wait, the original used CSS Modules.\r\n// I will attempt to import the same module file. \r\n// NOTE: I need to know where this file is placed. It's in src/components/Destinations.\r\n// The styles are in src/pages/destinations/DestinationDetails.module.css.\r\nimport pageStyles from '../../pages/destinations/DestinationDetails.module.css';\r\n\r\nconst DestinationContent = ({ destination, reviews = [], averageRating = 0, totalReviews = 0, starCounts = {}, onOpenReviewModal }) => {\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n\r\n    // Fallback if destination is null\r\n    if (!destination) return null;\r\n\r\n    const backPath = location.state?.from || '/destinations';\r\n    const backLabel = location.state?.from ? 'Back to Planner' : 'Back to all destinations';\r\n\r\n    // Helper for navigation\r\n    const handleBack = () => {\r\n        if (location.state?.from) {\r\n            navigate(-1);\r\n        } else {\r\n            navigate('/destinations');\r\n        }\r\n    };\r\n\r\n    // Calculate rating if not passed (for preview mode where we might just have the raw object)\r\n    const effectiveRating = averageRating || destination.rating || 0;\r\n    const effectiveTotalReviews = totalReviews || (destination.reviews_count_str === 'New' ? 0 : parseInt(destination.reviews_count_str)) || 0;\r\n\r\n    return (\r\n        <div className={pageStyles.main}>\r\n            {/* Hero Section */}\r\n            <div className={pageStyles.hero}>\r\n                <img\r\n                    src={destination.image}\r\n                    alt={destination.name}\r\n                    className={pageStyles.heroImage}\r\n                />\r\n                <div className={pageStyles.heroOverlay} />\r\n                <div className={pageStyles.heroContent}>\r\n                    <button\r\n                        onClick={handleBack}\r\n                        className={pageStyles.backLink}\r\n                        style={{ background: 'transparent', border: 'none', color: 'white', cursor: 'pointer', fontSize: '1rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}\r\n                    >\r\n                        <ArrowLeft size={16} /> {backLabel}\r\n                    </button>\r\n                    <h1 className={pageStyles.title}>{destination.name}</h1>\r\n                    <p className={pageStyles.shortDesc}>{destination.desc}</p>\r\n                    <div className={pageStyles.metaTags}>\r\n                        <div className={pageStyles.metaTag}>\r\n                            <MapPin size={18} /> {destination.location}\r\n                        </div>\r\n                        <div className={pageStyles.metaTag}>\r\n                            <Star size={18} fill=\"orange\" stroke=\"none\" /> {effectiveRating} ({effectiveTotalReviews} reviews)\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className={pageStyles.container}>\r\n\r\n                {/* Main Content */}\r\n                <div>\r\n                    <h2 style={{ fontSize: '2rem', fontWeight: '700', color: '#0f172a', marginBottom: '1.5rem' }}>About {destination.name}</h2>\r\n                    <p style={{ fontSize: '1.1rem', lineHeight: '1.8', color: '#475569', marginBottom: '3rem' }}>\r\n                        {destination.description}\r\n                    </p>\r\n\r\n                    <h3 style={{ fontSize: '1.5rem', fontWeight: '700', color: '#0f172a', marginBottom: '1.5rem' }}>Highlights</h3>\r\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem', marginBottom: '3rem' }}>\r\n                        {destination.highlights && destination.highlights.map((highlight, index) => (\r\n                            <div key={index} className={pageStyles.highlightCard}>\r\n                                <CheckCircle size={20} color=\"var(--primary)\" />\r\n                                <span style={{ fontWeight: '500', color: '#334155' }}>{highlight}</span>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Vibe Tags / Review Highlights */}\r\n                    {destination.vibe_tags && destination.vibe_tags.length > 0 && (\r\n                        <div className={pageStyles.vibeSection}>\r\n                            <h3 className={pageStyles.vibeTitle}>\r\n                                <Star size={24} color=\"var(--primary)\" fill=\"var(--primary)\" style={{ opacity: 0.2 }} />\r\n                                Traveler Highlights\r\n                            </h3>\r\n                            <div className={pageStyles.vibeGrid}>\r\n                                {destination.vibe_tags.map((vibe, idx) => (\r\n                                    <div key={idx} className={pageStyles.vibeCard}>\r\n                                        <div className={pageStyles.vibeHeader}>\r\n                                            <span className={pageStyles.categoryLabel}>{vibe.category || 'Vibe'}</span>\r\n                                            <span className={`${pageStyles.sentimentBadge} ${vibe.sentiment === 'Positive' ? pageStyles.sentimentPositive :\r\n                                                vibe.sentiment === 'Negative' ? pageStyles.sentimentNegative :\r\n                                                    pageStyles.sentimentNeutral\r\n                                                }`}>\r\n                                                {vibe.sentiment || 'Neutral'}\r\n                                            </span>\r\n                                        </div>\r\n                                        <div className={pageStyles.vibeTag}>{vibe.tag || vibe}</div>\r\n                                        <div className={pageStyles.vibeFooter}>\r\n                                            <span>Mentioned by <strong>{vibe.count || 1}</strong> travelers</span>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Reviews Section */}\r\n                    {/* Only show reviews if we actually have them or if it's the live site. \r\n                        For preview, we might skip this or show a placeholder. \r\n                        Let's keep it but handle empty lists gracefully. */}\r\n                    <div className={pageStyles.reviewsSection}>\r\n                        <div className={pageStyles.reviewsHeader} style={{ marginBottom: '2rem' }}>\r\n                            <div>\r\n                                <h3 style={{ fontSize: '1.5rem', fontWeight: '700', color: '#0f172a' }}>Reviews</h3>\r\n                            </div>\r\n                            {onOpenReviewModal && (\r\n                                <button className={pageStyles.writeReviewBtn} onClick={onOpenReviewModal}>\r\n                                    Write a Review\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Rating Summary - Conditionally render if we have stats */}\r\n                        {starCounts && (\r\n                            <div className={pageStyles.ratingSummary}>\r\n                                <div className={pageStyles.ratingOverview}>\r\n                                    <span className={pageStyles.bigRating}>{effectiveRating}</span>\r\n                                    <div style={{ display: 'flex', justifyContent: 'center', marginBottom: '0.5rem' }}>\r\n                                        {[...Array(5)].map((_, i) => (\r\n                                            <Star key={i} size={18} fill={i < Math.round(Number(effectiveRating)) ? \"orange\" : \"#e2e8f0\"} stroke=\"none\" />\r\n                                        ))}\r\n                                    </div>\r\n                                    <span style={{ color: '#64748b', fontSize: '0.9rem' }}>{effectiveTotalReviews} reviews</span>\r\n                                </div>\r\n\r\n                                <div className={pageStyles.ratingBars}>\r\n                                    {[5, 4, 3, 2, 1].map(stars => (\r\n                                        <div key={stars} className={pageStyles.barRow}>\r\n                                            <span className={pageStyles.barLabel}>{stars} â˜…</span>\r\n                                            <div className={pageStyles.barTrack}>\r\n                                                <div\r\n                                                    className={pageStyles.barFill}\r\n                                                    style={{ width: `${effectiveTotalReviews > 0 ? ((starCounts[stars] || 0) / effectiveTotalReviews) * 100 : 0}%` }}\r\n                                                />\r\n                                            </div>\r\n                                            <span className={pageStyles.barCount}>{starCounts[stars] || 0}</span>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className={pageStyles.reviewGrid}>\r\n                            {reviews.slice(0, 3).map((review, idx) => (\r\n                                <div key={idx} className={pageStyles.reviewCard}>\r\n                                    <div className={pageStyles.reviewerHeader}>\r\n                                        <div className={pageStyles.avatar}>\r\n                                            {(review.name || 'A').charAt(0)}\r\n                                        </div>\r\n                                        <div className={pageStyles.reviewerInfo}>\r\n                                            <h4>{review.name || 'Anonymous'}</h4>\r\n                                            <span className={pageStyles.reviewDate}>{review.date}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className={pageStyles.stars}>\r\n                                        {[...Array(5)].map((_, i) => (\r\n                                            <Star key={i} size={14} fill={i < review.rating ? \"orange\" : \"#e2e8f0\"} stroke=\"none\" />\r\n                                        ))}\r\n                                    </div>\r\n                                    <p className={pageStyles.reviewText}>\"{review.text}\"</p>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DestinationContent;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\Destinations\\Destinations.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\ErrorBoundary\\ErrorBoundary.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":9,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[244,249],"text":""},"desc":"Remove unused variable 'error'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\nclass ErrorBoundary extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { hasError: false, error: null, errorInfo: null };\r\n    }\r\n\r\n    static getDerivedStateFromError(error) {\r\n        return { hasError: true };\r\n    }\r\n\r\n    componentDidCatch(error, errorInfo) {\r\n        this.setState({ error: error, errorInfo: errorInfo });\r\n        console.error(\"Uncaught error:\", error, errorInfo);\r\n    }\r\n\r\n    render() {\r\n        if (this.state.hasError) {\r\n            return (\r\n                <div style={{ padding: '2rem', fontFamily: 'sans-serif' }}>\r\n                    <h1 style={{ color: '#dc2626' }}>Something went wrong.</h1>\r\n                    <details style={{ whiteSpace: 'pre-wrap', marginTop: '1rem', background: '#f1f5f9', padding: '1rem', borderRadius: '8px' }}>\r\n                        <summary>Click for error details</summary>\r\n                        {this.state.error && this.state.error.toString()}\r\n                        <br />\r\n                        {this.state.errorInfo && this.state.errorInfo.componentStack}\r\n                    </details>\r\n                    <button\r\n                        onClick={() => window.location.reload()}\r\n                        style={{ marginTop: '2rem', padding: '0.5rem 1rem', background: '#2563eb', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\r\n                    >\r\n                        Reload Page\r\n                    </button>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return this.props.children;\r\n    }\r\n}\r\n\r\nexport default ErrorBoundary;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\Features\\Features.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\Footer\\Footer.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\Hero\\Hero.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\Hero\\SearchBar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\Hero\\VisualMap.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\LoadingOverlay\\LoadingOverlay.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[62,69],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  31 |     useEffect(() => {\n  32 |         if (currentPhaseIndex > 0 && currentPhaseIndex < LOADING_PHASES.length) {\n> 33 |             setActivePhase(currentPhaseIndex);\n     |             ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  34 |         }\n  35 |     }, [currentPhaseIndex]);\n  36 |","line":33,"column":13,"nodeType":null,"endLine":33,"endColumn":27}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Compass, Map, Plane, Sun, Palmtree, Sparkles } from 'lucide-react';\r\nimport styles from './LoadingOverlay.module.css';\r\n\r\nconst LOADING_PHASES = [\r\n    { text: \"Analyzing your travel preferences...\", icon: Compass },\r\n    { text: \"Extracting the best destinations...\", icon: Map },\r\n    { text: \"Curating a personalized itinerary...\", icon: Sparkles },\r\n    { text: \"Adding local hidden gems...\", icon: Palmtree },\r\n    { text: \"Calculating optimal routes & budget...\", icon: Sun },\r\n    { text: \"Finalizing your dream trip...\", icon: Plane }\r\n];\r\n\r\nconst LoadingOverlay = ({ isVisible, currentPhaseIndex = 0 }) => {\r\n    const [activePhase, setActivePhase] = useState(0);\r\n\r\n    // Automatically cycle through phases if a specific phase index isn't driven by parent\r\n    useEffect(() => {\r\n        if (!isVisible) return;\r\n\r\n        // If parent is not managing phases, we auto-cycle\r\n        const interval = setInterval(() => {\r\n            setActivePhase((prev) => (prev + 1) % LOADING_PHASES.length);\r\n        }, 3500);\r\n\r\n        return () => clearInterval(interval);\r\n    }, [isVisible]);\r\n\r\n    // Sync with parent overrides\r\n    useEffect(() => {\r\n        if (currentPhaseIndex > 0 && currentPhaseIndex < LOADING_PHASES.length) {\r\n            setActivePhase(currentPhaseIndex);\r\n        }\r\n    }, [currentPhaseIndex]);\r\n\r\n    const CurrentIcon = LOADING_PHASES[activePhase].icon;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isVisible && (\r\n                <motion.div\r\n                    className={styles.overlay}\r\n                    initial={{ opacity: 0 }}\r\n                    animate={{ opacity: 1 }}\r\n                    exit={{ opacity: 0 }}\r\n                    transition={{ duration: 0.5 }}\r\n                >\r\n                    <div className={styles.container}>\r\n\r\n                        {/* Animated Plane & Route */}\r\n                        <div className={styles.animationWrapper}>\r\n                            <motion.div\r\n                                className={styles.planeWrapper}\r\n                                animate={{\r\n                                    y: [0, -15, 0],\r\n                                    x: [-10, 10, -10],\r\n                                    rotate: [-5, 5, -5]\r\n                                }}\r\n                                transition={{\r\n                                    duration: 4,\r\n                                    repeat: Infinity,\r\n                                    ease: \"easeInOut\"\r\n                                }}\r\n                            >\r\n                                <Plane size={64} className={styles.planeIcon} strokeWidth={1.5} />\r\n                            </motion.div>\r\n\r\n                            <svg className={styles.flightPath} viewBox=\"0 0 200 100\">\r\n                                <motion.path\r\n                                    d=\"M 20 80 Q 100 20 180 80\"\r\n                                    fill=\"transparent\"\r\n                                    stroke=\"rgba(255,255,255,0.4)\"\r\n                                    strokeWidth=\"3\"\r\n                                    strokeDasharray=\"8 8\"\r\n                                    initial={{ pathLength: 0 }}\r\n                                    animate={{ pathLength: 1 }}\r\n                                    transition={{ duration: 2, repeat: Infinity, ease: \"linear\" }}\r\n                                />\r\n                            </svg>\r\n                        </div>\r\n\r\n                        <motion.h2\r\n                            className={styles.title}\r\n                            key={activePhase}\r\n                            initial={{ y: 20, opacity: 0 }}\r\n                            animate={{ y: 0, opacity: 1 }}\r\n                            exit={{ y: -20, opacity: 0 }}\r\n                            transition={{ duration: 0.5 }}\r\n                        >\r\n                            Building Your Dream Trip\r\n                        </motion.h2>\r\n\r\n                        <motion.div\r\n                            className={styles.statusBox}\r\n                            key={`status-${activePhase}`}\r\n                            initial={{ scale: 0.9, opacity: 0 }}\r\n                            animate={{ scale: 1, opacity: 1 }}\r\n                            transition={{ duration: 0.4 }}\r\n                        >\r\n                            <CurrentIcon className={styles.statusIcon} size={24} />\r\n                            <p className={styles.statusText}>{LOADING_PHASES[activePhase].text}</p>\r\n                        </motion.div>\r\n\r\n                    </div>\r\n                </motion.div>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n};\r\n\r\nexport default LoadingOverlay;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\Navbar\\Navbar.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'handleNavClick' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":56,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleNavClick"},"fix":{"range":[2115,2388],"text":""},"desc":"Remove unused variable 'handleNavClick'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState } from 'react';\r\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\r\nimport styles from './Navbar.module.css';\r\nimport { Menu, X, Search, User, LogOut } from 'lucide-react';\r\nimport { useAuth } from '../../context/AuthContext.jsx';\r\n\r\nimport logo from '../../assets/logo_corrected.png'; // Import Corrected Logo\r\n\r\nimport { API_BASE_URL } from '../../config';\r\n\r\nconst Navbar = () => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const location = useLocation();\r\n    const { user, logout } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    // Helper to handle navigation:\r\n    // If on Home page ('/'), scroll to ID.\r\n    // If on other pages, go to Home then ID (simple approach: just Link to /#id)\r\n    // Note: Standard anchor tags with /#id work well with React Router for this if HashLink isn't used.\r\n    // However, to ensure smooth scrolling on the same page, we need to handle it.\r\n\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [destinations, setDestinations] = useState([]);\r\n    const [filteredDestinations, setFilteredDestinations] = useState([]);\r\n    const [showSuggestions, setShowSuggestions] = useState(false);\r\n\r\n    // Fetch destinations for search\r\n    React.useEffect(() => {\r\n        fetch(`${API_BASE_URL}/destinations`)\r\n            .then(res => res.json())\r\n            .then(data => setDestinations(data))\r\n            .catch(err => console.error(\"Failed to fetch destinations for search:\", err));\r\n    }, []);\r\n\r\n    const handleSearchChange = (e) => {\r\n        const query = e.target.value;\r\n        setSearchQuery(query);\r\n        if (query.length > 0) {\r\n            const filtered = destinations.filter(dest =>\r\n                dest.name.toLowerCase().includes(query.toLowerCase()) ||\r\n                dest.location.toLowerCase().includes(query.toLowerCase())\r\n            );\r\n            setFilteredDestinations(filtered);\r\n            setShowSuggestions(true);\r\n        } else {\r\n            setShowSuggestions(false);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    const isHome = location.pathname === '/';\r\n\r\n    const handleNavClick = (id) => {\r\n        setIsOpen(false);\r\n        if (isHome && id) {\r\n            const element = document.getElementById(id);\r\n            if (element) {\r\n                element.scrollIntoView({ behavior: 'smooth' });\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <nav className={styles.navbar}>\r\n            <div className={styles.container}>\r\n                {/* Logo */}\r\n                <div className={styles.logo}>\r\n                    <Link to=\"/\" onClick={() => window.scrollTo(0, 0)}>\r\n                        <img src={logo} alt=\"ALTAIRGO INTELLIGENCE\" className={styles.logoImg} />\r\n                    </Link>\r\n                </div>\r\n\r\n                {/* Mobile Toggle */}\r\n                <button className={styles.mobileToggle} onClick={() => setIsOpen(!isOpen)}>\r\n                    {isOpen ? <X size={24} /> : <Menu size={24} />}\r\n                </button>\r\n\r\n                {/* Desktop Links */}\r\n                <div className={`${styles.links} ${isOpen ? styles.active : ''} `}>\r\n                    <Link to={isHome ? \"#home\" : \"/\"} className={styles.link} onClick={() => { setIsOpen(false); window.scrollTo(0, 0); }}>Home</Link>\r\n\r\n                    {/* For sections on Home page, we use standard anchors if on home, or Link to /#id if not. \r\n                        But since we want smooth scrolling via JS on Home, we use span/button style or prevent default.\r\n                        Simplest robust way for mixed nav: Use Link with hash, but React Router v6 needs setup for scroll.\r\n                        We'll stick to simple Links that redirect to \"/\" for now for sections.\r\n                    */}\r\n\r\n                    {/* Removed About Us link as per user request */}\r\n\r\n                    <Link to=\"/destinations\" className={styles.link} onClick={() => setIsOpen(false)}>Destinations</Link>\r\n\r\n                    <Link to=\"/packages\" className={styles.link} onClick={() => setIsOpen(false)}>Packages</Link>\r\n                    <Link to=\"/blogs\" className={styles.link} onClick={() => setIsOpen(false)}>Blogs</Link>\r\n\r\n                    {user ? (\r\n                        <>\r\n\r\n                            <button\r\n                                onClick={() => { logout(); setIsOpen(false); navigate('/'); }}\r\n                                className={`${styles.link} ${styles.mobileBtnOnly}`}\r\n                                style={{ background: 'transparent', border: 'none', color: '#dc2626', textAlign: 'left', paddingLeft: 0, fontSize: '1.5rem' }}\r\n                            >\r\n                                Logout\r\n                            </button>\r\n                        </>\r\n                    ) : (\r\n                        /* Mobile Only: Login Button in Menu */\r\n                        <Link\r\n                            to=\"/login\"\r\n                            className={`${styles.bookBtn} ${styles.mobileBtnOnly}`}\r\n                            onClick={() => setIsOpen(false)}\r\n                            style={{\r\n                                color: 'var(--primary)',\r\n                                background: 'white',\r\n                                border: '2px solid var(--primary)',\r\n                                marginBottom: '-1rem'\r\n                            }}\r\n                        >\r\n                            Login/Register\r\n                        </Link>\r\n                    )}\r\n\r\n                    {/* Mobile Only: Book Button in Menu */}\r\n                    <Link to=\"/booking\" className={`${styles.bookBtn} ${styles.mobileBtnOnly} `} onClick={() => setIsOpen(false)}>Book now</Link>\r\n                </div>\r\n\r\n\r\n\r\n                {/* Search Bar (Desktop) */}\r\n                <div className={styles.searchContainer}>\r\n                    <div className={styles.searchWrapper}>\r\n                        <Search\r\n                            className={styles.searchIcon}\r\n                            size={18}\r\n                        />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search...\"\r\n                            className={styles.searchInput}\r\n                            value={searchQuery}\r\n                            onChange={handleSearchChange}\r\n                            onFocus={() => { if (searchQuery) setShowSuggestions(true); }}\r\n                            onBlur={() => setTimeout(() => setShowSuggestions(false), 200)}\r\n                        />\r\n                    </div>\r\n\r\n                    {showSuggestions && filteredDestinations.length > 0 && (\r\n                        <div className={styles.searchResults}>\r\n                            {filteredDestinations.map(dest => (\r\n                                <Link\r\n                                    to={`/destinations/${dest.id}`}\r\n                                    className={styles.searchResultItem}\r\n                                    key={dest.id}\r\n                                    onClick={() => { setShowSuggestions(false); setSearchQuery(''); }}\r\n                                >\r\n                                    <div className={styles.resultImage}>\r\n                                        <img src={dest.image} alt={dest.name} />\r\n                                    </div>\r\n                                    <div className={styles.resultInfo}>\r\n                                        <span className={styles.resultName}>{dest.name}</span>\r\n                                        <span className={styles.resultLocation}>{dest.location}</span>\r\n                                    </div>\r\n                                </Link>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* CTA (Desktop) */}\r\n                <div className={styles.desktopBtn} style={{ gap: '1rem', alignItems: 'center' }}>\r\n                    {user ? (\r\n                        <Link to=\"/dashboard\" style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', textDecoration: 'none', color: '#334155', fontWeight: '600', background: '#f1f5f9', padding: '0.5rem 1rem', borderRadius: '50px' }}>\r\n                            <User size={18} />\r\n                            {user.name.split(' ')[0]}\r\n                        </Link>\r\n                    ) : (\r\n                        <Link to=\"/login\" style={{ textDecoration: 'none', color: '#334155', fontWeight: '600', fontSize: '0.95rem' }}>\r\n                            Login\r\n                        </Link>\r\n                    )}\r\n                    <Link to=\"/booking\" className={styles.bookBtn}>Book now</Link>\r\n                </div>\r\n            </div>\r\n        </nav>\r\n    );\r\n};\r\n\r\nexport default Navbar;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\Packages\\PackageContent.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\Packages\\Packages.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\Skeleton\\Skeleton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\TripPlanner\\AIDestinationDetailsModal.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":9,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[496,501],"text":""},"desc":"Remove unused variable 'error'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchDetails'. Either include it or remove the dependency array.","line":18,"column":8,"nodeType":"ArrayExpression","endLine":18,"endColumn":29,"suggestions":[{"desc":"Update the dependencies array to be: [isOpen, destination, fetchDetails]","fix":{"range":[720,741],"text":"[isOpen, destination, fetchDetails]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":31,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":21},{"ruleId":"no-unused-vars","severity":2,"message":"'i' is defined but never used.","line":88,"column":131,"nodeType":"Identifier","messageId":"unusedVar","endLine":88,"endColumn":132,"suggestions":[{"messageId":"removeVar","data":{"varName":"i"},"fix":{"range":[4386,4389],"text":""},"desc":"Remove unused variable 'i'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { X, Sparkles, MapPin, Star, Calendar, DollarSign, Camera, Info, Check, ArrowRight, Train, Plane } from 'lucide-react';\r\nimport { TripAI } from '../../services/TripAI';\r\nimport styles from './AIDestinationDetailsModal.module.css';\r\n\r\nconst AIDestinationDetailsModal = ({ isOpen, onClose, destination, onAddToTrip }) => {\r\n    const [details, setDetails] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (isOpen && destination) {\r\n            fetchDetails();\r\n        } else {\r\n            setDetails(null);\r\n            setError(null);\r\n        }\r\n    }, [isOpen, destination]);\r\n\r\n    const fetchDetails = async () => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            // Fetch updated details which now include attractions, tips etc.\r\n            const data = await TripAI.getDestinationDetails(destination.name);\r\n            if (data && !data.error) {\r\n                setDetails(data);\r\n            } else {\r\n                setError(\"Could not fetch full details.\");\r\n            }\r\n        } catch (err) {\r\n            setError(\"Connection failed.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (!isOpen || !destination) return null;\r\n\r\n    // Use fetched details or fallback to basic props\r\n    const displayImage = details?.image || destination.image;\r\n    const displayName = destination.name;\r\n    const location = destination.location || (details?.country ? `${details.country}` : '');\r\n\r\n    return (\r\n        <div className={styles.overlay}>\r\n            <div className={styles.modal}>\r\n                {/* Close Button */}\r\n                <button className={styles.closeBtn} onClick={onClose}>\r\n                    <X size={20} />\r\n                </button>\r\n\r\n                {/* Hero Section */}\r\n                <div className={styles.hero}>\r\n                    <img src={displayImage} alt={displayName} className={styles.heroImage} />\r\n                    <div className={styles.heroContent}>\r\n                        <h2 className={styles.title}>{displayName}</h2>\r\n                        <div className={styles.subtitle}><MapPin size={16} style={{ display: 'inline', marginRight: '4px' }} /> {location}</div>\r\n                    </div>\r\n                </div>\r\n\r\n                {loading ? (\r\n                    <div className={styles.content} style={{ display: 'flex', justifyContent: 'center', padding: '4rem' }}>\r\n                        <div style={{ textAlign: 'center', color: '#64748b' }}>\r\n                            <Sparkles className=\"animate-spin\" size={32} style={{ color: '#3b82f6', marginBottom: '1rem', animation: 'spin 2s linear infinite' }} />\r\n                            <p>Curating insider tips...</p>\r\n                        </div>\r\n                    </div>\r\n                ) : (\r\n                    <>\r\n                        <div className={styles.content}>\r\n                            {/* Main Column */}\r\n                            <div>\r\n                                {/* About */}\r\n                                <div className={styles.section}>\r\n                                    <div className={styles.sectionTitle}><Info size={18} /> About</div>\r\n                                    <p className={styles.description}>\r\n                                        {details?.description || destination.description || `Experience the magic of ${displayName}. A perfect destination for travelers seeking culture, adventure, and relaxation.`}\r\n                                    </p>\r\n                                </div>\r\n\r\n                                {/* Top Attractions */}\r\n                                <div className={styles.section}>\r\n                                    <div className={styles.sectionTitle}><Camera size={18} /> Top Attractions</div>\r\n                                    <div className={styles.attractionsList}>\r\n                                        {/* Fallback attractions logic if array is empty */}\r\n                                        {(details?.attractions && details.attractions.length > 0 ? details.attractions :\r\n                                            ['Main City Center', 'Historic Old Town', 'Scenic Viewpoint', 'Local Market'].map((n, i) => ({ name: n, type: 'Sightseeing' }))\r\n                                        ).slice(0, 4).map((att, idx) => (\r\n                                            <div key={idx} className={styles.attractionItem}>\r\n                                                <div className={styles.attractionImage}></div> {/* Placeholder for attraction image */}\r\n                                                <div>\r\n                                                    <div style={{ fontWeight: '600', color: '#334155' }}>{att.name}</div>\r\n                                                    <div style={{ fontSize: '0.85rem', color: '#64748b' }}>{att.type || 'Sightseeing'} â€¢ â­ 4.something</div>\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                                        <div style={{ fontSize: '0.9rem', color: '#3b82f6', fontWeight: '600', cursor: 'pointer', marginTop: '0.5rem' }}>\r\n                                            See all attractions â†’\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Must Try Food */}\r\n                                {details?.food && (\r\n                                    <div className={styles.section}>\r\n                                        <div className={styles.sectionTitle}><span style={{ fontSize: '1.2rem' }}>ðŸ½ï¸</span> Must-Try Food</div>\r\n                                        <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap' }}>\r\n                                            {details.food.map((f, i) => (\r\n                                                <span key={i} style={{ background: '#fff7ed', color: '#c2410c', padding: '4px 12px', borderRadius: '16px', fontSize: '0.9rem' }}>\r\n                                                    {f}\r\n                                                </span>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Sidebar Column */}\r\n                            <div>\r\n                                {/* Quick Stats box */}\r\n                                <div className={styles.section} style={{ background: '#f8fafc', padding: '1.5rem', borderRadius: '16px', border: '1px solid #e2e8f0' }}>\r\n                                    <h4 style={{ marginTop: 0, marginBottom: '1rem', color: '#0f172a' }}>âš¡ Quick Stats</h4>\r\n\r\n                                    <div style={{ marginBottom: '1rem' }}>\r\n                                        <div className={styles.statLabel}>Cost per Day</div>\r\n                                        <div className={styles.statValue}>â‚¹{destination.estimatedCostPerDay || '3,000'}</div>\r\n                                    </div>\r\n                                    <div style={{ marginBottom: '1rem' }}>\r\n                                        <div className={styles.statLabel}>Ideal Duration</div>\r\n                                        <div className={styles.statValue}>3-4 Days</div>\r\n                                    </div>\r\n                                    <div>\r\n                                        <div className={styles.statLabel}>Best Time</div>\r\n                                        <div className={styles.statValue}>{destination.bestTime || 'Oct - Mar'}</div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Insider Tips */}\r\n                                <div className={styles.section}>\r\n                                    <div className={styles.sectionTitle}><Sparkles size={18} color=\"#eab308\" /> Insider Tips</div>\r\n                                    <div>\r\n                                        {(details?.hidden_gems || ['Visit early morning to avoid crowds', 'Book tickets online to save time']).slice(0, 3).map((tip, i) => (\r\n                                            <div key={i} className={styles.tipItem}>\r\n                                                <Check size={16} color=\"#16a34a\" style={{ flexShrink: 0, marginTop: '3px' }} />\r\n                                                <span>{tip}</span>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Getting There */}\r\n                                <div className={styles.section}>\r\n                                    <div className={styles.sectionTitle}><Train size={18} /> Getting There</div>\r\n                                    <div style={{ fontSize: '0.9rem', color: '#475569', display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n                                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                                            <Plane size={14} /> Nearest Airport: {details?.nearest_airport || 'Local Airport (20km)'}\r\n                                        </div>\r\n                                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                                            <Train size={14} /> Train: Main Junction\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Footer Actions */}\r\n                        <div className={styles.actions}>\r\n                            <button className={styles.secondaryBtn} onClick={onClose}>Close</button>\r\n                            <button\r\n                                className={styles.primaryBtn}\r\n                                onClick={() => {\r\n                                    if (onAddToTrip) onAddToTrip(destination);\r\n                                    onClose();\r\n                                }}\r\n                            >\r\n                                <Check size={18} style={{ display: 'inline', marginRight: '6px' }} /> Add to My Trip\r\n                            </button>\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AIDestinationDetailsModal;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\TripPlanner\\ActivitySwapModal.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchAlternatives'. Either include it or remove the dependency array.","line":25,"column":8,"nodeType":"ArrayExpression","endLine":25,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [fetchAlternatives, isOpen, originalActivity]","fix":{"range":[892,918],"text":"[fetchAlternatives, isOpen, originalActivity]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { X, Check } from 'lucide-react';\r\nimport { API_BASE_URL } from '../../config';\r\n\r\n// Simple modal styles inline for MVP speed\r\nconst modalOverlayStyle = {\r\n    position: 'fixed', top: 0, left: 0, right: 0, bottom: 0,\r\n    background: 'rgba(0,0,0,0.5)', zIndex: 1000,\r\n    display: 'flex', alignItems: 'center', justifyContent: 'center'\r\n};\r\n\r\nconst modalContentStyle = {\r\n    background: 'white', padding: '1.5rem', borderRadius: '16px',\r\n    width: '90%', maxWidth: '500px', maxHeight: '80vh', overflowY: 'auto'\r\n};\r\n\r\nconst ActivitySwapModal = ({ isOpen, onClose, originalActivity, onSwap }) => {\r\n    const [alternatives, setAlternatives] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (isOpen && originalActivity) {\r\n            fetchAlternatives();\r\n        }\r\n    }, [isOpen, originalActivity]);\r\n\r\n    const fetchAlternatives = async () => {\r\n        setLoading(true);\r\n        try {\r\n            // Check if we have a real DB-backed activity or a generic text one\r\n            // We'll try to extract location/type from the text or passed props\r\n            const payload = {\r\n                location: originalActivity.location || \"Jaipur\", // Fallback for prototype\r\n                type: \"Historic\" // Fallback\r\n            };\r\n\r\n            const res = await fetch(`${API_BASE_URL}/api/activities/alternatives`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(payload)\r\n            });\r\n            const data = await res.json();\r\n            setAlternatives(data);\r\n        } catch (e) {\r\n            console.error(\"Failed to swap\", e);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div style={modalOverlayStyle}>\r\n            <div style={modalContentStyle}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '1rem' }}>\r\n                    <h3 style={{ margin: 0 }}>Swap Activity</h3>\r\n                    <button onClick={onClose} style={{ background: 'none', border: 'none', cursor: 'pointer' }}>\r\n                        <X size={24} />\r\n                    </button>\r\n                </div>\r\n\r\n                <div style={{ marginBottom: '1rem', padding: '0.75rem', background: '#ffe4e6', borderRadius: '8px', border: '1px solid #fecdd3' }}>\r\n                    <div style={{ fontSize: '0.8rem', color: '#be123c', fontWeight: '600' }}>REPLACING</div>\r\n                    <div style={{ fontWeight: '600' }}>{originalActivity?.activity || originalActivity?.name}</div>\r\n                </div>\r\n\r\n                <h4 style={{ margin: '1rem 0 0.5rem', fontSize: '0.9rem', color: '#64748b' }}>AVAILABLE ALTERNATIVES</h4>\r\n\r\n                {loading ? (\r\n                    <div>Loading alternatives...</div>\r\n                ) : (\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem' }}>\r\n                        {alternatives.map(alt => (\r\n                            <div key={alt.id} style={{ display: 'flex', gap: '1rem', border: '1px solid #e2e8f0', padding: '0.75rem', borderRadius: '8px' }}>\r\n                                <div style={{ width: '60px', height: '60px', background: '#f1f5f9', borderRadius: '4px', overflow: 'hidden' }}>\r\n                                    {alt.image && <img src={alt.image} alt={alt.name} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />}\r\n                                </div>\r\n                                <div style={{ flex: 1 }}>\r\n                                    <div style={{ fontWeight: '600' }}>{alt.name}</div>\r\n                                    <div style={{ fontSize: '0.8rem', color: '#64748b' }}>{alt.duration} â€¢ â‚¹{alt.entry_cost}</div>\r\n                                    <div style={{ fontSize: '0.8rem', marginTop: '4px' }}>{alt.description?.substring(0, 60)}...</div>\r\n                                </div>\r\n                                <button\r\n                                    onClick={() => onSwap(alt)}\r\n                                    style={{ background: '#f0fdf4', color: '#16a34a', border: '1px solid #bbf7d0', borderRadius: '8px', padding: '0 1rem', cursor: 'pointer', fontWeight: '600' }}\r\n                                >\r\n                                    Swap\r\n                                </button>\r\n                            </div>\r\n                        ))}\r\n                        {alternatives.length === 0 && <div>No alternatives found.</div>}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ActivitySwapModal;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\TripPlanner\\BookingSection.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'styles' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":3,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"styles"},"fix":{"range":[118,130],"text":""},"desc":"Remove unused variable 'styles'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'travelDate' is defined but never used.","line":5,"column":56,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":66,"suggestions":[{"messageId":"removeVar","data":{"varName":"travelDate"},"fix":{"range":[260,272],"text":""},"desc":"Remove unused variable 'travelDate'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Plane, Building, Ticket, ArrowRight, ExternalLink } from 'lucide-react';\r\nimport styles from './AIDestinationDetailsModal.module.css'; // Reusing glassmorphism styles\r\n\r\nconst BookingSection = ({ startLocation, destinations, travelDate }) => {\r\n    // Helper to generate search links using our backend Affiliate Tracker\r\n    const getFlightLink = (dest) => {\r\n        return `/api/book/flight?destination=${encodeURIComponent(dest)}&partner=makemytrip`;\r\n    };\r\n\r\n    const getHotelLink = (city) => {\r\n        return `/api/book/hotel?destination=${encodeURIComponent(city)}&partner=booking`;\r\n    };\r\n\r\n    const firstDest = destinations && destinations.length > 0 ? destinations[0].name : 'Destination';\r\n\r\n    return (\r\n        <div style={{ marginTop: '4rem', padding: '2rem', background: 'white', borderRadius: '24px', boxShadow: '0 10px 40px -10px rgba(0,0,0,0.05)' }}>\r\n            <h2 style={{ fontSize: '1.8rem', marginBottom: '0.5rem', color: '#1e293b' }}>Ready to Book? âœˆï¸</h2>\r\n            <p style={{ color: '#64748b', marginBottom: '2rem' }}>Secure your flights and stays to lock in the best rates.</p>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '1.5rem' }}>\r\n\r\n                {/* Flights Card */}\r\n                <div style={{\r\n                    background: 'linear-gradient(135deg, #eff6ff 0%, #ffffff 100%)',\r\n                    padding: '1.5rem', borderRadius: '20px', border: '1px solid #dbeafe',\r\n                    display: 'flex', flexDirection: 'column', gap: '1rem'\r\n                }}>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start' }}>\r\n                        <div style={{ background: '#bfdbfe', padding: '10px', borderRadius: '12px' }}>\r\n                            <Plane size={24} color=\"#1d4ed8\" />\r\n                        </div>\r\n                        <span style={{ background: '#dbeafe', color: '#1e40af', padding: '4px 12px', borderRadius: '20px', fontSize: '0.8rem', fontWeight: '600' }}>\r\n                            From â‚¹3,500\r\n                        </span>\r\n                    </div>\r\n                    <div>\r\n                        <h3 style={{ margin: '0 0 0.25rem', fontSize: '1.2rem', color: '#1e3a8a' }}>Book Flights</h3>\r\n                        <div style={{ color: '#64748b', fontSize: '0.9rem' }}>\r\n                            {startLocation || 'Your City'} <ArrowRight size={14} style={{ display: 'inline' }} /> {firstDest}\r\n                        </div>\r\n                    </div>\r\n                    <a\r\n                        href={getFlightLink(firstDest)}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        style={{\r\n                            marginTop: 'auto', textAlign: 'center', background: '#2563eb', color: 'white',\r\n                            padding: '0.75rem', borderRadius: '12px', fontWeight: '600', textDecoration: 'none',\r\n                            display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '8px',\r\n                            boxShadow: '0 4px 12px rgba(37,99,235,0.2)'\r\n                        }}\r\n                    >\r\n                        Search on MakeMyTrip <ExternalLink size={16} />\r\n                    </a>\r\n                </div>\r\n\r\n                {/* Hotels Card */}\r\n                <div style={{\r\n                    background: 'linear-gradient(135deg, #f0fdf4 0%, #ffffff 100%)',\r\n                    padding: '1.5rem', borderRadius: '20px', border: '1px solid #dcfce7',\r\n                    display: 'flex', flexDirection: 'column', gap: '1rem'\r\n                }}>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start' }}>\r\n                        <div style={{ background: '#bbf7d0', padding: '10px', borderRadius: '12px' }}>\r\n                            <Building size={24} color=\"#15803d\" />\r\n                        </div>\r\n                        <span style={{ background: '#dcfce7', color: '#166534', padding: '4px 12px', borderRadius: '20px', fontSize: '0.8rem', fontWeight: '600' }}>\r\n                            Best Rated\r\n                        </span>\r\n                    </div>\r\n                    <div>\r\n                        <h3 style={{ margin: '0 0 0.25rem', fontSize: '1.2rem', color: '#14532d' }}>Book Stays</h3>\r\n                        <div style={{ color: '#64748b', fontSize: '0.9rem' }}>\r\n                            Top rated hotels in {destinations?.length > 1 ? 'your destinations' : firstDest}\r\n                        </div>\r\n                    </div>\r\n                    <div style={{ marginTop: 'auto', display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n                        {destinations?.slice(0, 2).map((dest, i) => (\r\n                            <a\r\n                                key={i}\r\n                                href={getHotelLink(dest.name)}\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                style={{\r\n                                    display: 'flex', alignItems: 'center', justifyContent: 'space-between',\r\n                                    padding: '0.6rem 1rem', background: 'white', borderRadius: '10px',\r\n                                    border: '1px solid #e2e8f0', color: '#334155', textDecoration: 'none', fontSize: '0.9rem'\r\n                                }}\r\n                            >\r\n                                Stay in {dest.name} <ExternalLink size={14} color=\"#94a3b8\" />\r\n                            </a>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Activities Card */}\r\n                <div style={{\r\n                    background: 'linear-gradient(135deg, #fff7ed 0%, #ffffff 100%)',\r\n                    padding: '1.5rem', borderRadius: '20px', border: '1px solid #ffedd5',\r\n                    display: 'flex', flexDirection: 'column', gap: '1rem'\r\n                }}>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start' }}>\r\n                        <div style={{ background: '#fed7aa', padding: '10px', borderRadius: '12px' }}>\r\n                            <Ticket size={24} color=\"#c2410c\" />\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <h3 style={{ margin: '0 0 0.25rem', fontSize: '1.2rem', color: '#7c2d12' }}>Experience It</h3>\r\n                        <div style={{ color: '#64748b', fontSize: '0.9rem' }}>\r\n                            Skip the line tickets & tours\r\n                        </div>\r\n                    </div>\r\n                    <div style={{ marginTop: 'auto', display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n                        <div style={{ padding: '0.6rem 1rem', background: 'white', border: '1px solid #e2e8f0', borderRadius: '10px', color: '#334155', fontSize: '0.9rem', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                            Local City Tours <span style={{ color: '#f97316', fontWeight: 'bold' }}>Book</span>\r\n                        </div>\r\n                        <div style={{ padding: '0.6rem 1rem', background: 'white', border: '1px solid #e2e8f0', borderRadius: '10px', color: '#334155', fontSize: '0.9rem', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                            Monument Entry <span style={{ color: '#f97316', fontWeight: 'bold' }}>Book</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BookingSection;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\TripPlanner\\BudgetSelectionModal.jsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":8,"column":33,"nodeType":"Identifier","endLine":8,"endColumn":41},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":9,"column":31,"nodeType":"Identifier","endLine":9,"endColumn":39}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { X, DollarSign, Clock, Compass, Check, ArrowRight } from 'lucide-react';\r\nimport styles from './BudgetSelectionModal.module.css';\r\n\r\nconst BudgetSelectionModal = ({ isOpen, onClose, onApply }) => {\r\n    if (!isOpen) return null;\r\n\r\n    const [budget, setBudget] = useState(50000);\r\n    const [style, setStyle] = useState('Standard'); // Budget, Standard, Luxury\r\n\r\n    const TRAVEL_STYLES = [\r\n        { id: 'Budget', label: 'Budget-Friendly', desc: 'Hostels, street food, public transit', icon: 'ðŸŽ’' },\r\n        { id: 'Standard', label: 'Balanced Comfort', desc: 'Good hotels, mix of dining & fun', icon: 'âš–ï¸' },\r\n        { id: 'Luxury', label: 'Premium Experience', desc: 'Top resorts, fine dining, private transfers', icon: 'ðŸ’Ž' }\r\n    ];\r\n\r\n    const handleSubmit = () => {\r\n        onApply({ budget, style });\r\n        onClose();\r\n    };\r\n\r\n    // Format currency for display\r\n    const formatCurrency = (val) => {\r\n        return new Intl.NumberFormat('en-IN', {\r\n            style: 'currency',\r\n            currency: 'INR',\r\n            maximumFractionDigits: 0\r\n        }).format(val);\r\n    };\r\n\r\n    return (\r\n        <div className={styles.overlay}>\r\n            <div className={styles.modal}>\r\n                <button className={styles.closeBtn} onClick={onClose}>\r\n                    <X size={20} />\r\n                </button>\r\n\r\n                <h2 className={styles.modalTitle}>Trip Preferences</h2>\r\n                <p className={styles.modalSubtitle}>\r\n                    Customize your experience to get the best AI recommendations.\r\n                </p>\r\n\r\n                {/* Budget Section */}\r\n                <div className={styles.section}>\r\n                    <div className={styles.sectionLabel}>\r\n                        <DollarSign size={16} strokeWidth={2.5} /> Total Budget\r\n                    </div>\r\n                    <div className={styles.inputGroup}>\r\n                        <span style={{ color: '#64748b', fontWeight: 'bold' }}>â‚¹</span>\r\n                        <input\r\n                            type=\"number\"\r\n                            min=\"5000\" step=\"1000\"\r\n                            value={budget}\r\n                            onChange={(e) => setBudget(Number(e.target.value))}\r\n                            className={styles.numInput}\r\n                        />\r\n                        <span style={{ color: '#94a3b8', fontSize: '0.9rem', whiteSpace: 'nowrap' }}>\r\n                            (Approx. {formatCurrency(budget)})\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Travel Style Section */}\r\n                <div className={styles.section}>\r\n                    <div className={styles.sectionLabel}>\r\n                        <Compass size={16} strokeWidth={2.5} /> Travel Style\r\n                    </div>\r\n                    <div className={styles.styleGrid}>\r\n                        {TRAVEL_STYLES.map(s => (\r\n                            <div\r\n                                key={s.id}\r\n                                className={`${styles.styleCard} ${style === s.id ? styles.selected : ''}`}\r\n                                onClick={() => setStyle(s.id)}\r\n                            >\r\n                                <span className={styles.styleIcon}>{s.icon}</span>\r\n                                <span className={styles.styleLabel}>{s.label}</span>\r\n                                <span className={styles.styleDesc}>{s.desc}</span>\r\n                                {style === s.id && (\r\n                                    <div style={{ position: 'absolute', top: '8px', right: '8px', color: '#3b82f6' }}>\r\n                                        <Check size={16} strokeWidth={3} />\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className={styles.actions}>\r\n                    <button className={styles.applyBtn} onClick={handleSubmit}>\r\n                        Save Preferences <ArrowRight size={18} />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BudgetSelectionModal;\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\TripPlanner\\DateSelectionModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\TripPlanner\\DestinationCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\TripPlanner\\ItineraryTimeline.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  40 |                 });\n  41 |             });\n> 42 |             setItems(flatItems);\n     |             ^^^^^^^^ Avoid calling setState() directly within an effect\n  43 |         } else {\n  44 |             // Already flat or simple structure\n  45 |             const enrichedItems = itinerary.map((item, idx) => ({","line":42,"column":13,"nodeType":null,"endLine":42,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useMemo } from 'react';\r\nimport styles from './ItineraryTimeline.module.css';\r\nimport {\r\n    DndContext,\r\n    closestCorners,\r\n    KeyboardSensor,\r\n    PointerSensor,\r\n    useSensor,\r\n    useSensors,\r\n    DragOverlay\r\n} from '@dnd-kit/core';\r\nimport {\r\n    arrayMove,\r\n    sortableKeyboardCoordinates\r\n} from '@dnd-kit/sortable';\r\nimport SortableDayColumn from './SortableDayColumn';\r\nimport SortableActivityItem from './SortableActivityItem';\r\nimport ActivitySwapModal from './ActivitySwapModal';\r\n\r\nconst ItineraryTimeline = ({ itinerary, onItineraryChange }) => {\r\n    // 1. Add unique IDs to itinerary items if they don't have them\r\n    // This is crucial for DnD to track items accurately\r\n    const [items, setItems] = useState([]);\r\n    const [activeId, setActiveId] = useState(null);\r\n\r\n    useEffect(() => {\r\n        // Flatten detailed_activities into sortable items if not already flat\r\n        const flatItems = [];\r\n        if (itinerary.length > 0 && itinerary[0].detailed_activities) {\r\n            itinerary.forEach((dayItem, dayIdx) => {\r\n                dayItem.detailed_activities.forEach((act, actIdx) => {\r\n                    flatItems.push({\r\n                        ...act,\r\n                        day: dayItem.day,\r\n                        location: dayItem.location,\r\n                        destId: dayItem.destId || dayItem.id, // Preserve ID\r\n                        image: act.image || dayItem.image, // Use activity image or day image\r\n                        _id: act._id || `act-${dayItem.day}-${dayIdx}-${actIdx}-${Date.now()}`\r\n                    });\r\n                });\r\n            });\r\n            setItems(flatItems);\r\n        } else {\r\n            // Already flat or simple structure\r\n            const enrichedItems = itinerary.map((item, idx) => ({\r\n                ...item,\r\n                _id: item._id || `item-${Date.now()}-${idx}`\r\n            }));\r\n            setItems(enrichedItems);\r\n        }\r\n    }, [itinerary]);\r\n\r\n    const sensors = useSensors(\r\n        useSensor(PointerSensor, {\r\n            activationConstraint: {\r\n                distance: 8, // Require 8px movement before drag starts (prevents accidental clicks)\r\n            },\r\n        }),\r\n        useSensor(KeyboardSensor, {\r\n            coordinateGetter: sortableKeyboardCoordinates,\r\n        })\r\n    );\r\n\r\n    // Group items by day for rendering columns\r\n    // We assume 'items' is the source of truth\r\n    const days = useMemo(() => {\r\n        const uniqueDays = [...new Set(items.map(i => i.day))].sort((a, b) => a - b);\r\n        return uniqueDays;\r\n    }, [items]);\r\n\r\n    const getItemsForDay = (day) => items.filter(i => i.day === day);\r\n\r\n    const handleDragStart = (event) => {\r\n        setActiveId(event.active.id);\r\n    };\r\n\r\n    const handleDragEnd = (event) => {\r\n        const { active, over } = event;\r\n        setActiveId(null);\r\n\r\n        if (!over) return;\r\n\r\n        const activeItem = items.find(i => i._id === active.id);\r\n        const overItem = items.find(i => i._id === over.id);\r\n\r\n        if (!activeItem) return;\r\n\r\n        // Clone items to mutate\r\n        let newItems = [...items];\r\n\r\n        // Scenario 1: Dropped over a specific item\r\n        if (overItem) {\r\n            const activeIndex = newItems.findIndex(i => i._id === active.id);\r\n            const overIndex = newItems.findIndex(i => i._id === over.id);\r\n\r\n            // If moving to a different day, update the day field\r\n            if (activeItem.day !== overItem.day) {\r\n                activeItem.day = overItem.day;\r\n                newItems[activeIndex] = { ...activeItem, day: overItem.day };\r\n            }\r\n\r\n            // Move the item in the array to the new position\r\n            newItems = arrayMove(newItems, activeIndex, overIndex);\r\n        }\r\n        // Scenario 2: Dropped over a Day Column (container) but empty area\r\n        else if (over.id.startsWith('day-column-')) {\r\n            const targetDay = parseInt(over.id.replace('day-column-', ''));\r\n            const activeIndex = newItems.findIndex(i => i._id === active.id);\r\n\r\n            // Just move it to that day, append to end implies generic day assignment\r\n            if (activeItem.day !== targetDay) {\r\n                newItems[activeIndex] = { ...activeItem, day: targetDay };\r\n                // We don't need arrayMove effectively if we just change day, \r\n                // it will render in that group. \r\n                // However, to be precise, let's move it to end of that day's list or just update day.\r\n            }\r\n        }\r\n\r\n        setItems(newItems);\r\n        if (onItineraryChange) {\r\n            onItineraryChange(newItems);\r\n        }\r\n    };\r\n\r\n    const [swapModalOpen, setSwapModalOpen] = useState(false);\r\n    const [activityToSwap, setActivityToSwap] = useState(null);\r\n\r\n    const handleSwapTrigger = (activity) => {\r\n        setActivityToSwap(activity);\r\n        setSwapModalOpen(true);\r\n    };\r\n\r\n    const handleSwapConfirm = (newActivity) => {\r\n        if (!activityToSwap) return;\r\n\r\n        // Create new item structure keeping context but changing details\r\n        const updatedItem = {\r\n            ...activityToSwap,\r\n            activity: newActivity.name,\r\n            description: newActivity.description || newActivity.desc,\r\n            cost: newActivity.entry_cost || 0,\r\n            type: newActivity.type,\r\n            image: newActivity.image\r\n            // Keep day and time same\r\n        };\r\n\r\n        // Find and replace in items\r\n        const newItems = items.map(i => i._id === activityToSwap._id ? updatedItem : i);\r\n\r\n        setItems(newItems);\r\n        if (onItineraryChange) onItineraryChange(newItems);\r\n\r\n        setSwapModalOpen(false);\r\n        setActivityToSwap(null);\r\n    };\r\n\r\n    const activeItemData = activeId ? items.find(i => i._id === activeId) : null;\r\n\r\n    return (\r\n        <div className={styles.timelineContainer}>\r\n            <DndContext\r\n                sensors={sensors}\r\n                collisionDetection={closestCorners}\r\n                onDragStart={handleDragStart}\r\n                onDragEnd={handleDragEnd}\r\n            >\r\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '2rem' }}>\r\n                    {days.map(day => (\r\n                        <SortableDayColumn\r\n                            key={day}\r\n                            day={day}\r\n                            dayIndex={day} // Passing day number as index for simplicity\r\n                            activities={getItemsForDay(day)}\r\n                            id={`day-column-${day}`}\r\n                            onTriggerSwap={handleSwapTrigger}\r\n                        />\r\n                    ))}\r\n                </div>\r\n\r\n                <DragOverlay>\r\n                    {activeItemData ? (\r\n                        <div style={{ transform: 'none' }}> {/* Reset transform for overlay */}\r\n                            <div className={styles.activityItem} style={{ background: 'white', boxShadow: '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)', border: '1px solid #3b82f6', cursor: 'grabbing' }}>\r\n                                <strong>{activeItemData.activity || activeItemData.activities}</strong>\r\n                            </div>\r\n                        </div>\r\n                    ) : null}\r\n                </DragOverlay>\r\n            </DndContext>\r\n\r\n            <ActivitySwapModal\r\n                isOpen={swapModalOpen}\r\n                onClose={() => setSwapModalOpen(false)}\r\n                originalActivity={activityToSwap}\r\n                onSwap={handleSwapConfirm}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ItineraryTimeline;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\TripPlanner\\ModernItineraryView.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'insight' is defined but never used.","line":27,"column":56,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":63,"suggestions":[{"messageId":"removeVar","data":{"varName":"insight"},"fix":{"range":[1161,1170],"text":""},"desc":"Remove unused variable 'insight'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo } from 'react';\r\nimport styles from './ModernItineraryView.module.css';\r\nimport TripMap from './TripMap';\r\nimport {\r\n    Calendar, MapPin, Search, Sparkles, Navigation, Droplets,\r\n    Mountain, Palmtree, Utensils, ArrowRight,\r\n    CheckCircle2\r\n} from 'lucide-react';\r\n\r\nconst getIntensityColor = (val) => {\r\n    if (val <= 3) return '#10b981'; // Green\r\n    if (val <= 6) return '#f59e0b'; // Yellow\r\n    if (val <= 8) return '#f97316'; // Orange\r\n    return '#ef4444'; // Red\r\n};\r\n\r\nconst getIconForType = (type, name) => {\r\n    const lName = (name || '').toLowerCase();\r\n    const lType = (type || '').toLowerCase();\r\n    if (lName.includes('lake') || lName.includes('water') || lName.includes('falls')) return <Droplets size={18} />;\r\n    if (lName.includes('trek') || lName.includes('mountain') || lName.includes('hill')) return <Mountain size={18} />;\r\n    if (lName.includes('beach') || lName.includes('island')) return <Palmtree size={18} />;\r\n    if (lType.includes('food') || lName.includes('dinner')) return <Utensils size={18} />;\r\n    return <MapPin size={18} />;\r\n};\r\n\r\nconst ModernItineraryView = ({ itinerary, tripContext, insight }) => {\r\n    // Process itinerary into days\r\n    const days = useMemo(() => {\r\n        if (!itinerary || itinerary.length === 0) return [];\r\n\r\n        // Handle backend ItineraryDay object array\r\n        const isStructured = itinerary[0] && Array.isArray(itinerary[0].activities);\r\n\r\n        if (isStructured) {\r\n            return itinerary.map(item => {\r\n                const acts = item.activities || [];\r\n                const locations = [...new Set(acts.map(a => a.location || item.location).filter(Boolean))];\r\n                const primaryLocation = item.base_location || item.location || (locations.length > 0 ? locations[0] : 'City');\r\n\r\n                return {\r\n                    day: item.day,\r\n                    activities: acts,\r\n                    primaryLocation: primaryLocation,\r\n                    allLocations: locations,\r\n                    intensity: item.intensity_score || 5,\r\n                    travelHours: item.travel_hours || '2 hrs',\r\n                    risk: item.risk || 'Low',\r\n                    weatherSensitivity: item.weather_sensitivity || 'Low',\r\n                    purpose: item.purpose || '',\r\n                    stayLogic: item.stay_logic || '',\r\n                    routeStr: locations.length > 0 ? locations.join(' â†’ ') : primaryLocation\r\n                };\r\n            });\r\n        }\r\n\r\n        // Fallback for old unstructured flat list arrays\r\n        const dMap = {};\r\n        itinerary.forEach(item => {\r\n            if (!dMap[item.day]) dMap[item.day] = [];\r\n            dMap[item.day].push(item);\r\n        });\r\n\r\n        return Object.keys(dMap).sort((a, b) => Number(a) - Number(b)).map(day => {\r\n            const acts = dMap[day];\r\n            const locations = [...new Set(acts.map(a => a.location).filter(Boolean))];\r\n            return {\r\n                day: Number(day),\r\n                activities: acts,\r\n                primaryLocation: locations[0] || 'City',\r\n                allLocations: locations,\r\n                intensity: 5,\r\n                travelHours: '3 hrs',\r\n                risk: 'Low',\r\n                purpose: '',\r\n                weatherSensitivity: 'Medium',\r\n                stayLogic: '',\r\n                routeStr: locations.length > 0 ? locations.join(' â†’ ') : 'City'\r\n            };\r\n        });\r\n    }, [itinerary]);\r\n\r\n    // Derived Trip Info\r\n    const tripTitle = tripContext?.title || `Trip to ${itinerary[0]?.location || 'Unknown'}`;\r\n    // Try to get a nice image for the hero\r\n    const heroImage = itinerary.find(i => i.image)?.image || 'https://images.unsplash.com/photo-1469854523086-cc02fe5d8800';\r\n    const totalDays = days.length;\r\n\r\n    if (days.length === 0) return null;\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            {/* HER SECTION */}\r\n            <div className={styles.heroSection}>\r\n                <img src={heroImage} alt=\"Trip Background\" className={styles.heroImage} />\r\n                <div className={styles.heroOverlay}>\r\n                    <div className={styles.aiBadge}>âœ¨ AI GENERATED</div>\r\n                    <div className={styles.heroMeta}>\r\n                        <Calendar size={14} /> {totalDays} Days\r\n                    </div>\r\n                    <h1 className={styles.heroTitle}>\r\n                        {tripTitle}\r\n                    </h1>\r\n                </div>\r\n\r\n                <div className={styles.budgetBox}>\r\n                    <div className={styles.budgetHeader}>\r\n                        <span>Smart Budget Summary</span>\r\n                        <span className={styles.budgetValue}>â‚¹{(tripContext?.budget || 50000).toLocaleString()}</span>\r\n                    </div>\r\n                    <div className={styles.budgetBars}>\r\n                        <div className={styles.budgetRow}>\r\n                            <span>Flights</span>\r\n                            <div className={styles.barTrack}>\r\n                                <div className={styles.barFill} style={{ width: '40%', background: '#3b82f6' }}></div>\r\n                            </div>\r\n                        </div>\r\n                        <div className={styles.budgetRow}>\r\n                            <span>Stay</span>\r\n                            <div className={styles.barTrack}>\r\n                                <div className={styles.barFill} style={{ width: '35%', background: '#10b981' }}></div>\r\n                            </div>\r\n                        </div>\r\n                        <div className={styles.budgetRow}>\r\n                            <span>Food</span>\r\n                            <div className={styles.barTrack}>\r\n                                <div className={styles.barFill} style={{ width: '25%', background: '#f59e0b' }}></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className={styles.layout}>\r\n                {/* LEFT COLUMN: TIMELINE */}\r\n                <div className={styles.timeline}>\r\n                    {days.map((dayData, idx) => {\r\n                        const isEven = idx % 2 === 0;\r\n                        const mainAct = dayData.activities[0];\r\n                        const imgAct = dayData.activities.find(a => a.image);\r\n\r\n                        return (\r\n                            <div key={dayData.day} className={styles.dayWrapper}>\r\n                                <div className={styles.dayNumberBadge}>{dayData.day}</div>\r\n\r\n                                <div className={styles.dayCard}>\r\n                                    {/* Alternate layouts based on 'isEven' to match the screenshot vibe */}\r\n                                    {isEven ? (\r\n                                        <div className={styles.dayContentRow}>\r\n                                            <div className={styles.dayMain}>\r\n                                                <div className={styles.dayHeader}>\r\n                                                    <h3 className={styles.dayTitle}>DAY {dayData.day} â€” {mainAct?.activity || 'EXPLORATION'}</h3>\r\n                                                    <span className={styles.aiOptimized}>AI OPTIMIZED</span>\r\n                                                </div>\r\n\r\n                                                <div className={styles.routeBox}>\r\n                                                    <Navigation size={16} className={styles.routeIcon} />\r\n                                                    <strong>Route:</strong> {dayData.routeStr}\r\n                                                </div>\r\n\r\n                                                <div style={{ fontSize: '0.75rem', fontWeight: 700, color: '#94a3b8', letterSpacing: '0.05em', marginBottom: '0.75rem' }}>PLANNED STOPS</div>\r\n                                                <div className={styles.stopsGrid}>\r\n                                                    {dayData.activities.slice(0, 4).map((act, i) => (\r\n                                                        <div key={i} className={styles.stopItem}>\r\n                                                            <div className={styles.stopIcon}>{getIconForType(act.type, act.activity)}</div>\r\n                                                            <div className={styles.stopInfo}>\r\n                                                                <span className={styles.stopName}>{act.activity}</span>\r\n                                                                <span className={styles.stopDesc}>{act.description?.substring(0, 30)}...</span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    ))}\r\n                                                </div>\r\n\r\n                                                {dayData.stayLogic && (\r\n                                                    <div className={styles.aiTip}>\r\n                                                        <Sparkles size={14} className={styles.aiTipIcon} />\r\n                                                        <strong>Stay Logic:</strong> {dayData.stayLogic}\r\n                                                    </div>\r\n                                                )}\r\n                                                {dayData.purpose && (\r\n                                                    <div className={styles.aiTip} style={{ background: 'rgba(56, 189, 248, 0.1)', color: '#0369a1', borderColor: 'rgba(56, 189, 248, 0.2)' }}>\r\n                                                        <Sparkles size={14} className={styles.aiTipIcon} />\r\n                                                        <strong>Purpose:</strong> {dayData.purpose}\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n\r\n                                            <div className={styles.dayStats}>\r\n                                                <div className={styles.statItem}>\r\n                                                    <span className={styles.statLabel}>Travel Hours</span>\r\n                                                    <span className={styles.statValue}>{dayData.travelHours}</span>\r\n                                                </div>\r\n                                                <div className={styles.statItem}>\r\n                                                    <span className={styles.statLabel}>Intensity</span>\r\n                                                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-end' }}>\r\n                                                        <span className={styles.statValue} style={{ color: getIntensityColor(dayData.intensity) }}>{dayData.intensity}/10</span>\r\n                                                    </div>\r\n                                                    <div className={styles.intensityBar}>\r\n                                                        <div className={styles.intensityFill} style={{ width: `${dayData.intensity * 10}%`, background: getIntensityColor(dayData.intensity) }}></div>\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                <a href=\"#details\" className={styles.detailLink}>Details <ArrowRight size={14} /></a>\r\n                                            </div>\r\n                                        </div>\r\n                                    ) : (\r\n                                        // Layout 2: Featured Image\r\n                                        <div className={styles.dayContentRow}>\r\n                                            <div className={styles.dayMain}>\r\n                                                <div className={styles.dayHeader}>\r\n                                                    <h3 className={styles.dayTitle} style={{ textTransform: 'none', fontWeight: 700 }}>Day {dayData.day}: {mainAct?.activity}</h3>\r\n                                                </div>\r\n                                                <p style={{ color: '#64748b', fontSize: '0.9rem', lineHeight: 1.6, marginBottom: '1.5rem' }}>\r\n                                                    {dayData.activities.map(a => a.description).join(' ').substring(0, 150)}...\r\n                                                </p>\r\n\r\n                                                <div className={styles.stopsGrid} style={{ display: 'flex', flexDirection: 'column' }}>\r\n                                                    {dayData.activities.slice(0, 2).map((act, i) => (\r\n                                                        <div key={i} className={styles.stopItem} style={{ background: 'transparent', boxShadow: 'none', border: 'none', padding: '0 0 1rem 0' }}>\r\n                                                            <div className={styles.stopIcon} style={{ color: '#3b82f6' }}>{getIconForType(act.type, act.activity)}</div>\r\n                                                            <div className={styles.stopInfo}>\r\n                                                                <span className={styles.stopName}>{act.activity}</span>\r\n                                                                <span className={styles.stopDesc}>{act.description?.substring(0, 40)}...</span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    ))}\r\n                                                </div>\r\n\r\n                                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginTop: '1rem', borderTop: '1px solid #f1f5f9', paddingTop: '1rem' }}>\r\n                                                    <span style={{ fontSize: '0.85rem', color: '#64748b' }}>ðŸ›ï¸ Stay: Default Hotel</span>\r\n                                                    <a href=\"#details\" className={styles.detailLink} style={{ marginTop: 0 }}>Details <ArrowRight size={14} /></a>\r\n                                                </div>\r\n                                            </div>\r\n                                            {imgAct && (\r\n                                                <img src={imgAct.image} alt={imgAct.activity} className={styles.dayImage} />\r\n                                            )}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                    })}\r\n\r\n                    <div style={{ textAlign: 'center', marginTop: '1rem' }}>\r\n                        <button style={{ background: '#0f172a', color: 'white', border: 'none', padding: '0.8rem 2rem', borderRadius: '50px', fontWeight: 700, cursor: 'pointer' }}>\r\n                            Show All Days\r\n                        </button>\r\n                    </div>\r\n\r\n                    <TripMap itinerary={itinerary} />\r\n                </div>\r\n\r\n                {/* RIGHT COLUMN: SIDEBAR */}\r\n                <div className={styles.sidebar}>\r\n                    <div className={styles.structureCard}>\r\n                        <h4 className={styles.cardTitle}>\r\n                            <Search size={18} color=\"#3b82f6\" /> AI Structure Summary\r\n                        </h4>\r\n                        <table className={styles.structureTable}>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Day</th>\r\n                                    <th>Base</th>\r\n                                    <th>Hrs</th>\r\n                                    <th>Int.</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {days.slice(0, 5).map(d => (\r\n                                    <tr key={d.day}>\r\n                                        <td><strong>{d.day}</strong></td>\r\n                                        <td>{d.primaryLocation}</td>\r\n                                        <td>{d.travelHours}</td>\r\n                                        <td>\r\n                                            <div className={styles.intBadge} style={{ background: getIntensityColor(d.intensity) }}>\r\n                                                {d.intensity}\r\n                                            </div>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                    <div className={styles.perfectCard}>\r\n                        <div className={styles.perfectIconBox}>\r\n                            <Sparkles size={24} />\r\n                        </div>\r\n                        <h4 className={styles.perfectTitle}>Why This is AI-Perfect</h4>\r\n\r\n                        <div className={styles.perfectList}>\r\n                            {tripContext?.ai_perfect_reasons && tripContext.ai_perfect_reasons.length > 0 ? (\r\n                                tripContext.ai_perfect_reasons.map((reason, idx) => {\r\n                                    const splits = reason.split(':');\r\n                                    return (\r\n                                        <div key={idx} className={styles.perfectItem}>\r\n                                            <CheckCircle2 size={16} className={styles.perfectCheck} />\r\n                                            <div>\r\n                                                {splits.length > 1 ? (\r\n                                                    <><strong style={{ color: '#f8fafc' }}>{splits[0]}:</strong> {splits.slice(1).join(':')}</>\r\n                                                ) : (\r\n                                                    reason\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    )\r\n                                })\r\n                            ) : (\r\n                                <>\r\n                                    <div className={styles.perfectItem}>\r\n                                        <CheckCircle2 size={16} className={styles.perfectCheck} />\r\n                                        <div>\r\n                                            <strong>Geographic Flow:</strong> Loops logically from start to end, minimizing backtracking compared to standard tours.\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className={styles.perfectItem}>\r\n                                        <CheckCircle2 size={16} className={styles.perfectCheck} />\r\n                                        <div>\r\n                                            <strong>Pacing Logic:</strong> Follows the 'High-Low' pattern. Heavy exertion is followed by cultural leisure based on your preference.\r\n                                        </div>\r\n                                    </div>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Extra Images for padding */}\r\n                    <div className={styles.imagesGrid}>\r\n                        {itinerary.filter(i => i.image).slice(1, 3).map((imgAct, idx) => (\r\n                            <img key={idx} src={imgAct.image} className={styles.miniImage} alt=\"Trip Thumbnail\" />\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ModernItineraryView;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\TripPlanner\\SortableActivityItem.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\TripPlanner\\SortableDayColumn.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\TripPlanner\\TripMap.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":67,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":67,"endColumn":15}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState, useRef } from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup, Polyline, useMap } from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\n\r\n// Fix default marker icon issue (Vite / Webpack bundler issue with Leaflet)\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n    iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png',\r\n    iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png',\r\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\r\n});\r\n\r\n// Custom colored circle marker for day numbers\r\nconst createDayIcon = (dayNumber, color) => L.divIcon({\r\n    className: '',\r\n    html: `<div style=\"\r\n        background: ${color};\r\n        color: white;\r\n        width: 32px;\r\n        height: 32px;\r\n        border-radius: 50%;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        font-weight: 800;\r\n        font-size: 13px;\r\n        border: 3px solid white;\r\n        box-shadow: 0 4px 12px rgba(0,0,0,0.3);\r\n        font-family: Inter, sans-serif;\r\n    \">${dayNumber}</div>`,\r\n    iconSize: [32, 32],\r\n    iconAnchor: [16, 16],\r\n});\r\n\r\nconst DAY_COLORS = [\r\n    '#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6',\r\n    '#06b6d4', '#f97316', '#84cc16', '#ec4899', '#6366f1',\r\n];\r\n\r\n// Helper to auto-fit map to markers\r\nfunction FitBounds({ positions }) {\r\n    const map = useMap();\r\n    useEffect(() => {\r\n        if (positions && positions.length > 0) {\r\n            if (positions.length === 1) {\r\n                map.setView(positions[0], 11);\r\n            } else {\r\n                map.fitBounds(positions, { padding: [40, 40] });\r\n            }\r\n        }\r\n    }, [positions, map]);\r\n    return null;\r\n}\r\n\r\n// Nominatim geocoder â€” rate-limited to 1 req/s\r\nasync function geocodeQuery(query) {\r\n    try {\r\n        const url = `https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(query)}&format=json&limit=1`;\r\n        const res = await fetch(url, {\r\n            headers: { 'Accept-Language': 'en', 'User-Agent': 'AltairGO-Travel-App' }\r\n        });\r\n        const data = await res.json();\r\n        if (data && data.length > 0) {\r\n            return [parseFloat(data[0].lat), parseFloat(data[0].lon)];\r\n        }\r\n    } catch (e) {\r\n        // silently fail\r\n    }\r\n    return null;\r\n}\r\n\r\nfunction sleep(ms) {\r\n    return new Promise(r => setTimeout(r, ms));\r\n}\r\n\r\nconst TripMap = ({ itinerary }) => {\r\n    const [markers, setMarkers] = useState([]); // [{day, label, position, color}]\r\n    const [loading, setLoading] = useState(true);\r\n    const hasFetched = useRef(false);\r\n\r\n    useEffect(() => {\r\n        if (!itinerary || itinerary.length === 0 || hasFetched.current) return;\r\n        hasFetched.current = true;\r\n\r\n        (async () => {\r\n            setLoading(true);\r\n            const results = [];\r\n\r\n            // Collect one representative location per day (first activity's google_maps_search_query)\r\n            for (let i = 0; i < itinerary.length; i++) {\r\n                const day = itinerary[i];\r\n                const dayNum = day.day ?? (i + 1);\r\n                const color = DAY_COLORS[i % DAY_COLORS.length];\r\n\r\n                // Try activities first, then fallback to day.location\r\n                const activities = day.activities || [];\r\n                let position = null;\r\n\r\n                for (const act of activities) {\r\n                    const query = act.google_maps_search_query || act.activity;\r\n                    if (!query) continue;\r\n                    position = await geocodeQuery(query);\r\n                    if (position) break;\r\n                    await sleep(1050); // Nominatim rate limit: 1 req/s\r\n                }\r\n\r\n                // Fallback to location name\r\n                if (!position && day.location) {\r\n                    position = await geocodeQuery(day.location);\r\n                    await sleep(1050);\r\n                }\r\n\r\n                if (position) {\r\n                    results.push({\r\n                        day: dayNum,\r\n                        label: day.location || `Day ${dayNum}`,\r\n                        activities: activities.slice(0, 3).map(a => a.activity || '').filter(Boolean),\r\n                        position,\r\n                        color,\r\n                    });\r\n                }\r\n\r\n                // Rate-limit between days too\r\n                if (i < itinerary.length - 1) await sleep(1050);\r\n            }\r\n\r\n            setMarkers(results);\r\n            setLoading(false);\r\n        })();\r\n    }, [itinerary]);\r\n\r\n    const positions = markers.map(m => m.position);\r\n\r\n    return (\r\n        <div style={{ position: 'relative', borderRadius: '20px', overflow: 'hidden', height: '400px', marginTop: '3rem', boxShadow: '0 10px 30px -10px rgba(0,0,0,0.1)', border: '1px solid #e2e8f0' }}>\r\n            {loading && (\r\n                <div style={{\r\n                    position: 'absolute', inset: 0, zIndex: 1000,\r\n                    display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center',\r\n                    background: 'rgba(248, 250, 252, 0.92)', backdropFilter: 'blur(4px)',\r\n                    gap: '1rem'\r\n                }}>\r\n                    <div style={{\r\n                        width: '40px', height: '40px', borderRadius: '50%',\r\n                        border: '4px solid #e2e8f0', borderTopColor: '#3b82f6',\r\n                        animation: 'spin 0.8s linear infinite'\r\n                    }} />\r\n                    <p style={{ margin: 0, color: '#64748b', fontWeight: 600, fontSize: '0.9rem' }}>\r\n                        Locating destinations on mapâ€¦\r\n                    </p>\r\n                    <style>{`@keyframes spin { to { transform: rotate(360deg); } }`}</style>\r\n                </div>\r\n            )}\r\n\r\n            <MapContainer\r\n                center={[20.5937, 78.9629]}\r\n                zoom={5}\r\n                style={{ height: '100%', width: '100%' }}\r\n                scrollWheelZoom={false}\r\n                zoomControl={true}\r\n            >\r\n                <TileLayer\r\n                    attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\r\n                    url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                />\r\n\r\n                {positions.length > 0 && <FitBounds positions={positions} />}\r\n\r\n                {/* Route polyline */}\r\n                {positions.length > 1 && (\r\n                    <Polyline\r\n                        positions={positions}\r\n                        pathOptions={{ color: '#3b82f6', weight: 3, opacity: 0.7, dashArray: '8, 6' }}\r\n                    />\r\n                )}\r\n\r\n                {/* Day markers */}\r\n                {markers.map((m) => (\r\n                    <Marker key={m.day} position={m.position} icon={createDayIcon(m.day, m.color)}>\r\n                        <Popup>\r\n                            <div style={{ minWidth: '160px' }}>\r\n                                <strong style={{ fontSize: '0.95rem', color: '#0f172a' }}>\r\n                                    Day {m.day} â€” {m.label}\r\n                                </strong>\r\n                                {m.activities.length > 0 && (\r\n                                    <ul style={{ margin: '0.5rem 0 0', paddingLeft: '1rem', fontSize: '0.82rem', color: '#475569' }}>\r\n                                        {m.activities.map((a, i) => <li key={i}>{a}</li>)}\r\n                                    </ul>\r\n                                )}\r\n                            </div>\r\n                        </Popup>\r\n                    </Marker>\r\n                ))}\r\n            </MapContainer>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TripMap;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\components\\TripPlanner\\TripOptions.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\context\\AuthContext.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":16,"column":65,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":66},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":19,"column":65,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":66},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":19,"column":68,"nodeType":"BlockStatement","messageId":"unexpected","endLine":19,"endColumn":71,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[633,634],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":22,"column":61,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":62},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":22,"column":64,"nodeType":"BlockStatement","messageId":"unexpected","endLine":22,"endColumn":67,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[737,738],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchUser'. Either include it or remove the dependency array.","line":39,"column":8,"nodeType":"ArrayExpression","endLine":39,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [fetchUser, token]","fix":{"range":[1263,1270],"text":"[fetchUser, token]"}}]},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":99,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":99,"endColumn":21}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useState, useEffect, useContext } from 'react';\r\nimport { API_BASE_URL } from '../config';\r\n\r\nconst AuthContext = createContext({\r\n    user: null,\r\n    token: null,\r\n    loading: true,\r\n    login: async () => { },\r\n    register: async () => { },\r\n    logout: () => { }\r\n});\r\n\r\n// Safe localStorage wrapper to prevent SecurityError in restrictive browsers\r\nconst safeLocalStorage = {\r\n    getItem: (key) => {\r\n        try { return window.localStorage.getItem(key); } catch (e) { return null; }\r\n    },\r\n    setItem: (key, value) => {\r\n        try { window.localStorage.setItem(key, value); } catch (e) { }\r\n    },\r\n    removeItem: (key) => {\r\n        try { window.localStorage.removeItem(key); } catch (e) { }\r\n    }\r\n};\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [user, setUser] = useState(null);\r\n    const [token, setToken] = useState(safeLocalStorage.getItem('token'));\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (token) {\r\n            // Validate token or just load user data if stored\r\n            // For MVP, we'll try to fetch /auth/me or just persist user obj\r\n            fetchUser(token);\r\n        } else {\r\n            setLoading(false);\r\n        }\r\n    }, [token]);\r\n\r\n    const fetchUser = async (authToken) => {\r\n        try {\r\n            const res = await fetch(`${API_BASE_URL}/auth/me`, {\r\n                headers: { Authorization: `Bearer ${authToken}` }\r\n            });\r\n            if (res.ok) {\r\n                const userData = await res.json();\r\n                setUser(userData);\r\n            } else {\r\n                logout(); // Invalid token\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Auth Check Failed\", err);\r\n            logout();\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const login = async (email, password) => {\r\n        const res = await fetch(`${API_BASE_URL}/auth/login`, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ email, password })\r\n        });\r\n        const data = await res.json();\r\n        if (!res.ok) throw new Error(data.error || 'Login failed');\r\n\r\n        setToken(data.token);\r\n        setUser(data.user);\r\n        safeLocalStorage.setItem('token', data.token);\r\n        return data;\r\n    };\r\n\r\n    const register = async (name, email, password) => {\r\n        const res = await fetch(`${API_BASE_URL}/auth/register`, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ name, email, password })\r\n        });\r\n        const data = await res.json();\r\n        if (!res.ok) throw new Error(data.error || 'Registration failed');\r\n        return data;\r\n    };\r\n\r\n    const logout = () => {\r\n        setToken(null);\r\n        setUser(null);\r\n        safeLocalStorage.removeItem('token');\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ user, token, loading, login, register, logout }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\data\\blogs.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\data\\destinations.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\data\\packages.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\main.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\pages\\Home.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\pages\\admin\\AdminDashboard.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'i' is defined but never used.","line":31,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"i"},"fix":{"range":[1397,1400],"text":""},"desc":"Remove unused variable 'i'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'trips' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":84,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":84,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"trips"},"fix":{"range":[3782,3787],"text":""},"desc":"Remove unused variable 'trips'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'navigate'. Either include it or remove the dependency array.","line":122,"column":8,"nodeType":"ArrayExpression","endLine":122,"endColumn":27,"suggestions":[{"desc":"Update the dependencies array to be: [token, getHeaders, navigate]","fix":{"range":[5372,5391],"text":"[token, getHeaders, navigate]"}}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n    LayoutDashboard, MapPin, FileText, Users, LogOut, Package,\r\n    Pencil, Trash2, ChevronLeft, ChevronRight, Globe, Map, Plane, BookOpen, X, Eye, Inbox, CheckCircle2, XCircle, TrendingUp, DollarSign\r\n} from 'lucide-react';\r\nimport { API_BASE_URL } from '../../config';\r\nimport BlogContent from '../../components/Blogs/BlogContent';\r\nimport PackageContent from '../../components/Packages/PackageContent';\r\nimport DestinationContent from '../../components/Destinations/DestinationContent';\r\nimport s from './Admin.module.css';\r\n\r\n/* â”€â”€ SVG Area Chart Component â”€â”€ */\r\nconst VisitorChart = ({ data }) => {\r\n    if (!data || data.length === 0) return null;\r\n\r\n    const W = 800, H = 160, PAD = 30;\r\n    const max = Math.max(...data.map(d => d.visitors), 1);\r\n    const stepX = (W - PAD) / (data.length - 1);\r\n\r\n    const points = data.map((d, i) => ({\r\n        x: PAD + i * stepX,\r\n        y: H - PAD - ((d.visitors / max) * (H - PAD * 2))\r\n    }));\r\n\r\n    const linePath = points.map((p, i) => `${i === 0 ? 'M' : 'L'}${p.x},${p.y}`).join(' ');\r\n    const areaPath = `${linePath} L${points[points.length - 1].x},${H - PAD} L${PAD},${H - PAD} Z`;\r\n\r\n    // Show every 3rd label\r\n    const labels = data.filter((_, i) => i % 3 === 0);\r\n    const labelPositions = labels.map((d, i) => ({\r\n        x: PAD + (data.indexOf(d)) * stepX,\r\n        label: d.time\r\n    }));\r\n\r\n    return (\r\n        <svg viewBox={`0 0 ${W} ${H}`} className={s.chartSvg} preserveAspectRatio=\"none\">\r\n            <defs>\r\n                <linearGradient id=\"chartFill\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                    <stop offset=\"0%\" stopColor=\"#38bdf8\" stopOpacity=\"0.3\" />\r\n                    <stop offset=\"100%\" stopColor=\"#38bdf8\" stopOpacity=\"0.02\" />\r\n                </linearGradient>\r\n            </defs>\r\n            {/* Grid lines */}\r\n            {[0.25, 0.5, 0.75].map(pct => (\r\n                <line key={pct} x1={PAD} y1={H - PAD - pct * (H - PAD * 2)} x2={W} y2={H - PAD - pct * (H - PAD * 2)}\r\n                    stroke=\"rgba(148,163,184,0.06)\" strokeWidth=\"1\" />\r\n            ))}\r\n            {/* Area fill */}\r\n            <path d={areaPath} fill=\"url(#chartFill)\" />\r\n            {/* Line */}\r\n            <path d={linePath} fill=\"none\" stroke=\"#38bdf8\" strokeWidth=\"2.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n            {/* End dot */}\r\n            <circle cx={points[points.length - 1].x} cy={points[points.length - 1].y} r=\"4\" fill=\"#38bdf8\" />\r\n            <circle cx={points[points.length - 1].x} cy={points[points.length - 1].y} r=\"8\" fill=\"#38bdf8\" opacity=\"0.2\" />\r\n            {/* Time labels */}\r\n            {labelPositions.map((lp, i) => (\r\n                <text key={i} x={lp.x} y={H - 6} fill=\"#475569\" fontSize=\"10\" textAnchor=\"middle\" fontFamily=\"inherit\">{lp.label}</text>\r\n            ))}\r\n        </svg>\r\n    );\r\n};\r\n\r\n/* â”€â”€ Main Dashboard â”€â”€ */\r\nconst AdminDashboard = () => {\r\n    const navigate = useNavigate();\r\n    const token = sessionStorage.getItem('adminToken');\r\n\r\n    const [tab, setTab] = useState('overview');\r\n    const [stats, setStats] = useState(null);\r\n    const [visitors, setVisitors] = useState(null);\r\n\r\n    // Destinations state\r\n    const [destinations, setDestinations] = useState([]);\r\n    const [destTotal, setDestTotal] = useState(0);\r\n    const [destPage, setDestPage] = useState(1);\r\n    const [destPages, setDestPages] = useState(1);\r\n    const [destSearch, setDestSearch] = useState('');\r\n\r\n    // Blogs, Packages, Users, Trips, Requests, Affiliates\r\n    const [blogs, setBlogs] = useState([]);\r\n    const [packages, setPackages] = useState([]);\r\n    const [users, setUsers] = useState([]);\r\n    const [trips, setTrips] = useState([]);\r\n    const [destRequests, setDestRequests] = useState([]);\r\n    const [affiliateStats, setAffiliateStats] = useState(null);\r\n\r\n    // Pagination State (Client-Side)\r\n    const ITEMS_PER_PAGE = 10;\r\n    const [blogPage, setBlogPage] = useState(1);\r\n    const [pkgPage, setPkgPage] = useState(1);\r\n    const [userPage, setUserPage] = useState(1);\r\n\r\n    // Edit modals\r\n    const [editDest, setEditDest] = useState(null);\r\n    const [editForm, setEditForm] = useState({});\r\n    const [editBlog, setEditBlog] = useState(null);\r\n    const [blogForm, setBlogForm] = useState({});\r\n    const [editPkg, setEditPkg] = useState(null);\r\n    const [pkgForm, setPkgForm] = useState({});\r\n\r\n    // Preview state\r\n    const [previewBlog, setPreviewBlog] = useState(null);\r\n    const [previewPkg, setPreviewPkg] = useState(null);\r\n    const [previewDest, setPreviewDest] = useState(null);\r\n\r\n    // Redirect if not authenticated\r\n    useEffect(() => { if (!token) navigate('/admin/login'); }, [token, navigate]);\r\n\r\n    const getHeaders = useCallback(() => ({\r\n        'Authorization': `Bearer ${token}`,\r\n        'Content-Type': 'application/json'\r\n    }), [token]);\r\n\r\n    const fetchStats = useCallback(async () => {\r\n        if (!token) return;\r\n        try {\r\n            const res = await fetch(`${API_BASE_URL}/api/admin/stats`, { headers: getHeaders() });\r\n            if (res.status === 401) { sessionStorage.removeItem('adminToken'); navigate('/admin/login'); return; }\r\n            setStats(await res.json());\r\n        } catch (e) { console.error(e); }\r\n    }, [token, getHeaders]);\r\n\r\n    const fetchVisitors = useCallback(async () => {\r\n        if (!token) return;\r\n        try {\r\n            const res = await fetch(`${API_BASE_URL}/api/admin/visitors`, { headers: getHeaders() });\r\n            if (res.ok) setVisitors(await res.json());\r\n        } catch (e) { console.error(e); }\r\n    }, [token, getHeaders]);\r\n\r\n    const fetchDestinations = useCallback(async () => {\r\n        if (!token) return;\r\n        try {\r\n            const res = await fetch(`${API_BASE_URL}/api/admin/destinations?page=${destPage}&search=${destSearch}`, { headers: getHeaders() });\r\n            if (!res.ok) throw new Error(\"Failed\");\r\n            const data = await res.json();\r\n            setDestinations(data.items || []);\r\n            setDestTotal(data.total || 0);\r\n            setDestPages(data.pages || 1);\r\n        } catch (e) { console.error(e); }\r\n    }, [token, destPage, destSearch, getHeaders]);\r\n\r\n    const fetchBlogs = useCallback(async () => {\r\n        if (!token) return;\r\n        try {\r\n            const res = await fetch(`${API_BASE_URL}/api/admin/blogs`, { headers: getHeaders() });\r\n            if (res.ok) setBlogs(await res.json());\r\n        } catch (e) { console.error(e); }\r\n    }, [token, getHeaders]);\r\n\r\n    const fetchPackages = useCallback(async () => {\r\n        if (!token) return;\r\n        try {\r\n            const res = await fetch(`${API_BASE_URL}/api/admin/packages`, { headers: getHeaders() });\r\n            if (res.ok) setPackages(await res.json());\r\n        } catch (e) { console.error(e); }\r\n    }, [token, getHeaders]);\r\n\r\n    const fetchUsers = useCallback(async () => {\r\n        if (!token) return;\r\n        try {\r\n            const res = await fetch(`${API_BASE_URL}/api/admin/users`, { headers: getHeaders() });\r\n            if (res.ok) setUsers(await res.json());\r\n        } catch (e) { console.error(e); }\r\n    }, [token, getHeaders]);\r\n\r\n    const fetchTrips = useCallback(async () => {\r\n        if (!token) return;\r\n        try {\r\n            const res = await fetch(`${API_BASE_URL}/api/admin/trips`, { headers: getHeaders() });\r\n            if (res.ok) setTrips(await res.json());\r\n        } catch (e) { console.error(e); }\r\n    }, [token, getHeaders]);\r\n\r\n    const fetchDestRequests = useCallback(async () => {\r\n        if (!token) return;\r\n        try {\r\n            const res = await fetch(`${API_BASE_URL}/api/admin/destination-requests`, { headers: getHeaders() });\r\n            if (res.ok) setDestRequests(await res.json());\r\n        } catch (e) { console.error(e); }\r\n    }, [token, getHeaders]);\r\n\r\n    const fetchAffiliateStats = useCallback(async () => {\r\n        if (!token) return;\r\n        try {\r\n            const res = await fetch(`${API_BASE_URL}/api/admin/affiliate-stats`, { headers: getHeaders() });\r\n            if (res.ok) setAffiliateStats(await res.json());\r\n        } catch (e) { console.error(e); }\r\n    }, [token, getHeaders]);\r\n\r\n    useEffect(() => { fetchStats(); fetchVisitors(); fetchTrips(); }, [fetchStats, fetchVisitors, fetchTrips]);\r\n\r\n    // Auto-refresh visitors every 30 seconds\r\n    useEffect(() => {\r\n        if (tab !== 'overview') return;\r\n        const interval = setInterval(fetchVisitors, 30000);\r\n        return () => clearInterval(interval);\r\n    }, [tab, fetchVisitors]);\r\n\r\n    useEffect(() => {\r\n        if (tab === 'destinations') fetchDestinations();\r\n        if (tab === 'blogs') { fetchBlogs(); fetchPackages(); }\r\n        if (tab === 'users') { fetchUsers(); fetchTrips(); }\r\n        if (tab === 'requests') fetchDestRequests();\r\n        if (tab === 'affiliates') fetchAffiliateStats();\r\n    }, [tab, fetchDestinations, fetchBlogs, fetchPackages, fetchUsers, fetchTrips, fetchDestRequests, fetchAffiliateStats]);\r\n\r\n    // â”€â”€ Destination CRUD â”€â”€\r\n    const handleDelete = async (id) => {\r\n        if (!window.confirm('Delete this destination permanently?')) return;\r\n        try { await fetch(`${API_BASE_URL}/api/admin/destinations/${id}`, { method: 'DELETE', headers: getHeaders() }); fetchDestinations(); fetchStats(); } catch (e) { console.error(e); }\r\n    };\r\n\r\n    const openEditDest = (dest) => {\r\n        setEditDest(dest);\r\n        setEditForm({ name: dest.name || '', desc: dest.desc || '', description: dest.description || '', location: dest.location || '', rating: dest.rating || 0, tag: dest.tag || '', image: dest.image || '' });\r\n    };\r\n\r\n    const saveDest = async () => {\r\n        try { await fetch(`${API_BASE_URL}/api/admin/destinations/${editDest.id}`, { method: 'PUT', headers: getHeaders(), body: JSON.stringify(editForm) }); setEditDest(null); fetchDestinations(); } catch (e) { console.error(e); }\r\n    };\r\n\r\n    // â”€â”€ Blog CRUD â”€â”€\r\n    const openEditBlog = (blog) => {\r\n        setEditBlog(blog);\r\n        setBlogForm({ title: blog.title || '', category: blog.category || '', date: blog.date || '', excerpt: blog.excerpt || '', image: blog.image || '', readTime: blog.readTime || '', content: blog.content || '' });\r\n    };\r\n\r\n    const saveBlog = async () => {\r\n        try { await fetch(`${API_BASE_URL}/api/admin/blogs/${editBlog.id}`, { method: 'PUT', headers: getHeaders(), body: JSON.stringify(blogForm) }); setEditBlog(null); fetchBlogs(); } catch (e) { console.error(e); }\r\n    };\r\n\r\n    const handlePreview = () => {\r\n        setPreviewBlog({ ...editBlog, ...blogForm });\r\n    };\r\n\r\n    const handlePkgPreview = () => {\r\n        setPreviewPkg({ ...editPkg, ...pkgForm });\r\n    };\r\n\r\n    const handleDestPreview = () => {\r\n        setPreviewDest({ ...editDest, ...editForm });\r\n    };\r\n\r\n    // â”€â”€ Package CRUD â”€â”€\r\n    const openEditPkg = (pkg) => {\r\n        setEditPkg(pkg);\r\n        setPkgForm({ title: pkg.title || '', description: pkg.description || '', price: pkg.price || '', duration: pkg.duration || '', difficulty: pkg.difficulty || '', image: pkg.image || '' });\r\n    };\r\n\r\n    const savePkg = async () => {\r\n        try { await fetch(`${API_BASE_URL}/api/admin/packages/${editPkg.id}`, { method: 'PUT', headers: getHeaders(), body: JSON.stringify(pkgForm) }); setEditPkg(null); fetchPackages(); } catch (e) { console.error(e); }\r\n    };\r\n\r\n    const handleLogout = () => { sessionStorage.removeItem('adminToken'); navigate('/admin/login'); };\r\n\r\n    const handleApproveRequest = async (id) => {\r\n        try {\r\n            await fetch(`${API_BASE_URL}/api/admin/destination-requests/${id}/approve`, { method: 'POST', headers: getHeaders() });\r\n            fetchDestRequests();\r\n            fetchStats();\r\n        } catch (e) { console.error(e); }\r\n    };\r\n\r\n    const handleRejectRequest = async (id) => {\r\n        try {\r\n            await fetch(`${API_BASE_URL}/api/admin/destination-requests/${id}/reject`, { method: 'POST', headers: getHeaders() });\r\n            fetchDestRequests();\r\n        } catch (e) { console.error(e); }\r\n    };\r\n\r\n    const navItems = [\r\n        { id: 'overview', icon: LayoutDashboard, label: 'Overview' },\r\n        { id: 'destinations', icon: MapPin, label: 'Destinations' },\r\n        { id: 'blogs', icon: FileText, label: 'Content' },\r\n        { id: 'users', icon: Users, label: 'Users & Trips' },\r\n        { id: 'requests', icon: Inbox, label: 'Requests', badge: destRequests.length },\r\n        { id: 'affiliates', icon: TrendingUp, label: 'Affiliates & Revenue' },\r\n    ];\r\n\r\n    const statCards = stats ? [\r\n        { label: 'Destinations', value: stats.destinations, icon: MapPin, color: '#38bdf8', bg: 'rgba(56,189,248,0.1)' },\r\n        { label: 'Regions', value: stats.regions, icon: Map, color: '#a78bfa', bg: 'rgba(167,139,250,0.1)' },\r\n        { label: 'Countries', value: stats.countries, icon: Globe, color: '#34d399', bg: 'rgba(52,211,153,0.1)' },\r\n        { label: 'Users', value: stats.users, icon: Users, color: '#fb923c', bg: 'rgba(251,146,60,0.1)' },\r\n        { label: 'Trips', value: stats.trips, icon: Plane, color: '#f472b6', bg: 'rgba(244,114,182,0.1)' },\r\n        { label: 'Blogs', value: stats.blogs, icon: BookOpen, color: '#facc15', bg: 'rgba(250,204,21,0.1)' },\r\n        { label: 'Packages', value: stats.packages, icon: Package, color: '#22d3ee', bg: 'rgba(34,211,238,0.1)' },\r\n    ] : [];\r\n\r\n    if (!token) return null;\r\n\r\n    /* â”€â”€ Helper: Client-Side Pagination â”€â”€ */\r\n    const getPaginatedData = (data, page) => {\r\n        const start = (page - 1) * ITEMS_PER_PAGE;\r\n        return data.slice(start, start + ITEMS_PER_PAGE);\r\n    };\r\n\r\n    /* â”€â”€ Helper: Pagination Controls â”€â”€ */\r\n    const PaginationControls = ({ page, total, setPage }) => {\r\n        const totalPages = Math.ceil(total / ITEMS_PER_PAGE);\r\n        if (totalPages <= 1) return null;\r\n\r\n        return (\r\n            <div className={s.pagination}>\r\n                <span>Page {page} of {totalPages}</span>\r\n                <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                    <button className={s.pageBtn} disabled={page <= 1} onClick={() => setPage(p => p - 1)}>\r\n                        <ChevronLeft size={14} /> Prev\r\n                    </button>\r\n                    <button className={s.pageBtn} disabled={page >= totalPages} onClick={() => setPage(p => p + 1)}>\r\n                        Next <ChevronRight size={14} />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    /* â”€â”€ Reusable edit modal renderer â”€â”€ */\r\n    const renderModal = (title, fields, form, setForm, onSave, onClose, extraButtons = null) => (\r\n        <div className={s.modalOverlay} onClick={onClose}>\r\n            <div className={s.modal} onClick={e => e.stopPropagation()}>\r\n                <h3 className={s.modalTitle}>{title}</h3>\r\n                {fields.map(f => (\r\n                    <div className={s.formGroup} key={f.key}>\r\n                        <label className={s.formLabel}>{f.label}</label>\r\n                        {f.type === 'textarea' ? (\r\n                            <textarea className={s.formTextarea} value={form[f.key] || ''} onChange={e => setForm({ ...form, [f.key]: e.target.value })} />\r\n                        ) : (\r\n                            <input type={f.type || 'text'} className={s.formInput} value={form[f.key] || ''} onChange={e => setForm({ ...form, [f.key]: e.target.value })} />\r\n                        )}\r\n                    </div>\r\n                ))}\r\n                <div className={s.modalActions}>\r\n                    {extraButtons && <div style={{ marginRight: 'auto' }}>{extraButtons}</div>}\r\n                    <button className={s.cancelBtn} onClick={onClose}>Cancel</button>\r\n                    <button className={s.saveBtn} onClick={onSave}>Save Changes</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    const renderPreviewModal = () => {\r\n        const closePreview = () => {\r\n            setPreviewBlog(null);\r\n            setPreviewPkg(null);\r\n            setPreviewDest(null);\r\n        };\r\n\r\n        let content = null;\r\n        let title = \"Preview\";\r\n\r\n        if (previewBlog) {\r\n            content = <BlogContent blog={previewBlog} />;\r\n            title = \"Blog Preview\";\r\n        } else if (previewPkg) {\r\n            content = <PackageContent pkg={previewPkg} />;\r\n            title = \"Package Preview\";\r\n        } else if (previewDest) {\r\n            // For destination preview, map the form fields to what DestinationContent expects\r\n            // The form has 'desc' (short) and 'description' (long). \r\n            // DestinationContent expects 'description' for the long text.\r\n            content = (\r\n                <DestinationContent\r\n                    destination={previewDest}\r\n                    // Pass dummy reviews for preview or empty\r\n                    reviews={[]}\r\n                    totalReviews={0}\r\n                    averageRating={previewDest.rating || 0}\r\n                />\r\n            );\r\n            title = \"Destination Preview\";\r\n        }\r\n\r\n        if (!content) return null;\r\n\r\n        return (\r\n            <div style={{ position: 'fixed', inset: 0, zIndex: 2000, background: 'rgba(0,0,0,0.85)', display: 'flex', justifyContent: 'center', alignItems: 'center', padding: '2rem' }} onClick={closePreview}>\r\n                <div style={{ background: '#0f172a', width: '100%', maxWidth: '1000px', height: '100%', borderRadius: '1rem', overflow: 'hidden', position: 'relative', display: 'flex', flexDirection: 'column' }} onClick={e => e.stopPropagation()}>\r\n                    <div style={{ padding: '1rem', borderBottom: '1px solid #1e293b', display: 'flex', justifyContent: 'space-between', alignItems: 'center', background: '#020617' }}>\r\n                        <h3 style={{ margin: 0, color: '#f8fafc' }}>{title}</h3>\r\n                        <button onClick={closePreview} style={{ background: 'transparent', border: 'none', color: '#94a3b8', cursor: 'pointer', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                            Close Preview <X size={20} />\r\n                        </button>\r\n                    </div>\r\n                    <div style={{ flex: 1, overflowY: 'auto', padding: '0', background: '#fff' }}> {/* White background for preview content correctness */}\r\n                        {/* Wrap in a container to isolate styles if needed */}\r\n                        <div className=\"preview-container\">\r\n                            {content}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className={s.dashboard}>\r\n            {/* Sidebar */}\r\n            <aside className={s.sidebar}>\r\n                <div className={s.sidebarLogo}>ALTAIRGO <span>INTELLIGENCE</span></div>\r\n                <nav className={s.sidebarNav}>\r\n                    {navItems.map(item => (\r\n                        <button key={item.id} className={`${s.navItem} ${tab === item.id ? s.navItemActive : ''}`} onClick={() => setTab(item.id)} style={{ position: 'relative' }}>\r\n                            <item.icon size={18} /> {item.label}\r\n                            {item.badge > 0 && (\r\n                                <span style={{ marginLeft: 'auto', background: '#f43f5e', color: '#fff', borderRadius: '999px', fontSize: '0.7rem', fontWeight: 700, padding: '1px 7px', lineHeight: '1.6' }}>\r\n                                    {item.badge}\r\n                                </span>\r\n                            )}\r\n                        </button>\r\n                    ))}\r\n                </nav>\r\n                <button className={`${s.navItem} ${s.navItemLogout}`} onClick={handleLogout}>\r\n                    <LogOut size={18} /> Logout\r\n                </button>\r\n            </aside>\r\n\r\n            <div className={s.mainContent}>\r\n\r\n                {/* â•â•â•â•â•â•â•â•â•â•â• OVERVIEW â•â•â•â•â•â•â•â•â•â•â• */}\r\n                {tab === 'overview' && (\r\n                    <>\r\n                        <div className={s.pageHeader}>\r\n                            <h1>Dashboard Overview</h1>\r\n                            <p>Real-time analytics for AltairLabs platform</p>\r\n                        </div>\r\n\r\n                        <div className={s.statsGrid}>\r\n                            {statCards.map(card => (\r\n                                <div key={card.label} className={s.statCard}>\r\n                                    <div className={s.statIcon} style={{ background: card.bg }}>\r\n                                        <card.icon size={22} color={card.color} />\r\n                                    </div>\r\n                                    <div>\r\n                                        <div className={s.statValue}>{card.value}</div>\r\n                                        <div className={s.statLabel}>{card.label}</div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n\r\n                        {/* Visitors Chart */}\r\n                        <div className={s.chartContainer}>\r\n                            <div className={s.chartHeader}>\r\n                                <span className={s.chartTitle}>Visitors â€” Last 24 Hours</span>\r\n                                <span className={s.liveLabel}>\r\n                                    <span className={s.liveDot} />\r\n                                    {visitors ? `${visitors.current} online now` : 'Loading...'}\r\n                                </span>\r\n                            </div>\r\n                            {visitors && <VisitorChart data={visitors.hourly} />}\r\n                            {visitors && (\r\n                                <div className={s.visitorStatsRow}>\r\n                                    <div className={s.visitorStat}>\r\n                                        <div className={s.visitorStatValue}>{visitors.current}</div>\r\n                                        <div className={s.visitorStatLabel}>Live Now</div>\r\n                                    </div>\r\n                                    <div className={s.visitorStat}>\r\n                                        <div className={s.visitorStatValue}>{visitors.totalToday?.toLocaleString()}</div>\r\n                                        <div className={s.visitorStatLabel}>Today Total</div>\r\n                                    </div>\r\n                                    <div className={s.visitorStat}>\r\n                                        <div className={s.visitorStatValue}>{visitors.hourly ? Math.max(...visitors.hourly.map(h => h.visitors)) : 0}</div>\r\n                                        <div className={s.visitorStatLabel}>Peak Hour</div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </>\r\n                )}\r\n\r\n                {/* â•â•â•â•â•â•â•â•â•â•â• DESTINATIONS â•â•â•â•â•â•â•â•â•â•â• */}\r\n                {tab === 'destinations' && (\r\n                    <>\r\n                        <div className={s.pageHeader}>\r\n                            <h1>Destinations</h1>\r\n                            <p>Manage all {destTotal} destinations in the database</p>\r\n                        </div>\r\n                        <div className={s.tableContainer}>\r\n                            <div className={s.tableHeader}>\r\n                                <span className={s.tableTitle}>{destTotal} Destinations</span>\r\n                                <input type=\"text\" className={s.searchBox} placeholder=\"Search destinations...\" value={destSearch} onChange={(e) => { setDestSearch(e.target.value); setDestPage(1); }} />\r\n                            </div>\r\n                            <table className={s.table}>\r\n                                <thead><tr><th>Image</th><th>Name</th><th>Location</th><th>Rating</th><th>Tag</th><th>Actions</th></tr></thead>\r\n                                <tbody>\r\n                                    {destinations.map(d => (\r\n                                        <tr key={d.id}>\r\n                                            <td>{d.image ? <img src={d.image} alt=\"\" className={s.tableImg} /> : 'â€”'}</td>\r\n                                            <td style={{ fontWeight: 600, color: '#f1f5f9' }}>{d.name}</td>\r\n                                            <td>{d.location || 'â€”'}</td>\r\n                                            <td><span className={`${s.badge} ${s.badgeGreen}`}>â˜… {d.rating || 'â€”'}</span></td>\r\n                                            <td>{d.tag ? <span className={`${s.badge} ${s.badgePurple}`}>{d.tag}</span> : 'â€”'}</td>\r\n                                            <td>\r\n                                                <button className={s.actionBtn} onClick={() => openEditDest(d)}><Pencil size={15} /></button>\r\n                                                <button className={`${s.actionBtn} ${s.actionBtnDanger}`} onClick={() => handleDelete(d.id)}><Trash2 size={15} /></button>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))}\r\n                                    {destinations.length === 0 && <tr><td colSpan=\"6\" style={{ textAlign: 'center', padding: '2rem', color: '#64748b' }}>No destinations found</td></tr>}\r\n                                </tbody>\r\n                            </table>\r\n                            <div className={s.pagination}>\r\n                                <span>Page {destPage} of {destPages}</span>\r\n                                <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                                    <button className={s.pageBtn} disabled={destPage <= 1} onClick={() => setDestPage(p => p - 1)}><ChevronLeft size={14} /> Prev</button>\r\n                                    <button className={s.pageBtn} disabled={destPage >= destPages} onClick={() => setDestPage(p => p + 1)}>Next <ChevronRight size={14} /></button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </>\r\n                )}\r\n\r\n                {/* â•â•â•â•â•â•â•â•â•â•â• CONTENT (BLOGS + PACKAGES) â•â•â•â•â•â•â•â•â•â•â• */}\r\n                {tab === 'blogs' && (\r\n                    <>\r\n                        <div className={s.pageHeader}>\r\n                            <h1>Content Management</h1>\r\n                            <p>Edit blogs and tour packages</p>\r\n                        </div>\r\n\r\n                        {/* Blogs Table */}\r\n                        <div className={s.tableContainer} style={{ marginBottom: '2rem' }}>\r\n                            <div className={s.tableHeader}>\r\n                                <span className={s.tableTitle}>{blogs.length} Blog Posts</span>\r\n                            </div>\r\n                            <table className={s.table}>\r\n                                <thead><tr><th>Image</th><th>Title</th><th>Category</th><th>Read Time</th><th>Actions</th></tr></thead>\r\n                                <tbody>\r\n                                    {getPaginatedData(blogs, blogPage).map(b => (\r\n                                        <tr key={b.id}>\r\n                                            <td>{b.image ? <img src={b.image} alt=\"\" className={s.tableImg} /> : 'â€”'}</td>\r\n                                            <td style={{ fontWeight: 600, color: '#f1f5f9' }}>{b.title}</td>\r\n                                            <td><span className={`${s.badge} ${s.badgeBlue}`}>{b.category}</span></td>\r\n                                            <td>{b.readTime}</td>\r\n                                            <td>\r\n                                                <button className={s.actionBtn} onClick={() => openEditBlog(b)} title=\"Edit blog\"><Pencil size={15} /></button>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                            <PaginationControls page={blogPage} total={blogs.length} setPage={setBlogPage} />\r\n                        </div>\r\n\r\n                        {/* Packages Table */}\r\n                        <div className={s.tableContainer}>\r\n                            <div className={s.tableHeader}>\r\n                                <span className={s.tableTitle}>{packages.length} Tour Packages</span>\r\n                            </div>\r\n                            <table className={s.table}>\r\n                                <thead><tr><th>Image</th><th>Title</th><th>Price</th><th>Duration</th><th>Difficulty</th><th>Actions</th></tr></thead>\r\n                                <tbody>\r\n                                    {getPaginatedData(packages, pkgPage).map(p => (\r\n                                        <tr key={p.id}>\r\n                                            <td>{p.image ? <img src={p.image} alt=\"\" className={s.tableImg} /> : 'â€”'}</td>\r\n                                            <td style={{ fontWeight: 600, color: '#f1f5f9' }}>{p.title}</td>\r\n                                            <td><span className={`${s.badge} ${s.badgeGreen}`}>{p.price}</span></td>\r\n                                            <td>{p.duration || 'â€”'}</td>\r\n                                            <td>{p.difficulty ? <span className={`${s.badge} ${s.badgePurple}`}>{p.difficulty}</span> : 'â€”'}</td>\r\n                                            <td>\r\n                                                <button className={s.actionBtn} onClick={() => openEditPkg(p)} title=\"Edit package\"><Pencil size={15} /></button>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                            <PaginationControls page={pkgPage} total={packages.length} setPage={setPkgPage} />\r\n                        </div>\r\n                    </>\r\n                )}\r\n\r\n                {/* â•â•â•â•â•â•â•â•â•â•â• USERS & TRIPS â•â•â•â•â•â•â•â•â•â•â• */}\r\n                {tab === 'users' && (\r\n                    <>\r\n                        <div className={s.pageHeader}>\r\n                            <h1>Users</h1>\r\n                            <p>Registered users overview</p>\r\n                        </div>\r\n                        <div className={s.tableContainer}>\r\n                            <div className={s.tableHeader}><span className={s.tableTitle}>{users.length} Registered Users</span></div>\r\n                            <table className={s.table}>\r\n                                <thead><tr><th>Name</th><th>Email</th><th>Trips</th><th>Joined</th></tr></thead>\r\n                                <tbody>\r\n                                    {getPaginatedData(users, userPage).map(u => (\r\n                                        <tr key={u.id}>\r\n                                            <td style={{ fontWeight: 600, color: '#f1f5f9' }}>{u.name || 'Unnamed'}</td>\r\n                                            <td>{u.email}</td>\r\n                                            <td><span className={`${s.badge} ${s.badgePurple}`}>{u.tripCount} trips</span></td>\r\n                                            <td>{u.created_at ? new Date(u.created_at).toLocaleDateString() : 'â€”'}</td>\r\n                                        </tr>\r\n                                    ))}\r\n                                    {users.length === 0 && <tr><td colSpan=\"4\" style={{ textAlign: 'center', padding: '2rem', color: '#64748b' }}>No users yet</td></tr>}\r\n                                </tbody>\r\n                            </table>\r\n                            <PaginationControls page={userPage} total={users.length} setPage={setUserPage} />\r\n                        </div>\r\n                    </>\r\n                )}\r\n\r\n                {/* â•â•â•â•â•â•â•â•â•â•â• PENDING REQUESTS â•â•â•â•â•â•â•â•â•â•â• */}\r\n                {tab === 'requests' && (\r\n                    <>\r\n                        <div className={s.pageHeader}>\r\n                            <h1>Pending Requests</h1>\r\n                            <p>User-submitted destination suggestions awaiting review</p>\r\n                        </div>\r\n                        <div className={s.tableContainer}>\r\n                            <div className={s.tableHeader}>\r\n                                <span className={s.tableTitle}>{destRequests.length} Pending</span>\r\n                            </div>\r\n                            <table className={s.table}>\r\n                                <thead><tr><th>Name</th><th>Description</th><th>Tag</th><th>Est. Cost</th><th>Submitted</th><th>Actions</th></tr></thead>\r\n                                <tbody>\r\n                                    {destRequests.map(r => (\r\n                                        <tr key={r.id}>\r\n                                            <td style={{ fontWeight: 600, color: '#f1f5f9' }}>{r.name}</td>\r\n                                            <td style={{ maxWidth: '220px', overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap', color: '#94a3b8' }}>{r.description || 'â€”'}</td>\r\n                                            <td>{r.tag ? <span className={`${s.badge} ${s.badgePurple}`}>{r.tag}</span> : 'â€”'}</td>\r\n                                            <td>{r.cost ? <span className={`${s.badge} ${s.badgeGreen}`}>â‚¹{r.cost.toLocaleString()}</span> : 'N/A'}</td>\r\n                                            <td>{r.created_at ? new Date(r.created_at).toLocaleDateString() : 'â€”'}</td>\r\n                                            <td style={{ display: 'flex', gap: '0.5rem' }}>\r\n                                                <button\r\n                                                    className={s.actionBtn}\r\n                                                    onClick={() => handleApproveRequest(r.id)}\r\n                                                    title=\"Approve\"\r\n                                                    style={{ color: '#34d399', borderColor: 'rgba(52,211,153,0.3)' }}\r\n                                                >\r\n                                                    <CheckCircle2 size={16} />\r\n                                                </button>\r\n                                                <button\r\n                                                    className={`${s.actionBtn} ${s.actionBtnDanger}`}\r\n                                                    onClick={() => handleRejectRequest(r.id)}\r\n                                                    title=\"Reject\"\r\n                                                >\r\n                                                    <XCircle size={16} />\r\n                                                </button>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))}\r\n                                    {destRequests.length === 0 && <tr><td colSpan=\"6\" style={{ textAlign: 'center', padding: '2rem', color: '#64748b' }}>No pending requests ðŸŽ‰</td></tr>}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </>\r\n                )}\r\n\r\n                {/* â•â•â•â•â•â•â•â•â•â•â• AFFILIATES â•â•â•â•â•â•â•â•â•â•â• */}\r\n                {tab === 'affiliates' && (\r\n                    <>\r\n                        <div className={s.pageHeader}>\r\n                            <h1>Affiliate Tracking & Revenue</h1>\r\n                            <p>Monitor your booking link performance and estimated commissions</p>\r\n                        </div>\r\n\r\n                        {affiliateStats ? (\r\n                            <>\r\n                                <div className={s.statsGrid}>\r\n                                    <div className={s.statCard}>\r\n                                        <div className={s.statIcon} style={{ background: 'rgba(52,211,153,0.1)' }}>\r\n                                            <TrendingUp size={22} color=\"#34d399\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <div className={s.statValue}>{affiliateStats.total_clicks}</div>\r\n                                            <div className={s.statLabel}>Total Clicks Tracked</div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className={s.statCard} style={{ background: 'linear-gradient(135deg, rgba(34,197,94,0.1) 0%, rgba(20,83,45,0.05) 100%)', border: '1px solid rgba(74,222,128,0.2)' }}>\r\n                                        <div className={s.statIcon} style={{ background: '#dcfce7' }}>\r\n                                            <DollarSign size={22} color=\"#166534\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <div className={s.statValue} style={{ color: '#166534' }}>â‚¹{affiliateStats.estimated_revenue.toLocaleString()}</div>\r\n                                            <div className={s.statLabel} style={{ color: '#15803d', fontWeight: 600 }}>Est. AI Revenue Pipeline</div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className={s.tableContainer} style={{ marginTop: '2rem' }}>\r\n                                    <div className={s.tableHeader}>\r\n                                        <span className={s.tableTitle}>Click Breakdown by Category</span>\r\n                                    </div>\r\n                                    <table className={s.table}>\r\n                                        <thead><tr><th>Service Type</th><th>Total Clicks</th><th>Est. Conversion Rate</th><th>Est. Commission</th></tr></thead>\r\n                                        <tbody>\r\n                                            {Object.entries(affiliateStats.breakdown || {}).map(([type, count]) => (\r\n                                                <tr key={type}>\r\n                                                    <td style={{ fontWeight: 600, color: '#f1f5f9', textTransform: 'capitalize' }}>\r\n                                                        {type === 'flight' ? <Plane size={14} style={{ marginRight: '6px' }} /> : null}\r\n                                                        {type}\r\n                                                    </td>\r\n                                                    <td><span className={`${s.badge} ${s.badgeBlue}`}>{count}</span></td>\r\n                                                    <td>8%</td>\r\n                                                    <td><span className={`${s.badge} ${s.badgeGreen}`}>~{type === 'hotel' ? '5%' : type === 'flight' ? '3%' : '10%'}</span></td>\r\n                                                </tr>\r\n                                            ))}\r\n                                            {Object.keys(affiliateStats.breakdown || {}).length === 0 && (\r\n                                                <tr><td colSpan=\"4\" style={{ textAlign: 'center', padding: '2rem', color: '#64748b' }}>No clicks tracked yet.</td></tr>\r\n                                            )}\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                            </>\r\n                        ) : (\r\n                            <div style={{ color: '#94a3b8' }}>Loading affiliate data...</div>\r\n                        )}\r\n                    </>\r\n                )}\r\n            </div>\r\n\r\n            {/* â”€â”€ Edit Modals â”€â”€ */}\r\n            {editDest && renderModal('Edit Destination', [\r\n                { key: 'name', label: 'Name' }, { key: 'location', label: 'Location' },\r\n                { key: 'desc', label: 'Short Description' }, { key: 'rating', label: 'Rating', type: 'number' },\r\n                { key: 'tag', label: 'Tag' }, { key: 'image', label: 'Image URL' },\r\n                { key: 'description', label: 'Full Description', type: 'textarea' },\r\n            ], editForm, setEditForm, saveDest, () => setEditDest(null), (\r\n                <button className={s.saveBtn} onClick={handleDestPreview} style={{ background: '#22d3ee', color: '#0f172a', marginRight: 'auto', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                    <Eye size={16} /> Preview\r\n                </button>\r\n            ))}\r\n\r\n            {editBlog && renderModal('Edit Blog Post', [\r\n                { key: 'title', label: 'Title' }, { key: 'category', label: 'Category' },\r\n                { key: 'date', label: 'Date' }, { key: 'readTime', label: 'Read Time' },\r\n                { key: 'image', label: 'Image Path' },\r\n                { key: 'excerpt', label: 'Excerpt', type: 'textarea' },\r\n                { key: 'content', label: 'Content (HTML)', type: 'textarea' },\r\n            ], blogForm, setBlogForm, saveBlog, () => setEditBlog(null), (\r\n                <button className={s.saveBtn} onClick={handlePreview} style={{ background: '#22d3ee', color: '#0f172a', marginRight: 'auto', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                    <Globe size={16} /> Preview\r\n                </button>\r\n            ))}\r\n\r\n            {/* Inject Preview Button into the Edit Modal logic is hard with reusable renderModal. \r\n                Instead, let's just conditionally render the preview button if it's the blog modal.\r\n                Actually, simpler: Just add use effect to inject it or customize renderModal? \r\n                Let's customize renderModal call for blog to include the extra button in actions.\r\n                Wait, renderModal doesn't support extra buttons. \r\n                I'll modify renderModal to accept 'extraButtons'.\r\n            */}\r\n\r\n            {previewBlog && renderPreviewModal()}\r\n            {previewPkg && renderPreviewModal()}\r\n            {previewDest && renderPreviewModal()}\r\n\r\n            {editPkg && renderModal('Edit Package', [\r\n                { key: 'title', label: 'Title' }, { key: 'price', label: 'Price' },\r\n                { key: 'duration', label: 'Duration' }, { key: 'difficulty', label: 'Difficulty' },\r\n                { key: 'image', label: 'Image Path' },\r\n                { key: 'description', label: 'Description', type: 'textarea' },\r\n            ], pkgForm, setPkgForm, savePkg, () => setEditPkg(null), (\r\n                <button className={s.saveBtn} onClick={handlePkgPreview} style={{ background: '#22d3ee', color: '#0f172a', marginRight: 'auto', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                    <Eye size={16} /> Preview\r\n                </button>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminDashboard;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\pages\\admin\\AdminLogin.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":40,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Shield, KeyRound } from 'lucide-react';\r\nimport { API_BASE_URL } from '../../config';\r\nimport s from './Admin.module.css';\r\n\r\nconst AdminLogin = () => {\r\n    const [key, setKey] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const navigate = useNavigate();\r\n\r\n    // If already authenticated, redirect\r\n    React.useEffect(() => {\r\n        if (sessionStorage.getItem('adminToken')) {\r\n            navigate('/admin');\r\n        }\r\n    }, [navigate]);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!key.trim()) return;\r\n        setError('');\r\n        setLoading(true);\r\n\r\n        try {\r\n            const res = await fetch(`${API_BASE_URL}/api/admin/verify-key`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ accessKey: key })\r\n            });\r\n            const data = await res.json();\r\n\r\n            if (res.ok && data.token) {\r\n                sessionStorage.setItem('adminToken', data.token);\r\n                navigate('/admin');\r\n            } else {\r\n                setError(data.error || 'Invalid access key');\r\n            }\r\n        } catch (err) {\r\n            setError('Connection failed. Is the backend running?');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={s.loginPage}>\r\n            <div className={s.loginCard}>\r\n                <div className={s.loginLogo}>\r\n                    <Shield size={40} color=\"#38bdf8\" style={{ marginBottom: '0.75rem' }} />\r\n                    <h1>ALTAIRGO <span>INTELLIGENCE</span></h1>\r\n                    <p>Admin Control Center</p>\r\n                </div>\r\n\r\n                <form onSubmit={handleSubmit}>\r\n                    <label className={s.loginLabel}>\r\n                        <KeyRound size={12} style={{ display: 'inline', marginRight: '4px' }} />\r\n                        Access Key\r\n                    </label>\r\n                    <input\r\n                        type=\"password\"\r\n                        className={s.loginInput}\r\n                        placeholder=\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\"\r\n                        value={key}\r\n                        onChange={(e) => setKey(e.target.value)}\r\n                        autoFocus\r\n                    />\r\n                    <button\r\n                        type=\"submit\"\r\n                        className={s.loginBtn}\r\n                        disabled={loading || !key.trim()}\r\n                    >\r\n                        {loading ? 'Verifying...' : 'Access Dashboard'}\r\n                    </button>\r\n                </form>\r\n\r\n                {error && <div className={s.loginError}>{error}</div>}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminLogin;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\pages\\auth\\LoginPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\pages\\auth\\RegisterPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\pages\\blogs\\BlogDetails.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\pages\\blogs\\BlogsPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\pages\\booking\\BookingPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'handlePlayVideo' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":78,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":78,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"handlePlayVideo"},"fix":{"range":[3174,3448],"text":""},"desc":"Remove unused variable 'handlePlayVideo'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\r\nimport { MapPin, Calendar, User, Search, Plane } from 'lucide-react';\r\nimport styles from './BookingPage.module.css';\r\nimport beachVideo from '../../assets/videos/beach_video.mp4';\r\nimport { API_BASE_URL } from '../../config';\r\nimport DestinationCard from '../../components/DestinationCard/DestinationCard';\r\n\r\nconst BookingPage = () => {\r\n    const [activeTab, setActiveTab] = useState('Hostelry');\r\n    const [activeFilter, setActiveFilter] = useState('Popular destination');\r\n    const [showFilterModal, setShowFilterModal] = useState(false);\r\n    const [priceRange, setPriceRange] = useState(1000);\r\n    const [selectedTypes, setSelectedTypes] = useState([]);\r\n    const [visibleCount, setVisibleCount] = useState(6);\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    const [destinations, setDestinations] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const videoRef = useRef(null);\r\n    const widgetRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        fetch(`${API_BASE_URL}/destinations`)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                setDestinations(data);\r\n                setLoading(false);\r\n            })\r\n            .catch(err => {\r\n                console.error(\"Failed to fetch destinations:\", err);\r\n                setLoading(false);\r\n            });\r\n    }, []);\r\n\r\n    const toggleType = (type) => {\r\n        setSelectedTypes(prev =>\r\n            prev.includes(type)\r\n                ? prev.filter(t => t !== type)\r\n                : [...prev, type]\r\n        );\r\n    };\r\n\r\n    // Filter Logic\r\n    const filteredDestinations = destinations.filter(dest => {\r\n        // 1. Tab Filter (Keyword match)\r\n        if (activeFilter !== 'Popular destination') {\r\n            const keyword = activeFilter.toLowerCase();\r\n            const matchesKeyword =\r\n                dest.name.toLowerCase().includes(keyword) ||\r\n                dest.desc.toLowerCase().includes(keyword) ||\r\n                dest.location.toLowerCase().includes(keyword);\r\n            if (!matchesKeyword) return false;\r\n        }\r\n\r\n        // 2. Price Filter\r\n        if (dest.estimated_cost_per_day > priceRange) return false;\r\n\r\n        // 3. Type Filter (Adventure, Relaxation, etc.)\r\n        if (selectedTypes.length > 0) {\r\n            const desc = dest.desc.toLowerCase();\r\n            const matchesType = selectedTypes.some(type => {\r\n                if (type === 'Adventure') return desc.includes('adventure') || desc.includes('hike') || desc.includes('mountain');\r\n                if (type === 'Relaxation') return desc.includes('relax') || desc.includes('beach') || desc.includes('spa');\r\n                if (type === 'Cultural') return desc.includes('culture') || desc.includes('temple') || desc.includes('history') || desc.includes('art');\r\n                return false;\r\n            });\r\n            if (!matchesType) return false;\r\n        }\r\n\r\n        return true;\r\n    });\r\n\r\n    const scrollToWidget = () => {\r\n        widgetRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    };\r\n\r\n    // ... existing handlePlayVideo ...\r\n\r\n    const handlePlayVideo = () => {\r\n        if (videoRef.current) {\r\n            if (isPlaying) {\r\n                videoRef.current.pause();\r\n            } else {\r\n                videoRef.current.play();\r\n            }\r\n            setIsPlaying(!isPlaying);\r\n        }\r\n    };\r\n\r\n    // ... render ...\r\n\r\n\r\n    return (\r\n        <div className={styles.pageContainer}>\r\n            <style>\r\n                {`\r\n                    @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');\r\n                `}\r\n            </style>\r\n\r\n            {/* Hero Section */}\r\n            <div className={styles.heroSection}>\r\n                <div className={styles.heroContent}>\r\n                    <h1 className={styles.heroTitle}>\r\n                        <span style={{ color: '#4ade80' }}>Explore</span> the whole world<br />\r\n                        and enjoy its beauty\r\n                    </h1>\r\n                    <p className={styles.heroSubtitle}>\r\n                        Find and write about your experiences around the world.\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Decorative Flight Paths with Plane Icons */}\r\n                <div className={styles.flightPathLeft}>\r\n                    <Plane className={styles.planeIconLeft} size={24} fill=\"white\" />\r\n                </div>\r\n                <div className={styles.flightPathRight}>\r\n                    <Plane className={styles.planeIconRight} size={24} fill=\"white\" />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Floating Booking Widget */}\r\n            <div className={styles.widgetContainer} ref={widgetRef}>\r\n                <div className={styles.widgetCard}>\r\n                    {/* Tabs */}\r\n                    <div className={styles.widgetHeader}>\r\n                        <div className={styles.tabs}>\r\n                            {['Hostelry', 'Flights', 'Bus & Shuttle', 'Cars'].map((tab) => (\r\n                                <button\r\n                                    key={tab}\r\n                                    className={`${styles.tab} ${activeTab === tab ? styles.activeTab : ''}`}\r\n                                    onClick={() => setActiveTab(tab)}\r\n                                >\r\n                                    {tab}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    {/* Inputs */}\r\n                    <div className={styles.searchForm}>\r\n                        <div className={styles.inputGroup}>\r\n                            <label className={styles.inputLabel}>Destination</label>\r\n                            <div className={styles.inputField}>\r\n                                <MapPin size={20} className={styles.inputIcon} />\r\n                                <input type=\"text\" placeholder=\"Bali, Indonesia\" defaultValue=\"Bali, Indonesia\" />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className={styles.dividerVertical}></div>\r\n\r\n                        <div className={styles.inputGroup}>\r\n                            <label className={styles.inputLabel}>Check-in</label>\r\n                            <div className={styles.inputField}>\r\n                                <Calendar size={20} className={styles.inputIcon} />\r\n                                <input type=\"text\" placeholder=\"Sat, 2 Dec 2022\" defaultValue=\"Sat, 2 Dec 2022\" />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className={styles.dividerVertical}></div>\r\n\r\n                        <div className={styles.inputGroup}>\r\n                            <label className={styles.inputLabel}>Check-out</label>\r\n                            <div className={styles.inputField}>\r\n                                <Calendar size={20} className={styles.inputIcon} />\r\n                                <input type=\"text\" placeholder=\"Sun, 3 Dec 2022\" defaultValue=\"Sun, 3 Dec 2022\" />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className={styles.dividerVertical}></div>\r\n\r\n                        <div className={styles.inputGroup}>\r\n                            <label className={styles.inputLabel}>Room & Guest</label>\r\n                            <div className={styles.inputField}>\r\n                                <User size={20} className={styles.inputIcon} />\r\n                                <input type=\"text\" placeholder=\"1 Room, 2 Guest\" defaultValue=\"1 Room, 2 Guest\" />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <button className={styles.searchButton}>\r\n                            <Search size={22} className={styles.searchIcon} />\r\n                            <span>Search</span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Popular Place Section */}\r\n            <section className={styles.popularSection}>\r\n                <div className={styles.sectionHeader}>\r\n                    <div className={styles.headerLeft}>\r\n                        <h2 className={styles.sectionTitle}>Popular Place</h2>\r\n                        <p className={styles.sectionSubtitle}>Let's enjoy this heaven on earth</p>\r\n                    </div>\r\n                    <div className={styles.headerRight}>\r\n                        <p className={styles.sectionDescription}>\r\n                            Many places are very famous, beautiful, clean, and will give a very deep impression to visitors and will make them come back.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className={styles.placesGrid}>\r\n                    {loading ? (\r\n                        Array(4).fill(0).map((_, index) => (\r\n                            <div key={index} className={styles.skeleton} />\r\n                        ))\r\n                    ) : (\r\n                        destinations.slice(0, 4).map((dest) => (\r\n                            <DestinationCard key={dest.id} dest={dest} />\r\n                        ))\r\n                    )}\r\n                </div>\r\n            </section>\r\n\r\n            {/* Sweet Memories Section */}\r\n            <section className={styles.memoriesSection}>\r\n                <div className={styles.memoriesHeader}>\r\n                    <h2 className={styles.memoriesTitle}>Travel to make sweet memories</h2>\r\n                    <p className={styles.memoriesSubtitle}>Find trips that fit a flexible lifestyle</p>\r\n                </div>\r\n\r\n                <div className={styles.memoriesContent}>\r\n                    {/* Left Side - Features */}\r\n                    <div className={styles.memoriesLeft}>\r\n                        <div className={styles.featureItem}>\r\n                            <div className={styles.featureNumber}>01</div>\r\n                            <div className={styles.featureText}>\r\n                                <h3>Find trips that fit your freedom</h3>\r\n                                <p>Travelling offers freedom and flexibility, solitude and spontaneity, privacy and purpose.</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className={styles.featureItem}>\r\n                            <div className={styles.featureNumber}>02</div>\r\n                            <div className={styles.featureText}>\r\n                                <h3>Get back to nature by travel</h3>\r\n                                <p>The world is a playground and you can finally explore Mother Nature's inimitable canvas.</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className={styles.featureItem}>\r\n                            <div className={styles.featureNumber}>03</div>\r\n                            <div className={styles.featureText}>\r\n                                <h3>Reignite those travel tastebuds</h3>\r\n                                <p>There are infinite reasons to love travel, one of them being the glorious food.</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    {/* Right Side - Image with Floating Cards */}\r\n                    <div className={styles.memoriesRight}>\r\n                        <div className={styles.memoriesImageWrapper}>\r\n                            <img\r\n                                src=\"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?q=80&w=2070&auto=format&fit=crop\"\r\n                                alt=\"Scenic Mountain Landscape\"\r\n                                className={styles.memoriesMainImage}\r\n                            />\r\n\r\n                            {/* Floating Cards */}\r\n                            <div className={`${styles.floatingCard} ${styles.card1}`}>\r\n                                <img src=\"https://images.unsplash.com/photo-1494790108377-be9c29b29330?q=80&w=100&auto=format&fit=crop\" alt=\"User\" />\r\n                                <div>\r\n                                    <h4>Pranjal Chopade</h4>\r\n                                    <span>â­ 4.5</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className={`${styles.floatingCard} ${styles.card2}`}>\r\n                                <img src=\"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=100&auto=format&fit=crop\" alt=\"User\" />\r\n                                <div>\r\n                                    <h4>Mohit Borse</h4>\r\n                                    <span>â­ 5.0</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className={`${styles.floatingCard} ${styles.card3}`}>\r\n                                <img src=\"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?q=80&w=100&auto=format&fit=crop\" alt=\"User\" />\r\n                                <div>\r\n                                    <h4>Bhushan Bhusare</h4>\r\n                                    <span>â­ 4.0</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            {/* Explore More Section */}\r\n            <section className={styles.exploreSection}>\r\n                <div className={styles.sectionHeader}>\r\n                    <div className={styles.headerLeft}>\r\n                        <h2 className={styles.sectionTitle}>Explore more</h2>\r\n                        <p className={styles.sectionSubtitle}>Let's go on an adventure</p>\r\n                    </div>\r\n                    {/* Description removed as per request */}\r\n                    <div className={styles.headerRight}></div>\r\n                </div>\r\n\r\n                {/* Filters */}\r\n                <div className={styles.filterContainer}>\r\n                    <div className={styles.filterTags}>\r\n                        {['Popular destination', 'Islands', 'Surfing', 'Nation parks', 'Lake', 'Beach', 'Camp'].map((filter, idx) => (\r\n                            <button\r\n                                key={idx}\r\n                                className={`${styles.filterTag} ${activeFilter === filter ? styles.activeFilter : ''}`}\r\n                                onClick={() => { setActiveFilter(filter); setVisibleCount(6); }}\r\n                            >\r\n                                {filter}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                    <button className={styles.filterBtn} onClick={() => setShowFilterModal(true)}>\r\n                        Filters <span className={styles.filterIcon}>âš¡</span>\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Filter Modal */}\r\n                {showFilterModal && (\r\n                    <div className={styles.modalOverlay} onClick={() => setShowFilterModal(false)}>\r\n                        <div className={styles.modalContent} onClick={(e) => e.stopPropagation()}>\r\n                            <div className={styles.modalHeader}>\r\n                                <h3>Filters</h3>\r\n                                <button className={styles.closeBtn} onClick={() => setShowFilterModal(false)}>Ã—</button>\r\n                            </div>\r\n                            <div className={styles.modalBody}>\r\n                                <div className={styles.filterGroup}>\r\n                                    <label>Price Range</label>\r\n                                    <input\r\n                                        type=\"range\"\r\n                                        min=\"50\"\r\n                                        max=\"1000\"\r\n                                        value={priceRange}\r\n                                        onChange={(e) => setPriceRange(e.target.value)}\r\n                                        className={styles.rangeSlider}\r\n                                    />\r\n                                    <div className={styles.priceLabels}>\r\n                                        <span>$50</span>\r\n                                        <span>${priceRange}</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div className={styles.filterGroup}>\r\n                                    <label>Type</label>\r\n                                    <div className={styles.checkboxGroup}>\r\n                                        {['Adventure', 'Relaxation', 'Cultural'].map(type => (\r\n                                            <label key={type}>\r\n                                                <input\r\n                                                    type=\"checkbox\"\r\n                                                    checked={selectedTypes.includes(type)}\r\n                                                    onChange={() => toggleType(type)}\r\n                                                /> {type}\r\n                                            </label>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <button className={styles.applyFilterBtn} onClick={() => setShowFilterModal(false)}>Apply Filters</button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Explore Grid */}\r\n                <div className={styles.exploreGrid}>\r\n                    {loading ? (\r\n                        Array(6).fill(0).map((_, index) => (\r\n                            <div key={index} className={styles.skeleton} />\r\n                        ))\r\n                    ) : (\r\n                        <>\r\n                            {filteredDestinations.length > 0 ? (\r\n                                filteredDestinations.slice(0, visibleCount).map((dest) => (\r\n                                    <DestinationCard key={dest.id} dest={dest} />\r\n                                ))\r\n                            ) : (\r\n                                <div style={{\r\n                                    gridColumn: '1 / -1',\r\n                                    display: 'flex',\r\n                                    flexDirection: 'column',\r\n                                    alignItems: 'center',\r\n                                    justifyContent: 'center',\r\n                                    padding: '5rem 2rem',\r\n                                    backgroundColor: '#f8fafc',\r\n                                    borderRadius: '1.5rem',\r\n                                    border: '1px dashed #cbd5e1',\r\n                                    gap: '1rem'\r\n                                }}>\r\n                                    <Search size={48} color=\"#94a3b8\" style={{ marginBottom: '1rem' }} />\r\n                                    <h3 style={{ fontSize: '1.5rem', fontWeight: '600', color: '#334155', margin: 0 }}>\r\n                                        No matches found\r\n                                    </h3>\r\n                                    <p style={{ fontSize: '1rem', color: '#64748b', textAlign: 'center', maxWidth: '400px' }}>\r\n                                        We couldn't find any destinations matching your current filters. Try changing your selected category.\r\n                                    </p>\r\n                                </div>\r\n                            )}\r\n                        </>\r\n                    )}\r\n                </div>\r\n\r\n                {filteredDestinations.length > visibleCount && (\r\n                    <div className={styles.showMoreContainer}>\r\n                        <button\r\n                            className={styles.showMoreBtn}\r\n                            onClick={() => setVisibleCount(prev => prev + 6)}\r\n                        >\r\n                            Show more\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </section>\r\n\r\n            {/* Book Now Section */}\r\n            <section className={styles.bookNowSection}>\r\n                <div className={styles.bookNowHeader}>\r\n                    <h2 className={styles.bookNowTitle}>Book tickets and go now!</h2>\r\n                    <button className={styles.bookNowBtn} onClick={scrollToWidget}>Book now</button>\r\n                </div>\r\n\r\n                <div className={styles.videoContainer}>\r\n                    <video\r\n                        ref={videoRef}\r\n                        className={styles.videoThumbnail}\r\n                        poster=\"https://images.unsplash.com/photo-1544551763-46a8723ba3f9?q=80&w=2674&auto=format&fit=crop\"\r\n                        autoPlay\r\n                        muted\r\n                        loop\r\n                        playsInline\r\n                    >\r\n                        <source src={beachVideo} type=\"video/mp4\" />\r\n                        Your browser does not support the video tag.\r\n                    </video>\r\n\r\n                    {/* Play button removed as requested for autoplay loop */}\r\n                </div>\r\n            </section>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BookingPage;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\pages\\destinations\\DestinationDetails.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'navigate' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":13,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"navigate"},"fix":{"range":[595,626],"text":""},"desc":"Remove unused variable 'navigate'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'backPath' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":17,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"backPath"},"fix":{"range":[744,801],"text":""},"desc":"Remove unused variable 'backPath'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'backLabel' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":18,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"backLabel"},"fix":{"range":[807,895],"text":""},"desc":"Remove unused variable 'backLabel'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'visibleReviews' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":27,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"visibleReviews"},"fix":{"range":[1213,1227],"text":""},"desc":"Remove unused variable 'visibleReviews'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setSortBy' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":28,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"setSortBy"},"fix":{"range":[1281,1292],"text":""},"desc":"Remove unused variable 'setSortBy'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'getSortedReviews' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":82,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":82,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"getSortedReviews"},"fix":{"range":[3048,3472],"text":""},"desc":"Remove unused variable 'getSortedReviews'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'handleLoadMore' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":126,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":126,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleLoadMore"},"fix":{"range":[4564,4648],"text":""},"desc":"Remove unused variable 'handleLoadMore'."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { useParams, Link, useLocation, useNavigate } from 'react-router-dom';\r\nimport { MapPin, Star, Calendar, CheckCircle, ArrowLeft, Sparkles } from 'lucide-react';\r\nimport { API_BASE_URL } from '../../config';\r\nimport { DetailPageSkeleton } from '../../components/Skeleton/Skeleton';\r\n\r\nimport styles from './DestinationDetails.module.css';\r\nimport DestinationContent from '../../components/Destinations/DestinationContent';\r\n\r\nconst DestinationDetails = () => {\r\n    const { id } = useParams();\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n    const [destination, setDestination] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    const backPath = location.state?.from || '/destinations';\r\n    const backLabel = location.state?.from ? 'Back to Planner' : 'Back to all destinations';\r\n\r\n    // ... existing state ...\r\n\r\n    // Review State\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [reviews, setReviews] = useState([]);\r\n    const [newReview, setNewReview] = useState({ name: '', rating: 5, text: '' });\r\n    const [hoverRating, setHoverRating] = useState(0);\r\n    const [visibleReviews, setVisibleReviews] = useState(3);\r\n    const [sortBy, setSortBy] = useState('newest');\r\n\r\n    const [error, setError] = useState(null);\r\n\r\n    useEffect(() => {\r\n        fetch(`${API_BASE_URL}/destinations/${id}`, {\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'X-Requested-With': 'XMLHttpRequest'\r\n            }\r\n        })\r\n            .then(res => {\r\n                if (!res.ok) {\r\n                    return res.text().then(text => {\r\n                        throw new Error(`Status ${res.status}: ${text}`);\r\n                    });\r\n                }\r\n                return res.json();\r\n            })\r\n            .then(data => {\r\n                setDestination(data);\r\n                // Initialize reviews from backend if available, else empty\r\n                if (data.reviews_data) {\r\n                    setReviews(data.reviews_data);\r\n                } else {\r\n                    setReviews([]);\r\n                }\r\n                setLoading(false);\r\n            })\r\n            .catch(err => {\r\n                console.error(\"Failed to fetch destination:\", err);\r\n                setError(err.message);\r\n                setLoading(false);\r\n            });\r\n    }, [id]);\r\n\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0);\r\n    }, [id]);\r\n\r\n    // Calculate Stats\r\n    const totalReviews = reviews.length;\r\n    const averageRating = totalReviews > 0\r\n        ? (reviews.reduce((sum, r) => sum + r.rating, 0) / totalReviews).toFixed(1)\r\n        : 0; // Show 0 if no actual reviews\r\n\r\n    // Count stats per star\r\n    const starCounts = { 5: 0, 4: 0, 3: 0, 2: 0, 1: 0 };\r\n    reviews.forEach(r => {\r\n        const rRating = Math.round(r.rating);\r\n        if (starCounts[rRating] !== undefined) starCounts[rRating]++;\r\n    });\r\n\r\n    // Sorting Logic\r\n    const getSortedReviews = () => {\r\n        // Create copy to sort\r\n        const sorted = [...reviews];\r\n        if (sortBy === 'newest') {\r\n            return sorted;\r\n        } else if (sortBy === 'highest') {\r\n            return sorted.sort((a, b) => b.rating - a.rating);\r\n        } else if (sortBy === 'lowest') {\r\n            return sorted.sort((a, b) => a.rating - b.rating);\r\n        }\r\n        return sorted;\r\n    };\r\n\r\n    const handleSubmitReview = (e) => {\r\n        e.preventDefault();\r\n        if (!newReview.name || !newReview.text) return;\r\n\r\n        const reviewToAdd = {\r\n            ...newReview,\r\n            date: new Date().toLocaleDateString('en-US', { month: 'long', year: 'numeric' }),\r\n        };\r\n\r\n        // Send to backend\r\n        fetch(`${API_BASE_URL}/destinations/${id}/reviews`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(reviewToAdd),\r\n        })\r\n            .then(res => res.json())\r\n            .then(() => {\r\n                // Optimistically update UI\r\n                setReviews([reviewToAdd, ...reviews]);\r\n                setNewReview({ name: '', rating: 5, text: '' });\r\n                setHoverRating(0);\r\n                setIsModalOpen(false);\r\n            })\r\n            .catch(err => {\r\n                console.error(\"Failed to submit review:\", err);\r\n                alert(\"Failed to submit review. Please try again.\");\r\n            });\r\n    };\r\n\r\n    const handleLoadMore = () => {\r\n        setVisibleReviews(prev => prev + 3);\r\n    };\r\n\r\n    if (loading) {\r\n        return <DetailPageSkeleton />;\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <div style={{ padding: '10rem', textAlign: 'center', color: 'red' }}>\r\n                <h2>Fetch Error</h2>\r\n                <p>{error}</p>\r\n                <Link to=\"/destinations\" className=\"btnPrimary\" style={{ marginTop: '1rem', display: 'inline-block' }}>Back to Destinations</Link>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!destination) {\r\n        return (\r\n            <div style={{ padding: '10rem', textAlign: 'center' }}>\r\n                <h2>Destination not found</h2>\r\n                <Link to=\"/destinations\" className=\"btnPrimary\" style={{ marginTop: '1rem', display: 'inline-block' }}>Back to Destinations</Link>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <main className={styles.main}>\r\n            <DestinationContent\r\n                destination={destination}\r\n                reviews={reviews}\r\n                averageRating={averageRating}\r\n                totalReviews={totalReviews}\r\n                starCounts={starCounts}\r\n                onOpenReviewModal={() => setIsModalOpen(true)}\r\n            />\r\n\r\n            {/* Review Modal */}\r\n            {isModalOpen && (\r\n                <div className={styles.modalOverlay} onClick={() => setIsModalOpen(false)}>\r\n                    <div className={styles.modalContent} onClick={e => e.stopPropagation()}>\r\n                        <button className={styles.closeBtn} onClick={() => setIsModalOpen(false)}>âœ•</button>\r\n                        <h3 className={styles.modalTitle}>Write a Review</h3>\r\n                        <form className={styles.reviewForm} onSubmit={handleSubmitReview}>\r\n                            <div className={styles.formGroup}>\r\n                                <label className={styles.label}>Your Name</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    className={styles.input}\r\n                                    placeholder=\"e.g. John Doe\"\r\n                                    value={newReview.name}\r\n                                    onChange={e => setNewReview({ ...newReview, name: e.target.value })}\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div className={styles.formGroup}>\r\n                                <label className={styles.label}>Rating</label>\r\n                                <div\r\n                                    className={styles.starRatingContainer}\r\n                                    onMouseLeave={() => setHoverRating(0)}\r\n                                >\r\n                                    {[1, 2, 3, 4, 5].map(star => (\r\n                                        <button\r\n                                            key={star}\r\n                                            type=\"button\"\r\n                                            className={styles.starBtn}\r\n                                            onClick={() => setNewReview({ ...newReview, rating: star })}\r\n                                            onMouseEnter={() => setHoverRating(star)}\r\n                                        >\r\n                                            <Star\r\n                                                size={32}\r\n                                                fill={star <= (hoverRating || newReview.rating) ? \"orange\" : \"#e2e8f0\"}\r\n                                                stroke=\"none\"\r\n                                            />\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                            <div className={styles.formGroup}>\r\n                                <label className={styles.label}>Your Review</label>\r\n                                <textarea\r\n                                    className={styles.textarea}\r\n                                    placeholder=\"Share your experience...\"\r\n                                    value={newReview.text}\r\n                                    onChange={e => setNewReview({ ...newReview, text: e.target.value })}\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <button type=\"submit\" className={styles.submitBtn}>Submit Review</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </main>\r\n    );\r\n};\r\n\r\nexport default DestinationDetails;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\pages\\destinations\\DestinationDetailsPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\pages\\destinations\\DestinationsPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\pages\\packages\\PackageDetails.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\pages\\packages\\PackagesPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\pages\\trips\\DashboardPage.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: 'token'. Either include it or remove the dependency array.","line":37,"column":8,"nodeType":"ArrayExpression","endLine":37,"endColumn":33,"suggestions":[{"desc":"Update the dependencies array to be: [user, loading, navigate, token]","fix":{"range":[1231,1256],"text":"[user, loading, navigate, token]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useAuth } from '../../context/AuthContext.jsx';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { API_BASE_URL } from '../../config';\r\nimport styles from './TripPlanner.module.css';\r\nimport { DashboardSkeleton } from '../../components/Skeleton/Skeleton';\r\n\r\nconst DashboardPage = () => {\r\n    const { user, token, loading, logout } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    const [trips, setTrips] = React.useState([]);\r\n\r\n    React.useEffect(() => {\r\n        // Wait for auth loading to complete before checking user\r\n        if (loading) return;\r\n\r\n        if (!user) {\r\n            navigate('/login');\r\n            return;\r\n        }\r\n\r\n        const fetchTrips = async () => {\r\n            try {\r\n                const response = await fetch(`${API_BASE_URL}/api/user/trips`, {\r\n                    headers: { 'Authorization': `Bearer ${token}` }\r\n                });\r\n                if (response.ok) {\r\n                    const data = await response.json();\r\n                    setTrips(data);\r\n                }\r\n            } catch (err) {\r\n                console.error(\"Failed to fetch trips\", err);\r\n            }\r\n        };\r\n        fetchTrips();\r\n    }, [user, loading, navigate]);\r\n\r\n    // Show loading state while auth is being validated\r\n    if (loading) {\r\n        return (\r\n            <div style={{ minHeight: '100vh', paddingTop: '8rem', maxWidth: '1200px', margin: '0 auto', padding: '8rem 1.5rem 2rem' }}>\r\n                <DashboardSkeleton count={3} />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!user) return null;\r\n\r\n    return (\r\n        <div className={styles.pageContainer}>\r\n            <div className={styles.contentWrapper}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '3rem' }}>\r\n                    <div>\r\n                        <h1 className={styles.title}>Hello, {user.name} ðŸ‘‹</h1>\r\n                        <p className={styles.subtitle}>Welcome to your travel dashboard.</p>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => { logout(); navigate('/'); }}\r\n                        style={{ padding: '0.5rem 1rem', border: '1px solid #dc2626', color: '#dc2626', background: 'transparent', borderRadius: '8px', cursor: 'pointer', fontWeight: '600' }}\r\n                    >\r\n                        Logout\r\n                    </button>\r\n                </div>\r\n\r\n                {trips.length > 0 ? (\r\n                    <div className={styles.grid} style={{ gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))' }}>\r\n                        {trips.map(trip => (\r\n                            <div key={trip.id} className={styles.card} style={{ cursor: 'pointer' }} onClick={() => navigate(`/trip/${trip.id}`)}>\r\n                                <div className={styles.cardContent}>\r\n                                    <div className={styles.cardTitle}>{trip.title}</div>\r\n                                    <div style={{ color: '#64748b', fontSize: '0.9rem', marginBottom: '0.5rem' }}>\r\n                                        {trip.duration} Days â€¢ {trip.country}\r\n                                    </div>\r\n                                    <div style={{ fontWeight: '600', color: 'var(--primary)' }}>\r\n                                        â‚¹{trip.cost?.toLocaleString()}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <div className={styles.card} style={{ padding: '2rem', textAlign: 'center', minHeight: '300px', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center' }}>\r\n                        <div style={{ fontSize: '3rem', marginBottom: '1rem' }}>âœˆï¸</div>\r\n                        <h3>No Saved Trips Yet</h3>\r\n                        <p style={{ color: '#64748b', marginBottom: '2rem' }}>Start planning your next adventure today.</p>\r\n                        <button\r\n                            className={styles.nextBtn}\r\n                            onClick={() => navigate('/plan-trip')}\r\n                        >\r\n                            Plan a New Trip\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DashboardPage;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\pages\\trips\\TripPlannerPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'isAiDestDecide' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":92,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":92,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"isAiDestDecide"},"fix":{"range":[4694,4708],"text":""},"desc":"Remove unused variable 'isAiDestDecide'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setIsAiDestDecide' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":92,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":92,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"setIsAiDestDecide"},"fix":{"range":[4708,4727],"text":""},"desc":"Remove unused variable 'setIsAiDestDecide'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'handleAISelectRegions' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":629,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":629,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleAISelectRegions"},"fix":{"range":[30521,32849],"text":""},"desc":"Remove unused variable 'handleAISelectRegions'."}]}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'checkAndFetchData'. Either include it or remove the dependency array.","line":172,"column":8,"nodeType":"ArrayExpression","endLine":172,"endColumn":48,"suggestions":[{"desc":"Update the dependencies array to be: [step, selectedStates, isAiRegionDecide, checkAndFetchData]","fix":{"range":[7917,7957],"text":"[step, selectedStates, isAiRegionDecide, checkAndFetchData]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'countryParam', 'getStatesForCountry', and 'setSearchParams'. Either include them or remove the dependency array.","line":267,"column":8,"nodeType":"ArrayExpression","endLine":267,"endColumn":48,"suggestions":[{"desc":"Update the dependencies array to be: [selectedCountry, regions, destinations, getStatesForCountry, countryParam, setSearchParams]","fix":{"range":[12125,12165],"text":"[selectedCountry, regions, destinations, getStatesForCountry, countryParam, setSearchParams]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate, useSearchParams } from 'react-router-dom';\r\nimport { useAuth } from '../../context/AuthContext.jsx';\r\nimport { ChevronLeft, ChevronRight, Check, MapPin, Star, Sparkles, ExternalLink, Calendar, Users, Search, ArrowUp, ArrowDown, X, Plus, Share2 } from 'lucide-react';\r\nimport { TripAI } from '../../services/TripAI';\r\nimport { API_BASE_URL } from '../../config';\r\nimport AddDestinationModal from '../../components/AddDestinationModal/AddDestinationModal';\r\nimport DateSelectionModal from '../../components/TripPlanner/DateSelectionModal';\r\nimport DestinationCard from '../../components/TripPlanner/DestinationCard';\r\nimport ModernItineraryView from '../../components/TripPlanner/ModernItineraryView';\r\nimport BudgetSelectionModal from '../../components/TripPlanner/BudgetSelectionModal';\r\nimport ChatWidget from '../../components/ChatWidget/ChatWidget';\r\nimport TripOptions from '../../components/TripPlanner/TripOptions';\r\nimport AIDestinationDetailsModal from '../../components/TripPlanner/AIDestinationDetailsModal';\r\nimport { Skeleton, DestinationCardSkeleton } from '../../components/Skeleton/Skeleton';\r\nimport styles from './TripPlanner.module.css';\r\n\r\n\r\n\r\nconst TripPlannerPage = () => {\r\n    const [searchParams, setSearchParams] = useSearchParams();\r\n    const step = parseInt(searchParams.get('step') || '1');\r\n    const countryParam = searchParams.get('country') || null;\r\n    const regionsParam = searchParams.get('regions') || null;\r\n\r\n    const setStep = (newStep) => {\r\n        const params = { step: newStep.toString() };\r\n        if (selectedCountry) params.country = selectedCountry;\r\n        if (selectedStates.length > 0) params.regions = selectedStates.join(',');\r\n        setSearchParams(params);\r\n    };\r\n\r\n    const { token } = useAuth(); // Get token for saving trips\r\n    const navigate = useNavigate();\r\n    // const [step, setStep] = useState(1); // REPLACED by URL params\r\n    const [budgetModalOpen, setBudgetModalOpen] = useState(false);\r\n    const [showLoginPrompt, setShowLoginPrompt] = useState(false);\r\n    const [preferencesSet, setPreferencesSet] = useState(false); // Track if user has set trip preferences\r\n\r\n    // 3-phase loading state\r\n    const LOADING_PHASES = [\r\n        'âœ¨ AI is analyzing your preferences...',\r\n        'ðŸ—ºï¸ Optimizing routes and scheduling...',\r\n        'ðŸ’° Calculating costs and insights...'\r\n    ];\r\n    const [loadingPhase, setLoadingPhase] = useState(0);\r\n    const loadingIntervalRef = React.useRef(null);\r\n\r\n    // Feedback / Report Issue modal state\r\n    const [showFeedbackModal, setShowFeedbackModal] = useState(false);\r\n    const [feedbackType, setFeedbackType] = useState('Wrong prices');\r\n    const [feedbackDesc, setFeedbackDesc] = useState('');\r\n    const [feedbackSent, setFeedbackSent] = useState(false);\r\n\r\n    // Validation warnings from backend\r\n    const [validationWarnings, setValidationWarnings] = useState([]);\r\n    const [budgetAdjusted, setBudgetAdjusted] = useState(false);\r\n    const [warningDismissed, setWarningDismissed] = useState(false);\r\n\r\n\r\n    // Trip Context\r\n    const [tripContext, setTripContext] = useState({\r\n        budget: 50000,\r\n        days: 5,\r\n        style: 'Standard'\r\n    });\r\n    const [countries, setCountries] = useState([]);\r\n    const [destinations, setDestinations] = useState([]);\r\n    const [regions, setRegions] = useState([]);\r\n    const [selectedCountry, setSelectedCountry] = useState(countryParam);\r\n    const [selectedStates, setSelectedStates] = useState(regionsParam ? regionsParam.split(',') : []);\r\n    const [availableStates, setAvailableStates] = useState([]);\r\n    const [selectedDestinations, setSelectedDestinations] = useState([]);\r\n    const [itinerary, setItinerary] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [budget, setBudget] = useState(0);\r\n    const [insight, setInsight] = useState(null);\r\n    const [visibleCount, setVisibleCount] = useState(24);\r\n    const [tripOptions, setTripOptions] = useState([]);\r\n    const [aiRegionReasons, setAiRegionReasons] = useState({}); // { regionId: 'Reason...' }\r\n\r\n    // Search States\r\n    const [countrySearch, setCountrySearch] = useState('');\r\n    const [regionSearch, setRegionSearch] = useState('');\r\n    const [destSearch, setDestSearch] = useState('');\r\n    const [startLocation, setStartLocation] = useState('Mumbai'); // Default\r\n    const [isCustomLocation, setIsCustomLocation] = useState(false);\r\n    const [generatingAiSpots, setGeneratingAiSpots] = useState(false);\r\n\r\n    // AI Decision Flags\r\n    const [isAiRegionDecide, setIsAiRegionDecide] = useState(false);\r\n    const [isAiDestDecide, setIsAiDestDecide] = useState(false);\r\n\r\n    // OSM Search State\r\n    const [locationSuggestions, setLocationSuggestions] = useState([]);\r\n    const [isSearching, setIsSearching] = useState(false);\r\n\r\n    const START_LOCATIONS = [\r\n        'Mumbai', 'Delhi', 'Bangalore', 'Chennai', 'Kolkata',\r\n        'Hyderabad', 'Ahmedabad', 'Pune', 'Kochi', 'Jaipur'\r\n    ];\r\n\r\n    // Debounce helper for search\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            if (isCustomLocation && startLocation.length > 2) {\r\n                fetchLocations(startLocation);\r\n            }\r\n        }, 300);\r\n        return () => clearTimeout(timer);\r\n    }, [startLocation, isCustomLocation]);\r\n\r\n    const fetchLocations = async (query) => {\r\n        if (!query) return;\r\n        setIsSearching(true);\r\n        try {\r\n            const res = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&limit=5&addressdetails=1`);\r\n            const data = await res.json();\r\n            setLocationSuggestions(data);\r\n        } catch (err) {\r\n            console.error(\"Location search failed\", err);\r\n        } finally {\r\n            setIsSearching(false);\r\n        }\r\n    };\r\n\r\n    // Date Selection State\r\n    const [showDateModal, setShowDateModal] = useState(false);\r\n    const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n    const [detailsModalOpen, setDetailsModalOpen] = useState(false);\r\n    const [selectedDetailDest, setSelectedDetailDest] = useState(null);\r\n    const [travelDates, setTravelDates] = useState({ start: null, end: null });\r\n\r\n    // Fetch Initial Data\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const [countriesRes, destsRes, regionsRes] = await Promise.all([\r\n                    fetch(`${API_BASE_URL}/countries`, { headers: { 'X-Requested-With': 'XMLHttpRequest' } }),\r\n                    fetch(`${API_BASE_URL}/destinations`, { headers: { 'X-Requested-With': 'XMLHttpRequest' } }),\r\n                    fetch(`${API_BASE_URL}/regions`, { headers: { 'X-Requested-With': 'XMLHttpRequest' } })\r\n                ]);\r\n                const countriesData = await countriesRes.json();\r\n                const destsData = await destsRes.json();\r\n                const regionsData = await regionsRes.json();\r\n\r\n                const enrichedCountries = countriesData.map(c => ({\r\n                    ...c,\r\n                    id: c.code, // Map code to id for frontend compatibility\r\n                    available: true // Assuming all in DB are available\r\n                }));\r\n\r\n                setCountries(enrichedCountries);\r\n                setDestinations(destsData);\r\n                setRegions(regionsData);\r\n            } catch (error) {\r\n                console.error(\"Failed to fetch data:\", error);\r\n            }\r\n        };\r\n        fetchData();\r\n    }, []);\r\n\r\n    // Lazy Load Data\r\n    const [fetchingRegion, setFetchingRegion] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if ((step === 3 || step === 5)) {\r\n            if (selectedStates.length > 0 || isAiRegionDecide) {\r\n                checkAndFetchData();\r\n            }\r\n        }\r\n    }, [step, selectedStates, isAiRegionDecide]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    const checkAndFetchData = async () => {\r\n        let targets = [];\r\n\r\n        if (selectedStates.length > 0) {\r\n            targets = selectedStates;\r\n        } else if (isAiRegionDecide && availableStates.length > 0) {\r\n            // Pick top 3 available states to populate general data\r\n            targets = availableStates.slice(0, 3).map(s => s.id);\r\n        }\r\n\r\n        if (targets.length === 0) return;\r\n\r\n        console.log(\"Fetching live data for:\", targets);\r\n        setFetchingRegion(true);\r\n\r\n        try {\r\n            const countryObj = countries.find(c => c.id === selectedCountry);\r\n            const countryName = countryObj?.name || 'India';\r\n\r\n            // Collect selected state names\r\n            const stateNames = targets.map(stateId => {\r\n                const allRegions = [...(availableStates || []), ...(regions || [])];\r\n                const regionObj = allRegions.find(r => r.id === stateId || r.name === stateId || r.id === Number(stateId));\r\n                return regionObj?.name || stateId;\r\n            });\r\n\r\n            // Automatically prompt Gemini for recommendations based on these regions\r\n            console.log(`Auto-generating AI spots for regions: ${stateNames.join(', ')}...`);\r\n            const aiDestinations = await TripAI.recommendDestinations(countryName, stateNames, tripContext);\r\n\r\n            if (aiDestinations && aiDestinations.length > 0) {\r\n                setDestinations(prev => {\r\n                    const existingIds = new Set(prev.map(d => d.name));\r\n                    const newItems = aiDestinations.filter(d => !existingIds.has(d.name));\r\n                    return [...prev, ...newItems];\r\n                });\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Auto AI Gen failed for region:\", err);\r\n        } finally {\r\n            setFetchingRegion(false);\r\n        }\r\n    };\r\n\r\n    const getStatesForCountry = (countryId) => {\r\n        if (!countries || !regions || !destinations) return [];\r\n\r\n        // Find component country to get fallback image\r\n        const countryObj = countries.find(c => c.id === countryId);\r\n        // Safety: If country not found, use generic fallback\r\n        const fallbackImg = (countryObj && countryObj.image) ? countryObj.image : 'https://images.unsplash.com/photo-1469854523086-cc02fe5d8800';\r\n\r\n        // Filter regions by the selected country ID\r\n        const countryRegions = regions.filter(r => r.country === countryId);\r\n\r\n        return countryRegions.map(region => {\r\n            // Find a representative destination for this region to get an image\r\n            // We match destination.location (which is the region name) with region.name\r\n            const rep = destinations.find(d => d.location === region.name);\r\n            const count = destinations.filter(d => d.location === region.name).length;\r\n\r\n            // Prioritize explicit region image, then representative destination, then fallback\r\n            let imgUrl = region.image || (rep ? rep.image : fallbackImg);\r\n\r\n            return {\r\n                id: region.name,        // Used for selection state (string key)\r\n                numericId: region.id,   // Used for /populate API call (DB integer id)\r\n                name: region.name,\r\n                image: imgUrl,\r\n                desc: `${count} Destinations`\r\n            };\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0);\r\n    }, [step]);\r\n\r\n    useEffect(() => {\r\n        if (selectedCountry) {\r\n            setAvailableStates(getStatesForCountry(selectedCountry));\r\n            // Only clear selections if user explicitly changed country (not on initial mount from URL)\r\n            if (!countryParam || selectedCountry !== countryParam) {\r\n                setSelectedStates([]);\r\n                setSelectedDestinations([]);\r\n            }\r\n            // Keep URL in sync\r\n            setSearchParams(prev => {\r\n                const params = Object.fromEntries(prev.entries());\r\n                params.country = selectedCountry;\r\n                return params;\r\n            });\r\n        }\r\n    }, [selectedCountry, regions, destinations]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    // Fetch budget and insights when entering Step 5\r\n    useEffect(() => {\r\n        if (step === 5 && itinerary.length > 0) {\r\n            const fetchAIInsights = async () => {\r\n                const b = await TripAI.calculateBudget(itinerary);\r\n                const i = await TripAI.getSmartInsight(itinerary);\r\n                setBudget(b);\r\n                setInsight(i);\r\n            };\r\n            fetchAIInsights();\r\n        }\r\n    }, [step, itinerary]);\r\n\r\n    const handleStateToggle = (stateId) => {\r\n        if (selectedStates.includes(stateId)) {\r\n            setSelectedStates(selectedStates.filter(id => id !== stateId));\r\n        } else {\r\n            setSelectedStates([...selectedStates, stateId]);\r\n        }\r\n    };\r\n\r\n    const handleDestinationToggle = (destId) => {\r\n        if (selectedDestinations.includes(destId)) {\r\n            setSelectedDestinations(selectedDestinations.filter(id => id !== destId));\r\n        } else {\r\n            setSelectedDestinations([...selectedDestinations, destId]);\r\n        }\r\n    };\r\n\r\n    const generateItinerary = async () => {\r\n        setLoading(true);\r\n        setLoadingPhase(0);\r\n        setValidationWarnings([]);\r\n        setBudgetAdjusted(false);\r\n        setWarningDismissed(false);\r\n\r\n        // Cycle loading phase messages every 2.5 seconds\r\n        let phase = 0;\r\n        loadingIntervalRef.current = setInterval(() => {\r\n            phase = (phase + 1) % LOADING_PHASES.length;\r\n            setLoadingPhase(phase);\r\n        }, 2500);\r\n\r\n        // Prepare Preferences Context with all details\r\n        const countryObj = countries.find(c => c.id === selectedCountry);\r\n        const userPreferences = {\r\n            country: countryObj ? countryObj.name : 'Unknown',\r\n            duration: travelDates.duration || tripContext.days || 5,\r\n            budget: tripContext.budget,\r\n            style: tripContext.style,\r\n            startCity: startLocation,\r\n            // Travel date details\r\n            dateType: travelDates.type || 'anytime',\r\n            travelStartDate: travelDates.start ? travelDates.start.toISOString() : null,\r\n            travelEndDate: travelDates.end ? travelDates.end.toISOString() : null,\r\n            travelMonth: travelDates.month ? travelDates.month.toLocaleString('default', { month: 'long', year: 'numeric' }) : null,\r\n            // Interests from selected regions\r\n            interests: selectedStates.length > 0 ? selectedStates : []\r\n        };\r\n\r\n        // If no destinations selected, we rely on the backend \"Surprise Me\" mode (empty list)\r\n        // But if user manually selected, we send those.\r\n\r\n        try {\r\n            const data = await TripAI.generateItinerary(selectedDestinations, userPreferences);\r\n\r\n            // Capture validation warnings from backend\r\n            if (data.validation_warnings && data.validation_warnings.length > 0) {\r\n                setValidationWarnings(data.validation_warnings);\r\n            }\r\n            if (data.budget_adjusted) {\r\n                setBudgetAdjusted(true);\r\n            }\r\n\r\n            // NEW: Single Itinerary Object (Direct Mode)\r\n            if (data.itinerary && Array.isArray(data.itinerary)) {\r\n                if (data.itinerary.length === 0) {\r\n                    alert(\"The AI generated an empty itinerary. Please modify your preferences or destination choices and try again.\");\r\n                    setLoading(false);\r\n                    clearInterval(loadingIntervalRef.current);\r\n                    return;\r\n                }\r\n                setItinerary(data.itinerary);\r\n                setTripContext(prev => ({\r\n                    ...prev,\r\n                    title: data.trip_title || data.title,\r\n                    estimatedCost: data.total_cost,\r\n                    ai_perfect_reasons: data.ai_perfect_reasons || []\r\n                }));\r\n                setStep(5);\r\n            }\r\n            // OLD: Options Array (legacy)\r\n            else if (data.options && data.options.length > 0) {\r\n                setTripOptions(data.options);\r\n                setStep(4);\r\n            } else if (Array.isArray(data)) {\r\n                if (data.length === 0) {\r\n                    alert(\"The AI generated an empty itinerary. Please modify your preferences or destination choices and try again.\");\r\n                    setLoading(false);\r\n                    clearInterval(loadingIntervalRef.current);\r\n                    return;\r\n                }\r\n                setItinerary(data);\r\n                setStep(5);\r\n            } else if (data.error) {\r\n                console.warn('AI Service returned error:', data.error);\r\n                alert(`AI Generation Issue: ${data.error}\\n\\nPlease try again later or select destinations manually.`);\r\n                setLoading(false);\r\n                clearInterval(loadingIntervalRef.current);\r\n                return;\r\n            } else {\r\n                console.warn('Unexpected itinerary format', data);\r\n                alert('AI could not generate a valid itinerary for these preferences. Please try again with different settings.');\r\n                setLoading(false);\r\n                clearInterval(loadingIntervalRef.current);\r\n                return;\r\n            }\r\n\r\n            clearInterval(loadingIntervalRef.current);\r\n            setLoading(false);\r\n        } catch (error) {\r\n            console.error('Failed to generate itinerary', error);\r\n            clearInterval(loadingIntervalRef.current);\r\n            setLoading(false);\r\n            if (error.message?.includes('No destinations found') || error.message?.includes('404')) {\r\n                alert('No destinations found for your selection. Try selecting different regions or destinations manually.');\r\n            } else {\r\n                alert('Failed to generate itinerary. Please check your connection and try again.');\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleSubmitFeedback = async () => {\r\n        try {\r\n            await fetch(`${API_BASE_URL}/api/feedback`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    issue_type: feedbackType,\r\n                    description: feedbackDesc\r\n                })\r\n            });\r\n            setFeedbackSent(true);\r\n            setTimeout(() => {\r\n                setShowFeedbackModal(false);\r\n                setFeedbackSent(false);\r\n                setFeedbackDesc('');\r\n            }, 2000);\r\n        } catch (e) {\r\n            console.error('Feedback failed', e);\r\n        }\r\n    };\r\n\r\n    const handleDateApply = (dateData) => {\r\n        // dateData = { type, start, end, duration, month }\r\n        setTravelDates(dateData);\r\n    };\r\n\r\n    const renderStep1 = () => {\r\n        const filteredCountries = countries.filter(c =>\r\n            c.name.toLowerCase().includes(countrySearch.trim().toLowerCase())\r\n        );\r\n\r\n        return (\r\n            <>\r\n                <h2 className={styles.title}>Where to?</h2>\r\n                <p className={styles.subtitle}>Select a country or territory to start planning your adventure.</p>\r\n\r\n                {/* Start Location Selection */}\r\n                <div style={{ marginBottom: '2rem' }}>\r\n                    <div className={styles.sectionLabel}>\r\n                        <MapPin size={16} style={{ color: 'var(--primary)' }} /> Starting from\r\n                    </div>\r\n\r\n                    {!isCustomLocation ? (\r\n                        <div className={styles.locationScroll}>\r\n                            <button\r\n                                className={styles.locationChip}\r\n                                style={{ borderStyle: 'dashed', borderColor: 'var(--primary)', color: 'var(--primary)' }}\r\n                                onClick={() => {\r\n                                    setIsCustomLocation(true);\r\n                                    setStartLocation('');\r\n                                }}\r\n                            >\r\n                                + Other\r\n                            </button>\r\n                            {START_LOCATIONS.map(loc => (\r\n                                <button\r\n                                    key={loc}\r\n                                    className={`${styles.locationChip} ${startLocation === loc ? styles.active : ''}`}\r\n                                    onClick={() => setStartLocation(loc)}\r\n                                >\r\n                                    {loc}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    ) : (\r\n                        <div style={{ position: 'relative' }}>\r\n                            <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center' }}>\r\n                                <div className={styles.searchWrapper} style={{ margin: 0, flex: 1 }}>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        placeholder=\"Enter your city, town, or village...\"\r\n                                        value={startLocation}\r\n                                        onChange={(e) => setStartLocation(e.target.value)}\r\n                                        className={styles.searchInput}\r\n                                        autoFocus\r\n                                        style={{ paddingLeft: '1rem' }}\r\n                                    />\r\n                                    {isSearching && <div className={styles.loadingSpinner} />}\r\n                                </div>\r\n                                <button\r\n                                    className={styles.locationChip}\r\n                                    onClick={() => {\r\n                                        setIsCustomLocation(false);\r\n                                        setStartLocation('Mumbai');\r\n                                        setLocationSuggestions([]);\r\n                                    }}\r\n                                >\r\n                                    <X size={16} /> Cancel\r\n                                </button>\r\n                            </div>\r\n\r\n                            {/* Suggestions Dropdown */}\r\n                            {locationSuggestions.length > 0 && isCustomLocation && (\r\n                                <div className={styles.suggestionsDropdown}>\r\n                                    {locationSuggestions.map((place) => (\r\n                                        <div\r\n                                            key={place.place_id}\r\n                                            className={styles.suggestionItem}\r\n                                            onClick={() => {\r\n                                                setStartLocation(place.display_name.split(',')[0]); // Use just the main name\r\n                                                setLocationSuggestions([]); // Clear suggestions to close dropdown\r\n                                                // Keep in custom mode\r\n                                            }}\r\n                                        >\r\n                                            <MapPin size={14} color=\"#64748b\" />\r\n                                            <div>\r\n                                                <strong>{place.display_name.split(',')[0]}</strong>\r\n                                                <span style={{ fontSize: '0.8rem', color: '#94a3b8', display: 'block' }}>\r\n                                                    {place.display_name.split(',').slice(1).join(',')}\r\n                                                </span>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div className={styles.searchSection}>\r\n                    <div className={styles.searchWrapper}>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search locations...\"\r\n                            value={countrySearch}\r\n                            onChange={(e) => setCountrySearch(e.target.value)}\r\n                            className={styles.searchInput}\r\n                        />\r\n                        <Search size={20} className={styles.searchIcon} />\r\n                    </div>\r\n                    <div className={styles.countBadge}>\r\n                        <Check size={16} strokeWidth={3} />\r\n                        {filteredCountries.length} Locations\r\n                    </div>\r\n                </div>\r\n\r\n                <div className={styles.grid} style={{ marginTop: '1rem' }}>\r\n                    {countries.length === 0 ? (\r\n                        Array.from({ length: 8 }).map((_, i) => (\r\n                            <div key={`sk-country-${i}`} className={styles.card} style={{ height: '300px', padding: 0 }}>\r\n                                <Skeleton height=\"220px\" style={{ borderBottomLeftRadius: 0, borderBottomRightRadius: 0 }} />\r\n                                <div className={styles.cardContent}>\r\n                                    <Skeleton width=\"60%\" height=\"24px\" />\r\n                                </div>\r\n                            </div>\r\n                        ))\r\n                    ) : (\r\n                        filteredCountries.map(country => (\r\n                            <div\r\n                                key={country.id}\r\n                                className={`${styles.card} ${selectedCountry === country.id ? styles.selected : ''}`}\r\n                                onClick={() => setSelectedCountry(country.id)}\r\n                                style={{ opacity: country.available ? 1 : 0.6 }}\r\n                            >\r\n                                <div style={{ position: 'relative' }}>\r\n                                    <img\r\n                                        src={country.image || 'https://images.unsplash.com/photo-1488646953014-85cb44e25828?auto=format&fit=crop&q=80&w=800'}\r\n                                        alt={country.name}\r\n                                        className={styles.cardImage}\r\n                                    />\r\n                                    {selectedCountry === country.id && <div className={styles.checkIcon}><Check size={16} /></div>}\r\n                                    {!country.available && (\r\n                                        <div style={{\r\n                                            position: 'absolute', inset: 0, background: 'rgba(255,255,255,0.7)',\r\n                                            display: 'flex', alignItems: 'center', justifyContent: 'center', fontWeight: 'bold'\r\n                                        }}>\r\n                                            Coming Soon\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                                <div className={styles.cardContent}>\r\n                                    <div className={styles.cardTitle}>{country.name}</div>\r\n                                </div>\r\n                            </div>\r\n                        )))}\r\n                </div>\r\n\r\n                <div className={styles.actions} style={{ justifyContent: 'flex-end' }}>\r\n                    <div style={{ display: 'flex', gap: '1rem' }}>\r\n                        <button\r\n                            className={styles.secondaryBtn}\r\n                            onClick={() => setBudgetModalOpen(true)}\r\n                            style={{ border: '1px solid #cbd5e1' }}\r\n                        >\r\n                            <span style={{ marginRight: '5px' }}>ðŸ’°</span> Set Budget\r\n                        </button>\r\n                        <button\r\n                            className={styles.secondaryBtn}\r\n                            onClick={() => setShowDateModal(true)}\r\n                            style={{ border: '1px solid #cbd5e1' }}\r\n                        >\r\n                            <Calendar size={18} style={{ display: 'inline', marginRight: '5px' }} />\r\n                            {(() => {\r\n                                if (travelDates.type === 'flexible' && travelDates.month) {\r\n                                    return `${travelDates.month.toLocaleDateString('en-US', { month: 'short', year: 'numeric' })} (${travelDates.duration} days)`;\r\n                                }\r\n                                if (travelDates.type === 'anytime') {\r\n                                    return `Anytime (${travelDates.duration} days)`;\r\n                                }\r\n                                // Default/Fixed\r\n                                if (travelDates.start) {\r\n                                    return `${travelDates.start.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })} - ${travelDates.end ? travelDates.end.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }) : '...'}`;\r\n                                }\r\n                                return 'Date of Travel';\r\n                            })()}\r\n                        </button>\r\n                        <button\r\n                            id=\"next-step-btn\"\r\n                            className={styles.nextBtn}\r\n                            disabled={!selectedCountry || !countries.find(c => c.id === selectedCountry)?.available || !preferencesSet || !travelDates.type}\r\n                            onClick={() => {\r\n                                setStep(2);\r\n                                setCountrySearch('');\r\n                            }}\r\n                        >\r\n                            Next Step <ChevronRight size={18} style={{ display: 'inline', marginLeft: '5px' }} />\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        );\r\n    };\r\n\r\n    const renderStep2 = () => {\r\n        const filteredStates = availableStates.filter(s =>\r\n            s.name.toLowerCase().includes(regionSearch.trim().toLowerCase())\r\n        );\r\n\r\n        const handleAISelectRegions = async () => {\r\n            const btn = document.getElementById('ai-region-btn');\r\n            if (btn) {\r\n                btn.innerText = \"Consulting Experts...\";\r\n                btn.disabled = true;\r\n            }\r\n\r\n            try {\r\n                const aiSuggestions = await TripAI.recommendRegions(selectedCountry);\r\n                // aiSuggestions = [{ name, reason }]\r\n\r\n                const matchedIds = [];\r\n                const reasonMap = {};\r\n\r\n                aiSuggestions.forEach(sug => {\r\n                    // Match name to availableStates\r\n                    const match = availableStates.find(state => state.name.toLowerCase().includes(sug.name.toLowerCase()) || sug.name.toLowerCase().includes(state.name.toLowerCase()));\r\n                    if (match) {\r\n                        matchedIds.push(match.id);\r\n                        reasonMap[match.id] = sug.reason;\r\n                    }\r\n                });\r\n\r\n                if (matchedIds.length > 0) {\r\n                    setSelectedStates(matchedIds);\r\n                    setAiRegionReasons(reasonMap);\r\n                } else {\r\n                    // Fallback if AI names don't match our DB (rare but possible)\r\n                    if (availableStates.length > 0) {\r\n                        const shuffled = [...availableStates].sort(() => 0.5 - Math.random());\r\n                        const selected = shuffled.slice(0, 2).map(s => s.id);\r\n                        setSelectedStates(selected);\r\n                        alert(\"AI couldn't find exact matches in our database, so we picked some popular favorites!\");\r\n                    }\r\n                }\r\n\r\n            } catch (e) {\r\n                console.error(\"AI Region Select Failed\", e);\r\n            } finally {\r\n                if (btn) {\r\n                    btn.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z\"/></svg> Let AI Decide';\r\n                    btn.disabled = false;\r\n                }\r\n            }\r\n        };\r\n\r\n        return (\r\n            <>\r\n                <h2 className={styles.title}>Select Regions</h2>\r\n                <p className={styles.subtitle}>Which places would you like to visit? You can select multiple.</p>\r\n\r\n                <div className={styles.searchSection}>\r\n                    <div className={styles.searchWrapper}>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search regions...\"\r\n                            value={regionSearch}\r\n                            onChange={(e) => setRegionSearch(e.target.value)}\r\n                            className={styles.searchInput}\r\n                        />\r\n                        <Search size={20} className={styles.searchIcon} />\r\n                    </div>\r\n                    <div className={styles.countBadge}>\r\n                        <MapPin size={16} strokeWidth={3} />\r\n                        {filteredStates.length} Regions\r\n                    </div>\r\n                </div>\r\n\r\n                {/* AI Decide Checkbox */}\r\n                <div style={{ display: 'flex', justifyContent: 'flex-end', marginBottom: '1rem' }}>\r\n                    <label style={{ display: 'flex', alignItems: 'center', gap: '8px', cursor: 'pointer', padding: '0.5rem 1rem', background: '#f8fafc', borderRadius: '50px', border: '1px solid #e2e8f0', transition: 'all 0.2s' }}>\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            checked={isAiRegionDecide}\r\n                            onChange={(e) => {\r\n                                setIsAiRegionDecide(e.target.checked);\r\n                                if (e.target.checked) {\r\n                                    setSelectedStates([]);\r\n                                    setAiRegionReasons({});\r\n                                }\r\n                            }}\r\n                            style={{ width: '16px', height: '16px', accentColor: 'var(--primary)' }}\r\n                        />\r\n                        <Sparkles size={16} fill={isAiRegionDecide ? \"#fbbf24\" : \"none\"} color={isAiRegionDecide ? \"#fbbf24\" : \"#94a3b8\"} />\r\n                        <span style={{ fontSize: '0.9rem', fontWeight: '500', color: isAiRegionDecide ? '#0f172a' : '#64748b' }}>\r\n                            Let AI Decide Regions\r\n                        </span>\r\n                    </label>\r\n                </div>\r\n\r\n                {/* Numbered Selection Section for Regions */}\r\n                {selectedStates.length > 0 && (\r\n                    <div className={styles.selectionSection}>\r\n                        <div className={styles.selectionHeader}>\r\n                            <span>Your Selections ({selectedStates.length})</span>\r\n                            <span style={{ fontSize: '0.8rem', cursor: 'pointer', color: 'var(--primary)' }} onClick={() => { setSelectedStates([]); setAiRegionReasons({}); }}>Clear All</span>\r\n                        </div>\r\n                        <div className={styles.selectionList}>\r\n                            {selectedStates.map((id, idx) => {\r\n                                const item = availableStates.find(s => s.id === id);\r\n                                const reason = aiRegionReasons[id];\r\n                                return item ? (\r\n                                    <div key={id} className={styles.selectionChip} style={{ flexDirection: 'column', alignItems: 'flex-start', gap: '4px' }}>\r\n                                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                                            <span className={styles.index}>{idx + 1}</span>\r\n                                            {item.name}\r\n                                        </div>\r\n                                        {reason && (\r\n                                            <div style={{ fontSize: '0.75rem', color: '#64748b', fontStyle: 'italic', marginLeft: '28px' }}>\r\n                                                \" {reason} \"\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                ) : null;\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                <div className={styles.grid} style={{ marginTop: '1rem' }}>\r\n                    {filteredStates.length > 0 ? (\r\n                        filteredStates.map(state => (\r\n                            <div\r\n                                key={state.id}\r\n                                className={`${styles.card} ${selectedStates.includes(state.id) ? styles.selected : ''}`}\r\n                                onClick={() => handleStateToggle(state.id)}\r\n                            >\r\n                                <div style={{ position: 'relative' }}>\r\n                                    <img src={state.image} alt={state.name} className={styles.cardImage} />\r\n                                    {selectedStates.includes(state.id) && <div className={styles.checkIcon}><Check size={20} /></div>}\r\n                                </div>\r\n                                <div className={styles.cardContent}>\r\n                                    <div className={styles.cardTitle}>{state.name}</div>\r\n                                    <div className={styles.cardDesc}>{state.desc}</div>\r\n                                    {/* Inline reason display if we want it on card too */}\r\n                                    {aiRegionReasons[state.id] && (\r\n                                        <div style={{ marginTop: '0.5rem', fontSize: '0.8rem', color: 'var(--primary)', fontWeight: '500' }}>\r\n                                            Recommended: {aiRegionReasons[state.id]}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        ))\r\n                    ) : (\r\n                        <div className={styles.emptyState}>\r\n                            <MapPin size={48} strokeWidth={1} />\r\n                            <div className={styles.emptyTitle}>No Regions Found</div>\r\n                            <p>We couldn't find any regions matching \"{regionSearch}\".</p>\r\n                            <button onClick={() => setRegionSearch('')} className={styles.viewDetailsBtn} style={{ marginTop: '1rem' }}>\r\n                                Clear Search\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div className={styles.actions}>\r\n                    <button className={styles.backBtn} onClick={() => setStep(step - 1)}>\r\n                        <ChevronLeft size={18} /> Back\r\n                    </button>\r\n                    <button\r\n                        id=\"next-step-btn\"\r\n                        className={styles.nextBtn}\r\n                        disabled={selectedStates.length === 0 && !isAiRegionDecide}\r\n                        onClick={() => {\r\n                            setStep(3);\r\n                            setRegionSearch('');\r\n                        }}\r\n                    >\r\n                        Next Step <ChevronRight size={18} style={{ display: 'inline', marginLeft: '5px' }} />\r\n                    </button>\r\n                </div>\r\n            </>\r\n        );\r\n    };\r\n\r\n    const renderStep3 = () => {\r\n        // First filter by selected regions\r\n\r\n        // 3. Filter Destinations based on Selected States & Search\r\n        // Robust Filter: Map selected keys (which might be names \"Assam\") to IDs (251)\r\n        const regionFiltered = destinations.filter(d => {\r\n            // Only show AI generated or newly added spots (skip static DB ones)\r\n            if (!d.isAiGenerated && !d.isNewUserAdded) return false;\r\n\r\n            // If AI decides regions, allow any destination from available states in this country\r\n            if (isAiRegionDecide) {\r\n                return availableStates.some(state =>\r\n                    String(state.id) === String(d.state_id) ||\r\n                    state.name === d.location\r\n                );\r\n            }\r\n\r\n            // Otherwise match against selected states\r\n            return selectedStates.some(key => {\r\n                // If key matches state_id directly\r\n                if (String(key) === String(d.state_id)) return true;\r\n                // If key is a Name, look it up in 'regions' list\r\n                const region = regions.find(r => r.name === key);\r\n                return region && String(region.id) === String(d.state_id);\r\n            });\r\n        });\r\n\r\n        const filtered = regionFiltered.filter(d =>\r\n            d.name.toLowerCase().includes(destSearch.trim().toLowerCase()) ||\r\n            d.desc.toLowerCase().includes(destSearch.trim().toLowerCase())\r\n        );\r\n\r\n\r\n        const trending = filtered.filter(d => d.rating >= 4.8);\r\n        const others = filtered.filter(d => d.rating < 4.8);\r\n\r\n        // Pagination Logic\r\n        const displayedDestinations = destSearch ? filtered.slice(0, visibleCount) : filtered;\r\n        const hasMore = destSearch ? filtered.length > visibleCount : false;\r\n\r\n        return (\r\n            <>\r\n                <h2 className={styles.title}>Pick your Destinations</h2>\r\n                <p className={styles.subtitle}>Select the specific spots you want to include in your trip.</p>\r\n\r\n                <div className={styles.searchSection}>\r\n                    <div className={styles.searchWrapper}>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search destinations...\"\r\n                            value={destSearch}\r\n                            onChange={(e) => setDestSearch(e.target.value)}\r\n                            className={styles.searchInput}\r\n                        />\r\n                        <Search size={20} className={styles.searchIcon} />\r\n                    </div>\r\n                    <div className={styles.countBadge}>\r\n                        <Sparkles size={16} strokeWidth={3} />\r\n                        {filtered.length} Open\r\n                    </div>\r\n\r\n                    <button\r\n                        className={styles.addBtn}\r\n                        onClick={() => {\r\n                            if (!token) {\r\n                                setShowLoginPrompt(true);\r\n                            } else {\r\n                                setIsAddModalOpen(true);\r\n                            }\r\n                        }}\r\n                        title={token ? \"Suggest a destination\" : \"Login to suggest a destination\"}\r\n                    >\r\n                        <Plus size={24} strokeWidth={2.5} />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* AI Decide Checkbox for Destinations */}\r\n                {/* AI Generate Spots Button */}\r\n                <div style={{ display: 'flex', justifyContent: 'flex-end', marginBottom: '1rem', gap: '0.5rem' }}>\r\n                    <button\r\n                        onClick={async () => {\r\n                            if (generatingAiSpots) return;\r\n                            setGeneratingAiSpots(true);\r\n                            try {\r\n                                const countryObj = countries.find(c => c.id === selectedCountry);\r\n                                const stateNames = selectedStates.map(id => availableStates.find(s => s.id === id)?.name || id);\r\n                                const aiDestinations = await TripAI.recommendDestinations(countryObj?.name || 'India', stateNames, tripContext);\r\n\r\n                                if (aiDestinations && aiDestinations.length > 0) {\r\n                                    // Add to main destinations list so they show up\r\n                                    setDestinations(prev => {\r\n                                        const existingIds = new Set(prev.map(d => d.name));\r\n                                        const newItems = aiDestinations.filter(d => !existingIds.has(d.name));\r\n                                        return [...prev, ...newItems];\r\n                                    });\r\n                                    // Select them\r\n                                    setSelectedDestinations(aiDestinations.map(d => d.id));\r\n                                } else {\r\n                                    alert(\"AI couldn't find spots right now. Please select manually.\");\r\n                                }\r\n                            } catch (e) {\r\n                                console.error(\"AI spots error\", e);\r\n                                alert(\"Failed to fetch AI spots.\");\r\n                            } finally {\r\n                                setGeneratingAiSpots(false);\r\n                            }\r\n                        }}\r\n                        disabled={generatingAiSpots}\r\n                        style={{\r\n                            display: 'flex', alignItems: 'center', gap: '8px', cursor: generatingAiSpots ? 'wait' : 'pointer',\r\n                            padding: '0.75rem 1.25rem',\r\n                            background: '#eff6ff',\r\n                            borderRadius: '50px',\r\n                            border: '2px solid #3b82f6',\r\n                            transition: 'all 0.2s',\r\n                            boxShadow: '0 4px 6px -1px rgba(59, 130, 246, 0.1), 0 2px 4px -1px rgba(59, 130, 246, 0.06)'\r\n                        }}\r\n                    >\r\n                        <Sparkles size={18} fill=\"#3b82f6\" color=\"#3b82f6\" className={generatingAiSpots ? styles.pulse : ''} />\r\n                        <span style={{ fontSize: '0.95rem', fontWeight: '600', color: '#1e40af' }}>\r\n                            {generatingAiSpots ? \"AI is gathering data...\" : \"Let AI Generate Spots\"}\r\n                        </span>\r\n                    </button>\r\n                </div>\r\n\r\n\r\n\r\n\r\n\r\n                {/* Persistent Loading Indicator */}\r\n                {\r\n                    fetchingRegion && (\r\n                        <div style={{\r\n                            background: '#eff6ff',\r\n                            border: '1px solid #bfdbfe',\r\n                            borderRadius: '16px',\r\n                            padding: '1rem',\r\n                            marginBottom: '2rem',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '1rem',\r\n                            animation: 'slideDown 0.3s ease-out'\r\n                        }}>\r\n                            <div style={{ position: 'relative', width: '32px', height: '32px', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                                <div className={styles.radarEffect} style={{ position: 'absolute', width: '100%', height: '100%', border: '2px solid #3b82f6', opacity: 0.5 }}></div>\r\n                                <Sparkles size={20} className={styles.pulse} color=\"#3b82f6\" />\r\n                            </div>\r\n                            <div>\r\n                                <div style={{ fontWeight: '700', color: '#1e40af', fontSize: '0.95rem' }}>Scanning Satellite Data in Progress...</div>\r\n                                <div style={{ fontSize: '0.85rem', color: '#3b82f6' }}>Found {destinations.length} spots so far. Still searching...</div>\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                }\r\n\r\n                {/* Numbered Selection Section for Destinations */}\r\n                {\r\n                    selectedDestinations.length > 0 && (\r\n                        <div className={styles.selectionSection}>\r\n                            <div className={styles.selectionHeader}>\r\n                                <span>Your Itinerary List ({selectedDestinations.length})</span>\r\n                                <span style={{ fontSize: '0.8rem', cursor: 'pointer', color: 'var(--primary)' }} onClick={() => setSelectedDestinations([])}>Clear All</span>\r\n                            </div>\r\n                            <div className={styles.selectionList}>\r\n                                {selectedDestinations.map((id, idx) => {\r\n                                    const item = destinations.find(d => d.id === id);\r\n                                    return item ? (\r\n                                        <div key={id} className={styles.selectionChip}>\r\n                                            <span className={styles.index}>{idx + 1}</span>\r\n                                            {item.name}\r\n                                        </div>\r\n                                    ) : null;\r\n                                })}\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                }\r\n\r\n                {\r\n                    destSearch ? (\r\n                        <div className={styles.grid}>\r\n                            {displayedDestinations.length > 0 ? (\r\n                                <>\r\n                                    {displayedDestinations.map(dest => (\r\n                                        <DestinationCard\r\n                                            key={dest.id}\r\n                                            dest={dest}\r\n                                            isSelected={selectedDestinations.includes(dest.id)}\r\n                                            onToggle={handleDestinationToggle}\r\n                                            onViewDetails={(d) => navigate(`/destination/${d.id}`)}\r\n                                        />\r\n                                    ))}\r\n                                    {hasMore && (\r\n                                        <div style={{ gridColumn: '1 / -1', display: 'flex', justifyContent: 'center', marginTop: '2rem' }}>\r\n                                            <button\r\n                                                onClick={() => setVisibleCount(prev => prev + 24)}\r\n                                                className={styles.viewDetailsBtn}\r\n                                                style={{ padding: '0.75rem 2rem', fontSize: '1rem' }}\r\n                                            >\r\n                                                Show More Results\r\n                                            </button>\r\n                                        </div>\r\n                                    )}\r\n                                </>\r\n                            ) : (\r\n                                <div className={styles.emptyState}>\r\n                                    <div className={styles.emptyTitle}>No Matches</div>\r\n                                    <p>We couldn't find any destinations matching \"{destSearch}\".</p>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    ) : (\r\n                        <>\r\n                            {/* LOCAL MATCHES */}\r\n                            {filtered.length > 0 ? (\r\n                                <>\r\n                                    {trending.length > 0 && (\r\n                                        <>\r\n                                            <div className={styles.sectionHeader}><Sparkles size={20} color=\"#fbbf24\" /> Trending in Region</div>\r\n                                            <div className={styles.grid}>\r\n                                                {trending.map(dest => (\r\n                                                    <DestinationCard\r\n                                                        key={dest.id}\r\n                                                        dest={dest}\r\n                                                        isSelected={selectedDestinations.includes(dest.id)}\r\n                                                        onToggle={handleDestinationToggle}\r\n                                                        onViewDetails={(d) => { setSelectedDetailDest(d); setDetailsModalOpen(true); }}\r\n                                                    />\r\n                                                ))}\r\n                                            </div>\r\n                                        </>\r\n                                    )}\r\n                                    {others.length > 0 && (\r\n                                        <>\r\n                                            <div className={styles.sectionHeader}><MapPin size={20} color=\"#64748b\" /> More in Region</div>\r\n                                            <div className={styles.grid}>\r\n                                                {others.slice(0, visibleCount).map(dest => (\r\n                                                    <DestinationCard\r\n                                                        key={dest.id}\r\n                                                        dest={dest}\r\n                                                        isSelected={selectedDestinations.includes(dest.id)}\r\n                                                        onToggle={handleDestinationToggle}\r\n                                                        onViewDetails={(d) => { setSelectedDetailDest(d); setDetailsModalOpen(true); }}\r\n                                                    />\r\n                                                ))}\r\n                                                {others.length > visibleCount && (\r\n                                                    <div style={{ gridColumn: '1 / -1', display: 'flex', justifyContent: 'center', marginTop: '2rem' }}>\r\n                                                        <button\r\n                                                            onClick={() => setVisibleCount(prev => prev + 24)}\r\n                                                            className={styles.viewDetailsBtn}\r\n                                                            style={{ padding: '0.75rem 2rem', fontSize: '1rem' }}\r\n                                                        >\r\n                                                            Show More Results\r\n                                                        </button>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                        </>\r\n                                    )}\r\n                                </>\r\n                            ) : (\r\n                                /* GLOBAL FALLBACK or LOADING */\r\n                                <div className={styles.emptyState}>\r\n                                    {fetchingRegion ? (\r\n                                        <div className={styles.grid} style={{ width: '100%', textAlign: 'left', marginTop: '1rem' }}>\r\n                                            {Array.from({ length: 6 }).map((_, i) => (\r\n                                                <DestinationCardSkeleton key={`sk-dest-${i}`} />\r\n                                            ))}\r\n                                        </div>\r\n                                    ) : (\r\n                                        <>\r\n                                            <Sparkles size={48} strokeWidth={1} style={{ color: '#fbbf24' }} />\r\n                                            <div className={styles.emptyTitle}>AI is analyzing your preferences...</div>\r\n                                            <p style={{ maxWidth: '400px', margin: '0 auto 1.5rem' }}>\r\n                                                If you don't see results soon, click the \"Let AI Generate Spots\" button above.\r\n                                            </p>\r\n                                        </>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                        </>\r\n                    )\r\n                }\r\n\r\n                <div className={styles.actions}>\r\n                    <button className={styles.backBtn} onClick={() => setStep(step - 1)}>\r\n                        <ChevronLeft size={18} /> Back\r\n                    </button>\r\n                    <div className={styles.actionButtonsGroup}>\r\n\r\n                        <button\r\n                            id=\"next-step-btn\"\r\n                            className={styles.nextBtn}\r\n                            disabled={selectedDestinations.length === 0}\r\n                            onClick={generateItinerary}\r\n                            style={{ flex: '1 1 auto', minWidth: '140px' }}\r\n                        >\r\n                            {loading ? LOADING_PHASES[loadingPhase] : 'Generate AI Plan'} <Sparkles size={18} style={{ display: 'inline', marginLeft: '5px' }} />\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <DateSelectionModal\r\n                    isOpen={showDateModal}\r\n                    onClose={() => setShowDateModal(false)}\r\n                    onApply={handleDateApply}\r\n                />\r\n\r\n\r\n\r\n\r\n\r\n                <AddDestinationModal\r\n                    isOpen={isAddModalOpen}\r\n                    onClose={() => setIsAddModalOpen(false)}\r\n                    onSubmit={(newDest) => {\r\n                        setDestinations(prev => [newDest, ...prev]);\r\n                        setSelectedDestinations(prev => [...prev, newDest.id]);\r\n                    }}\r\n                    selectedRegionId={selectedStates[0] ?\r\n                        (regions.find(r => r.name === selectedStates[0])?.id || selectedStates[0])\r\n                        : null\r\n                    }\r\n                />\r\n            </>\r\n        );\r\n    };\r\n\r\n    const renderStep4 = () => {\r\n        return (\r\n            <TripOptions\r\n                options={tripOptions}\r\n                onSelectOption={(opt) => {\r\n                    setItinerary(opt.itinerary);\r\n                    setStep(5);\r\n                }}\r\n                onCustomize={(opt) => {\r\n                    setItinerary(opt.itinerary);\r\n                    setStep(5);\r\n                }}\r\n            />\r\n        );\r\n    };\r\n\r\n    const renderStep5 = () => {\r\n        return (\r\n            <>\r\n                {/* Page Header */}\r\n                <h2 className={styles.title}>Your Smart Itinerary</h2>\r\n                <p className={styles.subtitle}>An AI-optimized travel plan curated just for you</p>\r\n\r\n                {/* Validation Warning Banner */}\r\n                {(validationWarnings.length > 0 || budgetAdjusted) && !warningDismissed && (\r\n                    <div style={{\r\n                        background: 'linear-gradient(135deg, #fffbeb, #fef3c7)',\r\n                        border: '1.5px solid #f59e0b',\r\n                        borderRadius: '16px',\r\n                        padding: '1rem 1.25rem',\r\n                        marginBottom: '1.5rem',\r\n                        display: 'flex',\r\n                        alignItems: 'flex-start',\r\n                        gap: '0.75rem',\r\n                        boxShadow: '0 4px 12px rgba(245, 158, 11, 0.12)'\r\n                    }}>\r\n                        <span style={{ fontSize: '1.3rem', lineHeight: 1 }}>âš ï¸</span>\r\n                        <div style={{ flex: 1 }}>\r\n                            {budgetAdjusted && (\r\n                                <div style={{ fontWeight: '700', color: '#92400e', marginBottom: '0.25rem' }}>\r\n                                    This itinerary was adjusted to fit your budget.\r\n                                </div>\r\n                            )}\r\n                            {validationWarnings.map((w, i) => (\r\n                                <div key={i} style={{ fontSize: '0.88rem', color: '#78350f', lineHeight: 1.5 }}>{w}</div>\r\n                            ))}\r\n                        </div>\r\n                        <button\r\n                            onClick={() => setWarningDismissed(true)}\r\n                            style={{ background: 'none', border: 'none', cursor: 'pointer', color: '#92400e', fontWeight: '700', fontSize: '1rem', lineHeight: 1 }}\r\n                            aria-label=\"Dismiss warning\"\r\n                        >âœ•</button>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Feedback / Report Issue Modal */}\r\n                {showFeedbackModal && (\r\n                    <div style={{\r\n                        position: 'fixed', inset: 0, background: 'rgba(0,0,0,0.5)',\r\n                        zIndex: 9999, display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                        padding: '1rem'\r\n                    }}>\r\n                        <div style={{\r\n                            background: 'white', borderRadius: '24px', padding: '2rem',\r\n                            maxWidth: '480px', width: '100%', boxShadow: '0 25px 50px rgba(0,0,0,0.2)'\r\n                        }}>\r\n                            {feedbackSent ? (\r\n                                <div style={{ textAlign: 'center', padding: '2rem 0' }}>\r\n                                    <div style={{ fontSize: '3rem' }}>ðŸ™</div>\r\n                                    <div style={{ fontWeight: '700', fontSize: '1.2rem', margin: '1rem 0 0.5rem' }}>Thank you!</div>\r\n                                    <div style={{ color: '#64748b' }}>Your feedback helps us improve the AI.</div>\r\n                                </div>\r\n                            ) : (\r\n                                <>\r\n                                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1.5rem' }}>\r\n                                        <h3 style={{ margin: 0, fontSize: '1.2rem', fontWeight: '700' }}>Report an Issue</h3>\r\n                                        <button onClick={() => setShowFeedbackModal(false)} style={{ background: 'none', border: 'none', cursor: 'pointer', fontSize: '1.25rem', color: '#64748b' }}>âœ•</button>\r\n                                    </div>\r\n                                    <div style={{ marginBottom: '1rem' }}>\r\n                                        <label style={{ display: 'block', fontWeight: '600', marginBottom: '0.5rem', fontSize: '0.9rem', color: '#374151' }}>Issue Type</label>\r\n                                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '0.5rem' }}>\r\n                                            {['Wrong prices', 'Impossible schedule', 'Generic names', 'Other'].map(type => (\r\n                                                <button\r\n                                                    key={type}\r\n                                                    onClick={() => setFeedbackType(type)}\r\n                                                    style={{\r\n                                                        padding: '0.6rem 1rem', borderRadius: '12px', border: '1.5px solid',\r\n                                                        borderColor: feedbackType === type ? 'var(--primary)' : '#e2e8f0',\r\n                                                        background: feedbackType === type ? 'var(--primary)' : 'white',\r\n                                                        color: feedbackType === type ? 'white' : '#374151',\r\n                                                        fontSize: '0.85rem', fontWeight: '600', cursor: 'pointer', transition: 'all 0.15s'\r\n                                                    }}\r\n                                                >{type}</button>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div style={{ marginBottom: '1.5rem' }}>\r\n                                        <label style={{ display: 'block', fontWeight: '600', marginBottom: '0.5rem', fontSize: '0.9rem', color: '#374151' }}>Description (optional)</label>\r\n                                        <textarea\r\n                                            rows={4}\r\n                                            placeholder=\"Tell us what was wrong...\"\r\n                                            value={feedbackDesc}\r\n                                            onChange={e => setFeedbackDesc(e.target.value)}\r\n                                            style={{ width: '100%', borderRadius: '12px', border: '1.5px solid #e2e8f0', padding: '0.75rem', fontSize: '0.9rem', resize: 'vertical', fontFamily: 'inherit', boxSizing: 'border-box' }}\r\n                                        />\r\n                                    </div>\r\n                                    <button\r\n                                        onClick={handleSubmitFeedback}\r\n                                        style={{\r\n                                            width: '100%', padding: '0.875rem', borderRadius: '50px', border: 'none',\r\n                                            background: 'var(--primary)', color: 'white', fontWeight: '700',\r\n                                            fontSize: '1rem', cursor: 'pointer'\r\n                                        }}\r\n                                    >Send Feedback</button>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Modern AI Itinerary View */}\r\n                {itinerary.length > 0 && <ChatWidget />}\r\n                {itinerary.length > 0 ? (\r\n                    <ModernItineraryView\r\n                        itinerary={itinerary}\r\n                        tripContext={tripContext}\r\n                        insight={insight}\r\n                    />\r\n                ) : (\r\n                    <div style={{ display: 'none' }}></div>\r\n                )}\r\n\r\n                {/* Booking Assistance Section */}\r\n                <div style={{ marginTop: '3rem', borderTop: '1px solid #e2e8f0', paddingTop: '2rem' }}>\r\n                    <h3 className={styles.sectionHeader}>\r\n                        <Sparkles size={24} />\r\n                        Booking Assistance\r\n                    </h3>\r\n                    <p className={styles.subtitle} style={{ marginBottom: '2rem' }}>\r\n                        Complete your trip with these matching options for your <strong>{tripContext.style}</strong> style\r\n                    </p>\r\n\r\n                    <div className={styles.grid} style={{ gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))' }}>\r\n                        {/* Stays Card */}\r\n                        <div className={styles.card} style={{ padding: '1.5rem' }}>\r\n                            <div style={{ marginBottom: '1rem', background: '#eff6ff', width: 'fit-content', padding: '0.75rem', borderRadius: '12px' }}>\r\n                                <MapPin size={24} color=\"#3b82f6\" />\r\n                            </div>\r\n                            <h4 style={{ margin: '0 0 0.5rem', fontWeight: '700', color: 'var(--text-main)' }}>Stays</h4>\r\n                            <p style={{ fontSize: '0.9rem', color: '#64748b', marginBottom: '1rem' }}>\r\n                                12+ {tripContext.style} hotels near your destinations\r\n                            </p>\r\n                            <Link to=\"/booking\" className={styles.viewDetailsBtn} style={{ textDecoration: 'none', textAlign: 'center', display: 'block' }}>\r\n                                View Hotels\r\n                            </Link>\r\n                        </div>\r\n\r\n                        {/* Transport Card */}\r\n                        <div className={styles.card} style={{ padding: '1.5rem' }}>\r\n                            <div style={{ marginBottom: '1rem', background: '#fefce8', width: 'fit-content', padding: '0.75rem', borderRadius: '12px' }}>\r\n                                <ExternalLink size={24} color=\"#ca8a04\" />\r\n                            </div>\r\n                            <h4 style={{ margin: '0 0 0.5rem', fontWeight: '700', color: 'var(--text-main)' }}>Transport</h4>\r\n                            <p style={{ fontSize: '0.9rem', color: '#64748b', marginBottom: '1rem' }}>\r\n                                Flights & trains for your {tripContext.days || itinerary.length} day trip\r\n                            </p>\r\n                            <Link to=\"/booking\" className={styles.viewDetailsBtn} style={{ textDecoration: 'none', textAlign: 'center', display: 'block' }}>\r\n                                Check Flights\r\n                            </Link>\r\n                        </div>\r\n\r\n                        {/* Experiences Card */}\r\n                        <div className={styles.card} style={{ padding: '1.5rem' }}>\r\n                            <div style={{ marginBottom: '1rem', background: '#f0fdf4', width: 'fit-content', padding: '0.75rem', borderRadius: '12px' }}>\r\n                                <Sparkles size={24} color=\"#16a34a\" />\r\n                            </div>\r\n                            <h4 style={{ margin: '0 0 0.5rem', fontWeight: '700', color: 'var(--text-main)' }}>Experiences</h4>\r\n                            <p style={{ fontSize: '0.9rem', color: '#64748b', marginBottom: '1rem' }}>\r\n                                Curated activities based on your interests\r\n                            </p>\r\n                            <Link to=\"/booking\" className={styles.viewDetailsBtn} style={{ textDecoration: 'none', textAlign: 'center', display: 'block' }}>\r\n                                Browse Activities\r\n                            </Link>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Booking anchor */}\r\n                <div id=\"booking-section\"></div>\r\n\r\n                <div className={styles.actions}>\r\n                    <button className={styles.backBtn} onClick={() => setStep(3)}>\r\n                        <ChevronLeft size={18} /> Modify\r\n                    </button>\r\n                    <div style={{ display: 'flex', gap: '1rem' }}>\r\n                        {/* Save & Share Button */}\r\n                        <button\r\n                            className={styles.nextBtn}\r\n                            style={{ background: 'white', color: '#0f172a', border: '1px solid #e2e8f0' }}\r\n                            onClick={async () => {\r\n                                // Save Trip Logic with all preferences\r\n                                const tripPayload = {\r\n                                    title: `Trip to ${countries.find(c => c.id === selectedCountry)?.name || 'Unknown'}`,\r\n                                    startCity: startLocation,\r\n                                    country: countries.find(c => c.id === selectedCountry)?.name || 'Unknown',\r\n                                    duration: travelDates.duration || tripContext.days,\r\n                                    budget: tripContext.budget,\r\n                                    travelers: 1,\r\n                                    style: tripContext.style,\r\n                                    dateType: travelDates.type || 'anytime',\r\n                                    travelStartDate: travelDates.start ? travelDates.start.toISOString() : null,\r\n                                    travelEndDate: travelDates.end ? travelDates.end.toISOString() : null,\r\n                                    travelMonth: travelDates.month ? travelDates.month.toLocaleString('default', { month: 'long', year: 'numeric' }) : null,\r\n                                    itinerary: itinerary,\r\n                                    totalCost: budget || 35000\r\n                                };\r\n                                const res = await TripAI.saveTrip(tripPayload, token); // Pass token\r\n                                if (res.tripId) {\r\n                                    alert(`Trip Saved! Share this link: ${window.location.origin}/trip/${res.tripId}`);\r\n                                } else {\r\n                                    alert(\"Failed to save trip. Please try again.\");\r\n                                }\r\n                            }}\r\n                        >\r\n                            <Share2 size={18} style={{ display: 'inline', marginRight: '5px' }} /> Save & Share\r\n                        </button>\r\n                        <button\r\n                            className={styles.nextBtn}\r\n                            onClick={() => {\r\n                                const bookingSec = document.getElementById('booking-section');\r\n                                if (bookingSec) bookingSec.scrollIntoView({ behavior: 'smooth' });\r\n                            }}\r\n                        >\r\n                            Book This Trip\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className={styles.pageContainer}>\r\n            <div className={styles.contentWrapper}>\r\n\r\n                {/* Progress Indicators */}\r\n                <div className={styles.progressContainer}>\r\n                    <div className={`${styles.stepDot} ${step >= 1 ? styles.active : ''} ${step > 1 ? styles.completed : ''}`}>1</div>\r\n                    <div className={`${styles.stepLine} ${step > 1 ? styles.filled : ''}`} />\r\n                    <div className={`${styles.stepDot} ${step >= 2 ? styles.active : ''} ${step > 2 ? styles.completed : ''}`}>2</div>\r\n                    <div className={`${styles.stepLine} ${step > 2 ? styles.filled : ''}`} />\r\n                    <div className={`${styles.stepDot} ${step >= 3 ? styles.active : ''} ${step > 3 ? styles.completed : ''}`}>3</div>\r\n                    <div className={`${styles.stepLine} ${step > 3 ? styles.filled : ''}`} />\r\n                    <div className={`${styles.stepDot} ${step >= 4 ? styles.active : ''} ${step > 4 ? styles.completed : ''}`}>4</div>\r\n                    <div className={`${styles.stepLine} ${step > 4 ? styles.filled : ''}`} />\r\n                    <div className={`${styles.stepDot} ${step >= 5 ? styles.active : ''}`}>5</div>\r\n                </div>\r\n\r\n                {step === 1 && renderStep1()}\r\n                {step === 2 && renderStep2()}\r\n                {step === 3 && renderStep3()}\r\n                {step === 4 && renderStep4()}\r\n                {step === 5 && renderStep5()}\r\n\r\n                <BudgetSelectionModal\r\n                    isOpen={budgetModalOpen}\r\n                    onClose={() => setBudgetModalOpen(false)}\r\n                    onApply={(prefs) => {\r\n                        setTripContext(prev => ({ ...prev, ...prefs }));\r\n                        setPreferencesSet(true);\r\n                        setBudgetModalOpen(false);\r\n                        // No auto-navigation, just save context\r\n                    }}\r\n                />\r\n\r\n                <DateSelectionModal\r\n                    isOpen={showDateModal}\r\n                    onClose={() => setShowDateModal(false)}\r\n                    onApply={handleDateApply}\r\n                />\r\n\r\n                <AIDestinationDetailsModal\r\n                    isOpen={detailsModalOpen}\r\n                    onClose={() => setDetailsModalOpen(false)}\r\n                    destination={selectedDetailDest}\r\n                />\r\n\r\n                {/* Login Required Prompt */}\r\n                {showLoginPrompt && (\r\n                    <div style={{\r\n                        position: 'fixed', inset: 0, background: 'rgba(0,0,0,0.45)',\r\n                        display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                        zIndex: 9999, backdropFilter: 'blur(4px)'\r\n                    }} onClick={() => setShowLoginPrompt(false)}>\r\n                        <div style={{\r\n                            background: '#fff', borderRadius: '20px', padding: '2.5rem 2rem',\r\n                            maxWidth: '380px', width: '90%', textAlign: 'center',\r\n                            boxShadow: '0 25px 50px rgba(0,0,0,0.2)'\r\n                        }} onClick={e => e.stopPropagation()}>\r\n                            <div style={{ fontSize: '3rem', marginBottom: '0.75rem' }}>ðŸ”’</div>\r\n                            <h3 style={{ margin: '0 0 0.5rem', color: '#0f172a', fontSize: '1.3rem' }}>Login Required</h3>\r\n                            <p style={{ color: '#64748b', fontSize: '0.95rem', lineHeight: 1.6, margin: '0 0 1.75rem' }}>\r\n                                You need to be logged in to suggest a destination.\r\n                            </p>\r\n                            <div style={{ display: 'flex', gap: '0.75rem', justifyContent: 'center' }}>\r\n                                <button\r\n                                    onClick={() => setShowLoginPrompt(false)}\r\n                                    style={{\r\n                                        padding: '0.65rem 1.4rem', borderRadius: '50px',\r\n                                        border: '1px solid #e2e8f0', background: '#f8fafc',\r\n                                        color: '#475569', fontWeight: '500', cursor: 'pointer', fontSize: '0.95rem'\r\n                                    }}\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => navigate('/login?redirect=/trip-planner')}\r\n                                    style={{\r\n                                        padding: '0.65rem 1.4rem', borderRadius: '50px',\r\n                                        border: 'none', background: 'var(--primary, #3b82f6)',\r\n                                        color: '#fff', fontWeight: '600', cursor: 'pointer', fontSize: '0.95rem'\r\n                                    }}\r\n                                >\r\n                                    Go to Login\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Floating Scroll Button */}\r\n                {(step === 1 || step === 2 || step === 3) && (\r\n                    <button\r\n                        className={styles.floatingBtn}\r\n                        onClick={() => {\r\n                            if (window.scrollY > 300) {\r\n                                window.scrollTo({ top: 0, behavior: 'smooth' });\r\n                            } else {\r\n                                const nextBtn = document.getElementById('next-step-btn');\r\n                                if (nextBtn) {\r\n                                    nextBtn.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n                                } else {\r\n                                    window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });\r\n                                }\r\n                            }\r\n                        }}\r\n                        title={window.scrollY > 300 ? \"Scroll to Top\" : \"Scroll to Next Step\"}\r\n                    >\r\n                        <ScrollIcon />\r\n                    </button>\r\n                )}\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Helper component for the icon to avoid re-rendering the whole page on scroll\r\nconst ScrollIcon = () => {\r\n    const [isScrolled, setIsScrolled] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const handleScroll = () => {\r\n            setIsScrolled(window.scrollY > 300);\r\n        };\r\n        window.addEventListener('scroll', handleScroll);\r\n        return () => window.removeEventListener('scroll', handleScroll);\r\n    }, []);\r\n\r\n    return isScrolled ? <ArrowUp size={24} /> : <ArrowDown size={24} />;\r\n};\r\n\r\nexport default TripPlannerPage;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\pages\\trips\\TripViewerPage.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchTrip'. Either include it or remove the dependency array.","line":16,"column":8,"nodeType":"ArrayExpression","endLine":16,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [fetchTrip, tripId]","fix":{"range":[664,672],"text":"[fetchTrip, tripId]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport ItineraryTimeline from '../../components/TripPlanner/ItineraryTimeline';\r\nimport BookingSection from '../../components/TripPlanner/BookingSection';\r\nimport { API_BASE_URL } from '../../config';\r\nimport { MapPin, Calendar, DollarSign, Clock, Share2, ArrowLeft } from 'lucide-react';\r\n\r\nconst TripViewerPage = () => {\r\n    const { tripId } = useParams();\r\n    const [trip, setTrip] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    useEffect(() => {\r\n        fetchTrip();\r\n    }, [tripId]);\r\n\r\n    const fetchTrip = async () => {\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/get-trip/${tripId}`);\r\n            if (!response.ok) throw new Error(\"Trip not found\");\r\n            const data = await response.json();\r\n            setTrip(data);\r\n        } catch (err) {\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (loading) return (\r\n        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh', background: '#f8fafc' }}>\r\n            <div className=\"animate-spin\" style={{ width: '40px', height: '40px', border: '4px solid #e2e8f0', borderTopColor: '#3b82f6', borderRadius: '50%' }}></div>\r\n        </div>\r\n    );\r\n\r\n    if (error) return (\r\n        <div style={{ textAlign: 'center', padding: '4rem', color: '#64748b' }}>\r\n            <h2>Trip Not Found</h2>\r\n            <p>Dimensions of this trip seem lost in space-time.</p>\r\n            <Link to=\"/\" style={{ color: '#3b82f6', textDecoration: 'none', marginTop: '1rem', display: 'inline-block' }}>Go Home</Link>\r\n        </div>\r\n    );\r\n\r\n    // Parse itinerary if necessary (it might come as JSON string or object depending on DB)\r\n    const itinerary = typeof trip.itinerary === 'string' ? JSON.parse(trip.itinerary) : trip.itinerary;\r\n\r\n    return (\r\n        <div style={{ background: '#f8fafc', minHeight: '100vh', paddingBottom: '4rem' }}>\r\n            {/* Header */}\r\n            <div style={{ background: 'white', borderBottom: '1px solid #e2e8f0', padding: '1rem 2rem' }}>\r\n                <div style={{ maxWidth: '1200px', margin: '0 auto', display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n                    <Link to=\"/\" style={{ display: 'flex', alignItems: 'center', gap: '8px', color: '#64748b', textDecoration: 'none', fontWeight: '500' }}>\r\n                        <ArrowLeft size={18} /> Back home\r\n                    </Link>\r\n                    <div style={{ fontWeight: 'bold', color: '#3b82f6', fontSize: '1.2rem' }}>AltairGo</div>\r\n                </div>\r\n            </div>\r\n\r\n            <div style={{ maxWidth: '1000px', margin: '2rem auto', padding: '0 1rem' }}>\r\n\r\n                {/* Trip Hero */}\r\n                <div style={{ background: 'white', borderRadius: '24px', padding: '2rem', boxShadow: '0 4px 20px rgba(0,0,0,0.05)', marginBottom: '2rem' }}>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start', flexWrap: 'wrap', gap: '1rem' }}>\r\n                        <div>\r\n                            <h1 style={{ margin: '0 0 0.5rem', fontSize: '2rem', color: '#1e293b' }}>{trip.title || `Trip to ${trip.country}`}</h1>\r\n                            <div style={{ display: 'flex', gap: '1.5rem', color: '#64748b', fontSize: '0.95rem' }}>\r\n                                <span style={{ display: 'flex', alignItems: 'center', gap: '6px' }}><MapPin size={16} /> {trip.country}</span>\r\n                                <span style={{ display: 'flex', alignItems: 'center', gap: '6px' }}><Clock size={16} /> {trip.duration} Days</span>\r\n                                <span style={{ display: 'flex', alignItems: 'center', gap: '6px' }}><DollarSign size={16} /> â‚¹{trip.cost ? trip.cost.toLocaleString() : 'N/A'}</span>\r\n                            </div>\r\n                        </div>\r\n                        <button onClick={() => navigator.clipboard.writeText(window.location.href)} style={{ display: 'flex', alignItems: 'center', gap: '8px', padding: '0.75rem 1.5rem', borderRadius: '12px', border: '1px solid #e2e8f0', background: 'white', cursor: 'pointer', color: '#475569', fontWeight: '600' }}>\r\n                            <Share2 size={18} /> Share\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Itinerary Timeline */}\r\n                <h2 style={{ fontSize: '1.5rem', marginBottom: '1.5rem', color: '#334155' }}>Itinerary</h2>\r\n                <ItineraryTimeline itinerary={itinerary} />\r\n\r\n                {/* Booking Section */}\r\n                <BookingSection\r\n                    startLocation={trip.startCity || 'Your City'}\r\n                    destinations={[{ name: trip.country }]} // Simplified for viewer\r\n                    travelDate={{ duration: trip.duration }}\r\n                />\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TripViewerPage;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\src\\services\\TripAI.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AltairLabs\\vite.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]